(function() {'use strict';var f=void 0,g=!0,j=null,k=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,q=q||{};window.cj=q;q.version=q.version||"1.6.3";q.Uc=g;q.kP="2014-04-18 2:03 PM";q.zd=k;q.a=q.a||{};q.F=q.F||{};q.b=q.b||{};q.ql=q.ql||{};function da(a,b){return'<image id="'+(b+1)+'" src="'+(fa+a)+'" />'}
function ga(a,b){return'<binding template="'+a+'" branding="'+ha+'">'+(b?Array.isArray(b)?b.map(da).join(""):da(b,0):"")+"</binding>"}var fa="http://contrejour.webs.pm/tiles/",ia=[["tile-medium-01.jpg","tile-wide-01.jpg","tile-large-01.jpg"],["tile-medium-02.jpg","tile-wide-02.jpg","tile-large-02.jpg"],["tile-medium-03.jpg","tile-wide-03.jpg","tile-large-03.jpg"],["tile-medium-04.jpg","tile-wide-04.jpg","tile-large-04.jpg"],["tile-medium-05.jpg","tile-wide-05.jpg","tile-large-05.jpg"]],ha="name";
q.a.XO=function(){try{if(0!==window.external.msPinnedSiteState()){var a=parseInt(localStorage.getItem("WindowsTileIndex"),10)||0,a=(a+1)%ia.length,b=ia[a],c=b[0],d=b[1],e=b[2];window.external.msClearTile();var h;h='<tile><visual version="2">'+[ga("TileSquare150x150Image",c),ga("TileWide310x150Image",d),ga("TileSquare310x310Image",e)].join("")+"</visual></tile>";var n=Date.now();window.external.msScheduledTileNotification(h,"notificationId-"+n,"notificationTag-"+n,n,n+31536E6);localStorage.setItem("WindowsTileIndex",
a.toString())}}catch(p){}};var ja=window,s=q;function ka(a){for(var b=a.length,c=b-1;0<=c;c--)a[c]||(a.splice(c,1),b--);return b}function la(a){a=a.className||"";return"string"==typeof a?a:a.RH||""}function ma(a,b){"string"==typeof(a.className||"")?a.className=b:a.className.RH=b}function na(a,b){var c=oa();a.addEventListener(c,b)}function pa(a,b){var c=oa();a.removeEventListener(c,b)}
function oa(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(b.style[a]!==f)return c[a]}var qa={},ra=(location.search.substring(1)||"").split("&"),sa,ta,ua;sa=0;
for(ta=ra.length;sa<ta;sa++)if(ua=ra[sa].split("="),0<ua.length){var va=1<ua.length?ua[1]:"";qa[decodeURIComponent(ua[0].replace(/\+/g," "))]=decodeURIComponent(va.replace(/\+/g," "))}s.a.ad=function(a,b){var c=qa[a];return c==j?b==j?"":b:c};s.a.QO=function(a){var b;b||(b=ja.location.href);var c=/([?|&])lang=.*?(&|#|$)/gi;if(b.match(c))return a?b.replace(c,"$1lang="+a+"$2"):b.replace(c,"$2");a&&(c=b.split("#"),b=c[0]+(-1!==b.indexOf("?")?"&":"?")+"lang="+a,c[1]&&(b+="#"+c[1]));return b};
s.a.addClass=function(a,b){var c=la(a),d=c.split(" "),e=ka(d),h;if(0<=b.indexOf(" ")){var n=b.split(" ");ka(n);for(var p=0;p<e;p++){var r=n.indexOf(d[p]);0<=r&&n.splice(r,1)}0<n.length&&(h=n.join(" "))}else{n=k;for(p=0;p<e;p++)if(d[p]===b){n=g;break}n||(h=b)}h&&(0<e&&0<d[0].length?ma(a,c+" "+h):ma(a,h));return a};
s.a.removeClass=function(a,b){var c=la(a),d;if(0<=b.indexOf(" "))d=b.split(" "),ka(d);else{if(0>c.indexOf(b))return a;d=[b]}for(var e,c=c.split(" "),h=ka(c)-1;0<=h;h--)0<=d.indexOf(c[h])&&(c.splice(h,1),e=g);e&&ma(a,c.join(" "));return e===g?g:k};s.a.toggleClass=function(a,b){for(var c=la(a),d=c.trim().split(" "),e=d.length,h=k,n=0;n<e;n++)d[n]==b&&(h=g);h?ma(a,d.reduce(function(a,c){return c==b?a:a&&0<a.length?a+" "+c:c},"")):0<e&&0<d[0].length?ma(a,c+" "+b):ma(a,c+b);return a};
s.a.kd=function(a,b,c){b="translate("+b+","+c+")";a.style.transform=b;a.style.WebkitTransform=b;a.style.msTransform=b;a.style.MozTransform=b};s.a.ca=function(a,b,c){b="scale("+b+","+c+")";a.style.transform=b;a.style.msTransform=b;a.style.WebkitTransform=b;a.style.MozTransform=b};s.a.EB=function(a){a.style.transitionProperty="opacity";a.style.msTransitionProperty="opacity";a.style.WebkitTransitionProperty="opacity";a.style.oTransitionProperty="opacity"};
s.a.lc=function(a,b){var c=b+"ms";a.style.transitionDuration=c;a.style.msTransitionDuration=c;a.style.MozTransitionDuration=c;a.style.WebkitTransitionDuration=c;a.style.oTransitionDuration=c};s.a.ld=function(a,b){var c=b+"ms";a.style.transitionDelay=c;a.style.msTransitionDelay=c;a.style.MozTransitionDelay=c;a.style.WebkitTransitionDelay=c;a.style.oTransitionDelay=c};
s.a.hs=function(a,b){a.style.transitionTimingFunction=b;a.style.msTransitionTimingFunction=b;a.style.MozTransitionTimingFunction=b;a.style.WebkitTransitionTimingFunction=b;a.style.oTransitionTimingFunction=b};s.a.TP=na;s.a.eR=pa;s.a.zi=function(a,b){function c(){b();pa(a,c)}na(a,c)};
s.a.Ly=function(){var a,b;a=ja.getComputedStyle(wa.getElementById("container"),j);a:{b=["transform","msTransform","WebkitTransform","MozTransform","oTransform"];for(var c=document.createElement("fakeelement"),d=0,e;d<b.length;){e=b[d];if(c.style[e]!==f){b=e;break a}d++}b=k}a=a[b];if(!a||"none"===a)a="matrix(1, 0, 0, 1, 0, 0)";b=a.split("(")[1];b=b.split(")")[0];b=b.split(",");a=parseFloat(b[0]);b=parseFloat(b[1]);return Math.sqrt(a*a+b*b)};
s.a.pQ=function(a,b){a.x+=0.025*(b.x-a.x);a.y+=0.025*(b.y-a.y)};s.a.na=function(a,b,c){for(var d=document.styleSheets,e,h=0;h<d.length;h++)if(e=d[h].cssRules||d[h].rules)for(var n=0;n<e.length;n++)e[n].selectorText===a&&(e[n].style[b]=c)};
s.a.Wz=function(a,b,c){a===s.ql.GG&&0==b?s.a.Bj("Levels","Load","Final Level",c.xk()):s.a.Bj("Levels","Load","Level "+(a+1)+" - "+b,c.xk());0===a?1===b?(s.a.xc("http://view.atdmt.com/action/SMG_MRTINX_SITE_CJ_Chapter1_Play"),s.a.sg("hp_2"),s.a.xc("http://ace.adoftheyear.com/p13100/tagger_v02.php?project=p13100&tag=1a&channel=[sid=US_ContreJour_Tag_4_1d|cid=1004|]")):2===b?s.a.xc("http://ace.adoftheyear.com/p13100/tagger_v02.php?project=p13100&tag=1a&channel=[sid=US_ContreJour_Tag_5_1e|cid=1005|]"):
3===b?s.a.xc("http://ace.adoftheyear.com/p13100/tagger_v02.php?project=p13100&tag=1a&channel=[sid=US_ContreJour_Tag_6_1f|cid=1006|]"):10===b&&s.a.xc("http://ace.adoftheyear.com/p13100/tagger_v02.php?project=p13100&tag=1a&channel=[sid=US_ContreJour_Tag_7_1g|cid=1007|]"):1===a&&1===b?(s.a.xc("http://view.atdmt.com/action/SMG_MRTINX_SITE_CJ_Chapter2_Play"),s.a.sg("hp_3")):2===a&&1===b&&(s.a.xc("http://view.atdmt.com/action/SMG_MRTINX_SITE_CJ_Chapter3_Play"),s.a.sg("hp_4"))};
s.a.sg=function(a){s.zd||meteor.tracking.track_conversion("63e3041e-d303-48f8-b0ae-c12a34ebd1de",{name:a})};s.a.Xz=function(a){s.a.xc("http://view.atdmt.com/action/SMG_MRTINX_SITE_CJ_Share");s.a.sg("hp_9_share");s.a.Bj("Share",a)};s.a.Bj=function(a,b,c,d){s.zd||(d!==f&&c!==f?ja._gaq.push(["_trackEvent",a,b,c,d]):c!==f?ja._gaq.push(["_trackEvent",a,b,c]):ja._gaq.push(["_trackEvent",a,b]))};s.a.xc=function(a){s.zd||((new Image).src=a)};
s.a.tL=function(){if(!s.zd){var a=document.createElement("script");a.type="text/javascript";a.src="http://view.atdmt.com/jaction/SMG_MRTINX_SITE_CJ_HP_Play";document.getElementsByTagName("head")[0].appendChild(a)}};s.a.wy=function(a){var b=(a+"").split(".");a=b[0];for(var b=1<b.length?"."+b[1]:"",c=/(\d+)(\d{3})/;c.test(a);)a=a.replace(c,"$1,$2");return a+b};var xa=window,ya=q,za=[];
ya.a.v={Zf:j,load:function(a,b){var c=this;c.Zf=c.PJ();if(b){for(var d=document.getElementById("languageSelect"),e=0;e<d.length;e++){var h=d[e];if(h.id==c.Zf){h.selected=g;break}}d.addEventListener("change",function(){xa.location.href=ya.a.QO(d.options[d.selectedIndex].value)});var n=document.getElementById("siteLanguage");n.addEventListener("click",function(){"hide"==d.className?(n.innerText=c.Ub("SITE_LANGUAGE",[""]),ya.a.removeClass(d,"hide")):(n.innerText=c.Ub("SITE_LANGUAGE",[c.P("LANGUAGE")]),
ya.a.addClass(d,"hide"))})}var p=new XMLHttpRequest;p.open("GET","strings/"+c.Zf+".txt?v="+ya.version,k);p.onreadystatechange=function(){if(4===p.readyState){for(var d=[],e=p.responseText.split("\n"),h="",G,ea,Ua=0;Ua<e.length;Ua++)if((h=e[Ua])&&1<h.length)if(ea=h.split("="),2===ea.length){G=ea[0].split('"');h=G[1].trim();G=ea[1].trim();G=G.substr(1,G.length-3);ea=G.length;for(var Aa=0;Aa<ea;Aa++)"\\"===G[Aa]&&'"'===G[Aa+1]&&(G=G.substr(0,Aa)+G.substr(Aa+1,G.length-1));0<h.length&&0<G.length&&(d[h]=
G)}za[c.Zf]=d;b&&(n.innerText=c.Ub("SITE_LANGUAGE",[c.P("LANGUAGE")]));a&&a()}};p.send()},P:function(a){return za[this.Zf][a]||""},Ub:function(a,b){var c=this.P(a),d=-1,e=j;do d=c.indexOf("%d"),e=b.shift(),0<=d&&(c=c.replace("%d",e));while(0<=d&&0<b.length);return c||""},Bh:function(){return"english"==this.Zf},VJ:function(a){return this.Bh()?a:0.85*a},qq:function(){var a=ya.a.ad("lang",j);if(a===j||""===a)a=xa.navigator.language||xa.navigator.userLanguage||xa.navigator.browserLanguage||xa.navigator.systemLanguage||
"en-us";var b=j,a=a.substr(0,2);switch(a){case "fr":b="fr";break;case "de":b="de";break;case "ru":b="ru";break;case "pt":b="pt";break;case "es":b="es";break;case "zh":b="zh"}return b},$J:function(){var a=this.qq();return a!==j?"ModernBrowser-"+a+".html":"ModernBrowser.html"},tq:function(){var a=this.qq();return a!==j?"UpgradeInternetExplorer-"+a+".html":"UpgradeInternetExplorer.html"},PJ:function(){var a=ya.a.ad("lang",j);if(a===j||""===a)a=xa.navigator.language||xa.navigator.userLanguage||xa.navigator.browserLanguage||
xa.navigator.systemLanguage||"en-us";a=a.substr(0,2);switch(a){case "fr":return"french";case "de":return"german";case "ru":return"russian";case "pt":return"portuguese";case "es":return"spanish";case "zh":return"chinese_hans";default:return"english"}}};var Ba=window,Ca=BrowserDetect,Da=q;
if(Modernizr.canvas){"Explorer"===Ca.browser&&9>Ca.version&&(Ba.location=Da.a.v.tq());var Ea=navigator.userAgent.match(/iPad/i)!=j,Fa=navigator.userAgent.match(/Android/i)!=j,Ga=navigator.userAgent.match(/Mobile/i)!=j;if(Ea){var Ha=document.querySelector("meta[name=viewport]");Ha.setAttribute("content","width=device-width; maximum-scale=.75; user-scalable=0;")}Fa&&(Ha=document.querySelector("meta[name=viewport]"),Ha.setAttribute("content","width=device-width; maximum-scale=.55; user-scalable=0;"));
Fa&&Ga&&(Ha=document.querySelector("meta[name=viewport]"),Ha.setAttribute("content","width=device-width; maximum-scale=.35; user-scalable=0;"))}else Ba.location="Windows Vista"===Ca.OS?Da.a.v.tq():"Windows 7"===Ca.OS?Da.a.v.tq():Da.a.v.$J();var Ia=q;Ia.performance={};
Ia.a.performance=new function(){document.getElementById("surface").getContext("2d");this.gR=function(a){var b=new PxLoader({appVersion:Ia.version}),c=[];c.push(b.addImage("img/TitleMenuBg.jpg"));c.push(b.addImage("img/titleLightRay.png"));c.push(b.addImage("img/logoBig.png"));c.push(b.addImage("img/LoaderPlanetBg.png"));c.push(b.addImage("img/LoaderPlanetFg.png"));c.push(b.addImage("img/loaderEye.png"));c.push(b.addImage("img/loaderEyeBall.png"));b.addCompletionListener(function(){function b(){0!==
v&&(v=Date.now(),p=v-r,h+=p,n+=1);r=Date.now();v=-1;for(var E=0;7>E;E++)for(var G=0;G<c.length;G++)e.drawImage(c[G],0,0);for(E=0;250>E;E++);60>n?(window.console&&window.console.log("Frame Result: "+p),window.requestAnimationFrame(b)):(E=h/n,Ia.performance.result=16>E?Ia.performance.Uj.gM:33>E?Ia.performance.Uj.IL:Ia.performance.Uj.Wx,e.clearRect(0,0,e.canvas.width,e.canvas.height),a())}var e=document.getElementById("surface").getContext("2d"),h=0,n=0,p=0,r=0,v=0;b()});b.start()};this.pR=function(){Ia.performance.result===
Ia.performance.Uj.Wx&&(document.getElementById("gameWarning").style.visibility="visible",document.getElementById("gameWarning").innerHTML=Ia.a.v.P("PERFORMANCE_WARNING"))}};Ia.performance.Uj={DO:"Undecided",gM:"Optimal",IL:"Minimum",Wx:"Degraded"};Ia.performance.result=Ia.performance.Uj.DO;var Ja=q,La=document,Ma=window,Na=j;
"undefined"!==typeof La.hidden?Na="hidden":"undefined"!==typeof La.mozHidden?Na="mozHidden":"undefined"!==typeof La.msHidden?Na="msHidden":"undefined"!==typeof La.webkitHidden&&(Na="webkitHidden");var Oa=k;Ja.a.TK=function(){return Na?La[Na]:Oa};
Ja.a.WH=function(a){var b,c,d={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange"};for(b in d)if(d.hasOwnProperty(b)&&b in La){c=d[b];break}c?La.addEventListener(c,a):(Ma.onfocus=function(){Oa=k;a()},Ma.onblur=function(){Oa=g;a()})};var Pa=window,Qa=document,Ra=Tweenable,Sa=PxLoader,Ta=q;function Va(a,b,c){this.CO=new Ra;this.duration=a;this.hM=this.alpha=b;this.mO=c}
function Wa(a,b){this.x=a;this.y=b}
function Xa(a,b){this.Ps=(0.5-Math.random())/2.5;this.Qs=0.1+Math.random();this.Os=0.0010+0.0040*Math.random();this.fd=a;this.opacity=0.5+0.5*Math.random();this.he=100+260*Math.random();this.scale=0.45+0.5*Math.random();this.img=b;this.$d=g;this.update=function(){this.he-=this.Ps;this.fd-=this.Qs;this.opacity-=this.Os;this.$d=0.05<this.scale&&0.01<this.opacity&&0<this.fd};this.h=function(a){if(this.$d){var d=this.opacity;50>this.fd&&(d*=this.fd/50);a.save();a.globalAlpha=d;a.translate(this.he,this.fd);
a.scale(this.scale,this.scale);a.drawImage(b,0,0);a.restore()}}}
function Ya(){var a=this;this.ready=k;this.gq=new Wa(Math.random()*Pa.innerWidth,Math.random()*Pa.innerHeight);var b=k;Pa.navigator.msMaxTouchPoints&&0<Pa.navigator.msMaxTouchPoints&&(b=g);Modernizr.touch||b?this.EJ=Pa.setInterval(function(){a.gq=new Wa(Math.random()*Pa.innerWidth,Math.random()*Pa.innerHeight)},2E3):(this.aK=b=function(b){a.gq.x=b.clientX;a.gq.y=b.clientY},Qa.getElementById("loaderContainer").addEventListener("mousemove",b));this.xg=new Sa({appVersion:Ta.version});this.QA=this.xg.addImage("img/siteLoadingParticle.png");
this.r=[];this.Gr=this.xg.addImage("img/McPlanetVBackground1-hd.png");this.Ir=this.xg.addImage("img/McPlanetVBackground2-hd.png");this.Hr=0;this.Jr=30;this.Kr=this.xg.addImage("img/LoaderPlanetFg.png");this.ZQ=k;this.state=Za.SD;this.vm=Qa.getElementById("loaderProgressContainer");this.BJ={progress:new Va(300,1,0)};a=this;this.xg.addCompletionListener(function(){a.ready=g;a.show()});this.xg.start();this.pC=Qa.getElementById("surface");this.S=this.pC.getContext("2d");this.oL=Qa.getElementById("loaderCanvas");
this.pL=this.oL.getContext("2d");this.RB=f;this.hQ=Pa.innerWidth;this.ch=Pa.innerHeight;this.gr=this.um=0;this.qL=Qa.getElementById("loaderProgress");this.Qq=k}var Za={SD:0,jt:1,PD:2,EG:3};Va.prototype.wJ=function(a,b){this.CO.tween({from:{alpha:this.hM},to:{alpha:this.mO},duration:this.duration,step:a,callback:b,easing:"easeOutSine"})};Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,c)};
Wa.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y};m=Ya.prototype;m.show=function(){var a=this;Ta.a.addClass(Qa.getElementById("loaderPanel"),"show");Qa.getElementById("fader").style.opacity=0.4;this.RB=Pa.setInterval(function(){var b=Date.now();a.update(a.pL,b)},1E3/60)};
m.hide=function(){Qa.getElementById("loaderPanel").style.opacity=0;Ta.a.removeClass(Qa.getElementById("loaderPanel"),"show");Pa.clearInterval(this.RB);Qa.getElementById("loaderContainer").removeEventListener("mousemove",this.aK)};
m.update=function(a,b){b*=0.0020;var c=15*Math.sin(b),d=10*Math.cos(b);if(isNaN(c)||isNaN(d))c=15*Math.sin(0.0010*b),d=10*Math.cos(0.0010*b);var e=this.gr-this.um,e=0>=e?-10<e&&90>this.gr?1:0:Math.min(e,5);this.um+=e;this.qL.style.width=90*(this.um/100)+"px";this.Hr+=0.35;this.Jr-=0.65;a.clearRect(0,0,a.canvas.width,a.canvas.height);if(!this.Qq){this.DG();this.bJ(a,c,d);if(0==this.r.length)for(;20>this.r.length;)this.r.push(new Xa(100+300*Math.random(),this.QA));else if(100<this.r.length)for(c=this.r.length-
1;0<=c;c--)this.r[c].$d||this.r.remove(c);for(c=d=0;c<this.r.length;c++)this.r[c].update(),this.r[c].$d&&d++;for(c=d;80>c;c++)this.r.push(new Xa(400,this.QA))}};
m.DG=function(){switch(this.state){case Za.jt:var a=this,b;a.state=Za.PD;this.BJ.progress.wJ(function(){a.vm.style.opacity=this.alpha;b=a.vm.childNodes;for(var c=0;c<b.length;c++)1===b[c].nodeType&&(b[c].style.opacity=this.alpha)},function(){a.vm.style.opacity=this.alpha;b=a.vm.childNodes;for(var c=0;c<b.length;c++)1===b[c].nodeType&&(b[c].style.opacity=this.alpha);a.state=Za.EG;a.bO(a)})}};
m.bJ=function(a,b,c){a.save();a.scale(0.99,0.99);for(var d=0;d<this.r.length;d++)this.r[d].h(a);a.save();a.translate(a.canvas.width/2+b,a.canvas.height/2+(c-10));a.rotate(Ta.a.e.Z(this.Hr));a.scale(1.25,1.25);a.translate(this.Gr.width/-2,this.Gr.height/-2);a.drawImage(this.Gr,0,0);a.restore();a.save();a.translate(a.canvas.width/2+b,a.canvas.height/2+(c-10));a.rotate(Ta.a.e.Z(this.Jr));a.scale(1.25,1.25);a.translate(this.Ir.width/-2,this.Ir.height/-2);a.drawImage(this.Ir,0,0);a.restore();a.drawImage(this.Kr,
(a.canvas.width-this.Kr.width)/2+(b+10),(a.canvas.height-this.Kr.height)/2+(c-10));a.restore()};m.dM=function(){Pa.clearInterval(this.EJ);this.state=Za.jt};var $a=k;
Ya.prototype.bO=function(a){$a||(Ta.a.tL(),Ta.a.xc("http://ace.adoftheyear.com/p13100/tagger_v02.php?project=p13100&tag=1a&channel=[sid=US_ContreJour_Tag_1_1a|cid=1001|]"),Ta.a.sg("hp_1"),$a=g,Qa.getElementById("fader").style.opacity=0,$("#container").addClass("show"),$("#gameFooter").addClass("show"),$("#gameHeader").addClass("show"),$("#sharePanel").addClass("show"),$("#shareCardPanel").addClass("show"),$("#vote-sxsw").addClass("show"),a.hide(),a.pC.style.backgroundColor="rgba(0,0,0,0)",Qa.body.removeChild(Qa.getElementById("loaderContainer")),
Ta.a.removeClass(Qa.getElementById("menuContainer"),"noShow"),Ta.F.q.aH())};Ya.prototype.cO=function(){this.Qq=g};Ya.prototype.hO=function(){this.Qq=k};Ta.F.Fa=new Ya;var bb=q;function cb(){this.enabled=g;this.ub=[]}cb.prototype.addListener=function(a,b){this.ub.push({context:a,jh:b})};cb.prototype.removeListener=function(a,b){for(var c=0;c<this.ub.length;c++)if(b===this.ub[c].jh&&a===this.ub[c].context){this.ub.splice(c,1);break}};
cb.prototype.yb=function(a){if(this.enabled)for(var b=this.ub.length-1;0<=b;b--)this.ub[b].jh.call(this.ub[b].context,a)};bb.a.Yb=cb;
q.a.yw={kR:function(a,b,c){c===f&&(c=2);b===f&&(b=20);for(var d=a.getImageData(0,0,a.canvas.width,a.canvas.height),e=d.data,h=e.length,n=0,p=0,r=4*d.width,v=0;v<h;v+=4)if(0===e[v]&&0!==e[v+3]){n=0;for(p=1;p<b;p++)if(0===e[v-1+4*p]){n+=b-p;break}for(p=1;p<b;p++)if(0===e[v+3-p*r]){n+=b-p;break}0<n&&(e[v]+=n*c,e[v+1]+=n*c,e[v+2]+=n*c)}a.putImageData(d,0,0)},MI:function(a,b,c,d,e){d=d||"rgb(0,0,0)";var h=a.createLinearGradient(0,0,0,a.canvas.height);a=e?Math.min(1,b/a.canvas.height):Math.min(0.94,b/a.canvas.height);
h.addColorStop(Math.max(0,a-0.06),c);h.addColorStop(Math.min(1,a+0.06),d);return h},AN:function(a,b,c,d,e,h,n,p,r){function v(a,b,c){return!r||r==EasingType.xo?a+(b-a)*c:a+(b-a)*Penner.oQ(c,r)}var E=this.$y(h)/255,G=this.Zy(h)/255;h=this.Yy(h)/255;var ea=this.$y(n)/255,Ua=this.Zy(n)/255,Aa=this.Yy(n)/255;for(d=c/d;0<c;c-=d){a.lineWidth=c;var ab=Math.floor(c*b)/255,ib=Math.floor(255*v(ea,E,ab)),Nb=Math.floor(255*v(Ua,G,ab)),ab=Math.floor(255*v(Aa,h,ab)),ib=this.MI(a,e,"rgb("+ib+","+Nb+","+ab+")",n,
p);a.strokeStyle=ib;a.stroke()}},BN:function(a,b,c,d){b=b===f?1.3:b;c=c===f?30:c;d=d===f?5:d;for(var e=0,h=c/d;0<c;c-=h)e++,a.lineWidth=c,a.strokeStyle="rgba("+b+","+b+","+b+","+e/d+")",a.stroke()},$y:function(a){return parseInt(this.Np(a).substring(0,2),16)},Zy:function(a){return parseInt(this.Np(a).substring(2,4),16)},Yy:function(a){return parseInt(this.Np(a).substring(4,6),16)},Np:function(a){return"#"==a.charAt(0)?a.substring(1,7):a}};var db=document,eb=q;
function fb(a,b,c){this.fz=a;a=eb.a.tc.Ey(a,b||eb.F.q.theme);this.Za=a.img;this.pd=eb.a.wD.SJ(a.name);this.frame=0;this.HH=-this.pd.anchor.x;this.IH=-(1-this.pd.anchor.y);this.alpha=1;c&&(this.buffer=db.createElement("canvas"),this.buffer.width=this.Za.width,this.buffer.height=this.Za.height)}function gb(a,b,c){this.ZB=a;this.ga=new fb(a,c);this.ge=j;this.loop=b;this.jc=this.Gb=this.ym=k;this.Nh=g;this.vf=k;this.of=0;this.vb=this.ga.pd.frames-1;this.speed=1;this.sb=this.ga.frame}
function hb(){this.Wc=[];this.je=[];this.ra=j}var jb="arm"===navigator.cpuClass;m=fb.prototype;m.Je=function(a){this.Za=eb.a.tc.Ey(this.fz,a).img};m.h=function(a,b,c){this.fc(a,b.position.x,b.position.y,b.rotation,b.scale.x,b.scale.y,c)};
m.fJ=function(a,b,c){this.buffer.width=this.Za.width;this.buffer.height=this.Za.height;var d=this.buffer.getContext("2d");d.fillStyle=c.toString();d.fillRect(0,0,this.buffer.width,this.buffer.height);c=this.Za;d.save();d.globalCompositeOperation="destination-atop";d.globalAlpha=1;d.drawImage(c,0,0);d.restore();this.aJ(a,b.position.x,b.position.y,b.rotation,b.scale.x,b.scale.y)};m.fc=function(a,b,c,d,e,h,n){this.drawImage(a,this.Za,b,c,d,e,h,n,a.globalAlpha*this.alpha)};
m.drawImage=function(a,b,c,d,e,h,n,p,r){if(b){if(!(0>=r||0===h||0===n)){var v=0!==c||0!==d,E=0!==e,G=1!==h||1!==n,ea=this.pd.nq[this.frame],Ua=ea.width*this.HH,Aa=ea.height*this.IH;!E&&!G&&(Ua+=c,Aa+=d,v=k);a.save();r!==a.globalAlpha&&(a.globalAlpha=r);eb.F.q.El++;jb||(r=a.globalCompositeOperation,p&&p!==r&&(a.globalCompositeOperation=p));v&&a.translate(c,d);E&&a.rotate(e);G&&a.scale(h,n);a.drawImage(b,ea.x,ea.y,ea.width,ea.height,Ua,Aa,ea.width,ea.height);if(!eb.Uc){if(!this.ir&&"undefined"!==typeof console&&
(ea.x+ea.width>b.naturalWidth||ea.y+ea.height>b.naturalHeight))console.log("exceeded image size: "+b.src),console.log("natural size, width: "+b.naturalWidth+" height:"+b.naturalHeight),this.ir=g;this.lQ&&(a.strokeStyle="red",a.strokeRect(Ua,Aa,ea.width,ea.height))}a.restore()}}else!eb.Uc&&("undefined"!==typeof console&&!this.ir)&&(console.log("missing image:"),console.log(this.fz),this.ir=g)};m.aJ=function(a,b,c,d,e,h){this.drawImage(a,this.buffer,b,c,d,e,h,f,this.alpha)};
m.eJ=function(a,b,c){a.save();a.globalAlpha=this.alpha;a.translate(0,0);a.drawImage(this.Za,0,0,b,c);a.restore()};m=gb.prototype;m.update=function(a){if(this.Gb&&!this.ym&&(this.Dg(this.sb+30*a.B*this.speed*(this.vf?-1:1)),!this.vf&&this.ga.frame>=this.vb||this.vf&&this.ga.frame<=this.of))this.loop||(this.Nh?(this.Eg(this.vf?this.vb:this.of),this.jc=this.Gb=k):(this.Gb=k,this.jc=g)),this.ge&&this.ge(this.ZB)};m.h=function(a,b){this.jc&&this.ga.h(a,b)};m.Je=function(a){this.ga.Je(a)};
m.play=function(a){this.jc=this.Gb=g;this.ge=a};m.pause=function(){this.Gb=k};m.stop=function(){this.pause();this.Eg(this.vf?this.vb:this.of);this.jc=this.Gb=k;this.ge&&this.ge(this.ZB)};m.Dg=function(a){a<this.of?this.Eg(this.of):a>this.vb?this.Eg(this.vb):this.Eg(a)};m.tB=function(a){this.of=a?a:0;this.ga.frame<this.of&&this.Eg(this.of)};m.ck=function(a){this.vb=a?a:this.ga.pd.frames-1;this.ga.frame>this.vb&&this.Eg(this.vb)};m.Eg=function(a){this.sb=a;this.ga.frame=a|0};
m.Sc=function(){this.jc=g;this.Nh=k};m=hb.prototype;m.add=function(a,b,c){this.Wc[b]=a;c&&(this.je[b]=a)};m.update=function(a){this.ra&&this.ra.update(a)};m.h=function(a,b,c,d){this.ra&&this.ra.h(a,b,c,d)};m.Je=function(a){for(var b in this.Wc)this.Wc.hasOwnProperty(b)&&b.Je(a);for(b in this.je)this.je.hasOwnProperty(b)&&b.Je(a)};m.clear=function(){for(var a in this.Wc)this.Wc.hasOwnProperty(a)&&delete this.Wc[a];for(a in this.je)this.je.hasOwnProperty(a)&&delete this.Wc[a]};
m.$r=function(a,b,c){a=this.Wc[a];var d=this.ra&&this.ra.Gb;if(a&&(!d||b))d&&this.ra.stop(),this.ra=a,this.ra.play(c)};m.tN=function(a){var b=Math.floor(eb.a.e.u(0,this.CM())),c,d,e=0;for(c in this.je)if(this.je.hasOwnProperty(c)){if(e===b){this.$r(c,k,a);d=c;break}e+=1}return d};m.Wn=function(){return this.ra?this.ra.ga.pd.frames:-1};m.sb=function(){return this.ra?this.ra.ga.frame:-1};m.Dg=function(a){this.ra&&(this.ra.ga.frame=a)};m.oN=function(){this.ra&&(this.ra.ym=g)};
m.size=function(){var a=0,b;for(b in this.Wc)this.Wc.hasOwnProperty(b)&&(a+=1);return a};m.CM=function(){var a=0,b;for(b in this.je)this.je.hasOwnProperty(b)&&(a+=1);return a};m.Uy=function(){return 0<this.size()};m.Vc=function(){return this.ra?this.ra.Gb:k};m.mk=function(){this.ra&&this.ra.stop()};eb.a.I=fb;eb.a.rb=gb;eb.a.bt=hb;
var kb=q,lb=Box2D.Common.Math.b2Vec2,mb={wR:function(a,b,c){c.scale.x=a.scale.x*b.scale.x;c.scale.y=a.scale.y*b.scale.y;c.rotation=a.rotation+b.rotation;c.position.x=a.position.x+b.position.x*a.scale.x;c.position.y=a.position.y+b.position.y*a.scale.y},zb:function(a,b){(0!==b.position.x||0!==b.position.y)&&a.translate(b.position.x,b.position.y);0!==b.rotation&&a.rotate(b.rotation);(1!==b.scale.x||1!==b.scale.y)&&a.scale(b.scale.x,b.scale.y)},Vg:function(){return Math.PI/2},BP:function(){return mb.Vg()/
2},Bb:function(a,b,c){return Math.min(Math.max(a,b),c)},Ud:function(a,b){return 0.01>Math.abs(a-b)},MJ:function(a,b){return 0.01<Math.abs(a-b)},gx:function(a,b,c){return a>b&&a<c},xh:function(a){return 0>a?-1:0<a?1:0},hJ:function(a,b){return-b/2*(Math.cos(Math.PI*a)-1)},ba:function(a,b,c){return Math.abs(b-a)<=c?b:a+this.xh(b-a)*c},u:function(a,b){return a+Math.random()*(b-a)},NQ:function(a){return!isNaN(a)&&a!=Number.POSITIVE_INFINITY&&a!=Number.NEGATIVE_INFINITY},KL:function(a,b){var c=a%b;0>c&&
(c+=b);return c},en:function(a,b){return a%b},Cd:function(a,b){var c;c=this.en(a-b,2*Math.PI);0>c&&(c+=2*Math.PI);return c+b},As:function(a){return 57.29577951308232*a},Z:function(a){return 0.017453292519943295*a},RN:function(a,b){var c=a-b,c=this.en(a,360);0>c&&(c+=360);return c+b},ZL:function(a,b,c){a=Math.max(a,b);return a=Math.min(a,c)},Fw:function(a,b,c,d){for(var e=0,h=0;h<b.length-2;h+=2)e+=mb.zy(b[h],b[h+1],b[h+2],c,k,a,d+e);kb.a.g.M(b[b.length-1],a[d+e]);e++;return e},zy:function(a,b,c,d,
e,h,n){for(var p=0,r=j,v,E,G=0,ea=0;ea<d;ea++)r=h[n+G],v=(1-p)*(1-p)*a.x+2*(1-p)*p*b.x+p*p*c.x,E=(1-p)*(1-p)*a.y+2*(1-p)*p*b.y+p*p*c.y,r.x=v,r.y=E,G++,p+=1/d;e&&(kb.a.g.M(c,h[n+G]),G++);return G},mb:function(a,b,c){return a+(b-a)*c},KH:function(a,b){b.x=Math.cos(a);b.y=Math.sin(a);b.Normalize()},UP:function(a){return new lb(Math.cos(a),Math.sin(a))}};kb.a=kb.a||{};kb.a.e=mb;
var nb=Box2D,ob=q,t={},pb=nb.Common.Math.b2Vec2,qb=nb.Collision.b2AABB,rb=nb.Dynamics.b2BodyDef,sb=nb.Dynamics.b2Body,tb=nb.Dynamics.b2FixtureDef,ub=nb.Dynamics.b2World,vb=nb.Collision.Shapes.b2MassData,wb=nb.Collision.Shapes.b2PolygonShape,xb=nb.Collision.Shapes.b2CircleShape,yb=nb.Dynamics.b2DebugDraw,zb=nb.Dynamics.Joints.b2MouseJointDef,Ab=nb.Dynamics.Joints.b2DistanceJointDef,Bb=nb.Dynamics.Joints.b2RevoluteJointDef,Cb=nb.Collision.b2WorldManifold;t.UI=1;t.Ka=1/30;t.Pc=new pb;var Db=5*t.Ka;
t.QI=function(){var a=new ub(new pb(0,10),g);a.SetContinuousPhysics(g);return a};t.uR=function(a,b,c){b?(b=new yb,b.MP(c.getContext("2d")),b.IP(a.SP),b.JP(0.3),b.LP(1),b.KP(yb.nQ|yb.mQ),a.SetDebugDraw(b)):b||(a.SetDebugDraw(j),c.getContext("2d").clearRect(0,0,2500,900))};t.$O=function(a,b){var c=Math.min(b,0.04);a.Step(1.2*c,16,20);a.ClearForces()};
t.fQ=function(a,b,c,d,e){var h;h=new rb;h.type=e===g?sb.b2_staticBody:sb.b2_dynamicBody;e=[];for(var n=0;n<d.length;n++){var p=new pb;p.Set(d[n].x,d[n].y);e[n]=p}f.shape=new wb;f.shape.SetAsArray(e,e.length);h.position.x=b;h.position.y=c;return a.CreateBody(h).CreateFixture(f)};t.dQ=function(a,b,c,d,e){d=d==j?20:d;var h=new tb;h.density=1;h.friction=0.5;h.restitution=0.2;var n=new rb;n.type=e==g?sb.b2_staticBody:sb.b2_dynamicBody;h.shape=new xb(d);n.position.x=b;n.position.y=c;return a.CreateBody(n).CreateFixture(h)};
t.M=function(a,b){b.x=a.x;b.y=a.y};t.cc=function(a,b){t.Pc.x=a.x+b.x;t.Pc.y=a.y+b.y;return t.Pc};t.Md=function(a,b,c){c.x=a.x+b.x;c.y=a.y+b.y};t.Aa=function(a,b){t.Pc.x=a.x-b.x;t.Pc.y=a.y-b.y;return t.Pc};t.Nd=function(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y};t.bx=function(a,b){this.Ab=a;this.Ae=b};t.xp=function(a,b,c){var d=a.Length();t.M(a,c);d>b&&c.Multiply(b/d)};t.Zw=function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)};t.Mf=function(a){return Math.atan2(a.y,a.x)};
t.$w=function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)};t.qb=function(a,b,c){c.x=a*Math.cos(b);c.y=a*Math.sin(b)};t.nc=function(a,b,c,d){var e=t.Aa(b,a);e.LengthSquared()<c*c?(d.x=b.x,d.y=b.y):(this.qb(c,this.Mf(e),e),e=t.cc(a,e),d.x=e.x,d.y=e.y)};t.dc=function(a,b,c,d){d.x=a.x+c*(b.x-a.x);d.y=a.y+c*(b.y-a.y)};t.ZP=function(a,b){return new pb((a.x+b.x)/2,(a.y+b.y)/2)};t.Ia=function(a,b){return t.Aa(a,b).Length()};t.$k=function(a,b){return a.x*b.x+a.y*b.y};
t.Nf=function(a,b){return 0.01>Math.abs(a.x-b.x)&&0.01>Math.abs(a.y-b.y)};t.YP=function(a,b){return a.x===b.x&&a.y===b.y};t.rotate=function(a,b,c){var d=Math.cos(b);b=Math.sin(b);var e=a.x;c.x=a.x*d-a.y*b;c.y=a.y*d+e*b};t.fR=function(a,b,c){a=nb.Common.Math.b2Math.SubtractVV(a,b);this.rotate(a,c,a);a.Add(b);return a};t.Vj=function(a){var b=-a.x;a.x=a.y;a.y=b;return a};t.jB=function(a){var b=a.x;a.x=-a.y;a.y=b;return a};t.yy=function(a,b){var c=t.Aa(b,a);return Math.atan2(c.y,c.x)};
t.lb=function(a,b,c){c.x=(a.x+b.x)/2;c.y=(a.y+b.y)/2};t.XP=function(a,b,c){var d=nb.Common.Math.b2Math.SubtractVV(c,b),e=nb.Common.Math.b2Math.SubtractVV(a,b),e=this.$k(e,d);return 0>=e?this.Ia(a,b):this.$k(d,d)<=e?this.Ia(a,c):this.MH(a,b,c)};t.MH=function(a,b,c){var d=c.x-b.x,e=c.y-b.y;return Math.abs((a.x-b.x)*e-d*(a.y-c.y))/Math.sin(d*d+e*e)};t.pO=function(a,b,c,d){return this.PP(new this.bx(a,b),new this.bx(c,d))};
t.pO=function(a,b){var c=(b.Ae.y-b.Ab.y)*(a.Ae.x-a.Ab.x)-(b.Ae.x-b.Ab.x)*(a.Ae.y-a.Ab.y);if(0===c)return k;var d=(b.Ae.x-b.Ab.x)*(a.Ab.y-b.Ab.y)-(b.Ae.y-b.Ab.y)*(a.Ab.x-b.Ab.x),e=(a.Ae.x-a.Ab.x)*(a.Ab.y-b.Ab.y)-(a.Ae.y-a.Ab.y)*(a.Ab.x-b.Ab.x);return 1>=d/c&&0<=d/c&&1>=e/c&&0<=e/c?g:k};t.pN=function(a){var b=new vb;a.GetMassData(b);b.RQ=0.659745;a.SetMassData(b)};t.er=function(a,b,c,d){var e=t.Aa(a,b),h=e.Length();h<c?t.M(a,d):(e.Multiply(c/h),e.Add(b),t.M(e,d))};
t.xj=function(a,b){var c=a.GetLinearVelocity(),d=c.Length();d>b&&(c.Multiply(b/d),a.SetLinearVelocity(c))};t.ba=function(a,b,c){this.nc(a.GetPosition(),b,c,t.Pc);a.SetTransform(new nb.Common.Math.b2Transform(t.Pc,nb.Common.Math.b2Mat22.FromAngle(a.GetAngle())))};t.iN=function(a){for(var b=Fb.Jf,c=a.GetFixtureList();c;c=c.GetNext())c.SetDensity(b);a.ResetMassData()};t.eP=function(a){for(a=a.GetJointList();a;a=a.next)a.joint.GetBodyA().SetAwake(g),a.joint.GetBodyB().SetAwake(g)};
t.Vw=function(a){var b=a.GetWorld().GetGravity().GetNegative();b.Multiply(a.GetMass());a.ApplyForce(b,a.GetWorldCenter())};t.cs=function(a,b){var c=a.GetFixtureList().GetFilterData();c.groupIndex=b;this.bs(a,c)};t.bs=function(a,b){for(var c=a.GetFixtureList();c;c=c.GetNext())c.SetFilterData(b)};t.zI=function(a,b){t.Ap(a,new pb(-b.x/2,0),new pb(1.5*b.x,0),new pb(0,Db));t.Ap(a,new pb(0,1.5*b.y),new pb(0,-b.y/2),new pb(-Db,0));t.Ap(a,new pb(b.x,1.5*b.y),new pb(b.x,-b.y/2),new pb(Db,0))};
t.Ap=function(a,b,c,d){var e=new wb,h=new tb;h.shape=e;for(var n=0;2>n;n++)e.SetAsEdge(b,c),a.CreateFixture(h),b.Add(d),c.Add(d)};t.Td=function(a,b,c,d){var e=new Bb;e.Initialize(a,b,c);e.collideConnected=k;d&&(e.lowerAngle=0,e.upperAngle=0,e.enableLimit=g);return a.GetWorld().CreateJoint(e)};t.DI=function(a,b){var c=Gb.DD,d=new zb;d.bodyA=a.GetWorld().GetGroundBody();d.bodyB=a;d.target.Set(b.x,b.y);d.collideConnected=g;d.maxForce=c;d.tQ=100;d.bodyB.SetAwake(g);return a.GetWorld().CreateJoint(d)};
t.Cp=function(a,b,c,d){var e=new Ab;e.Initialize(a,b,a.GetWorldCenter(),b.GetWorldCenter());e.collideConnected=k;e.frequencyHz=c;e.dampingRatio=d;return a.GetWorld().CreateJoint(e)};t.wI=function(a,b,c,d){var e=new Ab;e.Initialize(a,b,c,d);e.collideConnected=k;e.frequencyHz=4.5;e.dampingRatio=1;return a.GetWorld().CreateJoint(e)};
t.eQ=function(a){var b=new Bb;b.bodyA=a.GetBodyA();b.bodyB=a.GetBodyB();b.localAnchorA=b.bodyA.GetLocalPoint(a.GetAnchorA());b.localAnchorB=b.bodyB.GetLocalPoint(a.GetAnchorB());return b};t.ci=function(a,b){for(var c=a.GetFixtureList();c;c=c.GetNext())c.SetSensor(b)};t.GQ=function(a,b){var c=this.$k(a,b),d=b.LengthSquared();if(0===d)return new pb(0,0);c/=d;return new pb(c*b.x,c*b.y)};t.Ve=function(a,b){return this.$k(a,b)/b.Length()};t.Ty=function(a){var b=new Cb;a.GetWorldManifold(b);return b.m_points[0]};
t.vz=function(a){for(a=a.GetContactList();a;){if(a.contact.IsTouching()&&!a.contact.GetFixtureA().IsSensor()&&!a.contact.GetFixtureB().IsSensor())return g;a=a.next}return k};t.$K=function(a,b){for(var c=a.GetContactList();c;){if(c.contact.IsTouching()&&c.other===b)return g;c=c.next}return k};t.isSensor=function(a){return a.GetFixtureA().IsSensor()||a.GetFixtureB().IsSensor()};t.Bp=function(a,b,c,d,e){b=new xb(b);return this.mp(a,b,c,0,g,d,e)};
t.uI=function(a,b,c,d){var e=new wb;e.SetAsArray(c,c.length);return this.mp(a,e,b,0,k,d,g)};t.tI=function(a,b,c){var d=Hb.uG,e=Hb.Yg,h=Hb.tG,n=new wb;n.SetAsBox(d/2,e/2);return this.mp(a,n,b,c,k,h,k)};t.Kw=function(a,b,c){var d=new tb;d.shape=a;d.density=c;d.restitution=0;d.friction=this.UI;return b.CreateFixture(d)};t.mp=function(a,b,c,d,e,h,n){var p=new rb;p.type=n?sb.b2_dynamicBody:sb.b2_staticBody;p.position=c;p.angle=d;a=a.CreateBody(p);this.Kw(b,a,h).SetSensor(e);return a};
t.cR=function(a,b,c){var d=[];a.RayCast(function(a){d.push(a)},b,c);return d};t.bR=function(a,b){var c=[],d=this.sH(b);a.QueryAABB(function(a){c.push(a)},d);return c};t.sH=function(a){return this.Ix(a,this.Ka,this.Ka)};t.Ix=function(a,b,c){var d=new qb;d.lowerBound=nb.Common.Math.b2Math.SubtractVV(a,new pb(b/2,c/2));d.upperBound=nb.Common.Math.b2Math.AddVV(a,new pb(b/2,c/2));return d};t.UQ=function(a,b,c,d){this.lA(a,b,a.GetAngle(),c,d)};
t.lA=function(a,b,c,d,e){var h=1-d;b=nb.Common.Math.b2Math.SubtractVV(b,a.GetPosition());c-=a.GetAngle();var n=new pb(b.x,b.y);n.Multiply(h/e);b.Multiply(d);a.SetLinearVelocity(n);a.SetAngularVelocity(c*(h/e));a.SetPositionAndAngle(nb.Common.Math.b2Math.AddVV(a.GetPosition(),b),a.GetAngle()+c*d)};t.WQ=function(a,b,c){b=nb.Common.Math.b2Math.SubtractVV(b,a.GetPosition());b.Multiply(1/c);a.SetLinearVelocity(b)};t.$P=function(a){return"["+a.x+", "+a.y+"]"};
t.Wh=function(a,b,c){var d=[];a=ob.a.g.Qj(a,b,6.67);if(0<a.length)for(var e=0;e<a.length;e++)b=a[e].GetBody().GetUserData(),b instanceof c&&d.push(b);return d};t.Qj=function(a,b,c){b=this.Ix(b,2*c,2*c);return this.AM(a,b)};t.AM=function(a,b){var c=[];a.QueryAABB(function(a){var b=a.GetBody();b.GetType();b.GetUserData()&&c.push(a);return g},b);return c};t.rQ=function(a,b){for(var c=[],d=a.GetBodyList();d;d=d.next)for(var e=d.GetFixtureList();e;e=e.GetNext())e.TestPoint(b)&&c.push(e);return c};
t.vQ=function(a,b,c,d){var e=(b.y-a.y)*(c.x-d.x)-(c.y-d.y)*(b.x-a.x),h=(b.y-a.y)*(c.x-a.x)-(c.y-a.y)*(b.x-a.x);c=(c.y-a.y)*(c.x-d.x)-(c.y-d.y)*(c.x-a.x);if(0===e)return 0===h&&0===c?a:new pb(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);e=c/e;return new pb(a.x+(b.x-a.x)*e,a.y+(b.y-a.y)*e)};t.BM=function(a,b){return new pb(ob.a.e.u(a.x,b.x),ob.a.e.u(a.y,b.y))};ob.a=ob.a||{};ob.a.g=t;var Ib=q;function Jb(a,b,c,d){this.tf=a;this.Ue=b;this.He=c;this.Zg=d}var Kb=Box2D.Common.Math.b2Vec2,Lb=Ib.a.g;
Jb.prototype.toString=function(){return"rgb("+this.tf+","+this.Ue+","+this.He+")"};Jb.prototype.AC=function(){return"rgba("+this.tf+","+this.Ue+","+this.He+","+this.Zg+")"};Jb.prototype.copy=function(a){this.tf=a.tf;this.Ue=a.Ue;this.He=a.He;this.Zg=a.Zg};
var u={Sd:function(a,b,c,d){d.tf=Ib.a.e.mb(a.tf,b.tf,c)+0.5<<0;d.Ue=Ib.a.e.mb(a.Ue,b.Ue,c)+0.5<<0;d.He=Ib.a.e.mb(a.He,b.He,c)+0.5<<0;d.Zg=Ib.a.e.mb(a.Zg,b.Zg,c)},Sg:function(a){return new Kb(30*a.x,30*a.y)},pc:function(a,b){this.first=a?a:new Kb;this.D=b?b:new Kb}};u.Xc=new Kb;u.gb=function(a,b,c,d,e){u.Xc.x=d.x-c.x;u.Xc.y=d.y-c.y;Lb.Vj(u.Xc);u.Xc.Normalize();a.first.x=b.x;a.first.y=b.y;a.D.x=b.x;a.D.y=b.y;u.Xc.Multiply(0.5*e);a.first.Add(u.Xc);u.Xc.x=-u.Xc.x;u.Xc.y=-u.Xc.y;a.D.Add(u.Xc)};
u.ph=function(a,b,c){a.fillStyle=c;a.beginPath();c=b[0].first;var d,e;a.moveTo(c.x,c.y);for(var h=1;h<b.length;h+=2)d=b[h].first,e=b[h+1].first,a.quadraticCurveTo(d.x,d.y,e.x,e.y);a.lineTo(b[b.length-1].D.x,b[b.length-1].D.y);for(h=b.length-2;0<h;h-=2)d=b[h].D,e=b[h-1].D,a.quadraticCurveTo(d.x,d.y,e.x,e.y);a.lineTo(c.x,c.y);a.closePath();a.fill()};
u.jQ=function(a,b,c){a.fillStyle=c;a.beginPath();c=b[0].first;var d,e,h;a.moveTo(c.x,c.y);for(var n=0,p=1;p<b.length;p+=2)d=0.07,e=b[p],h=b[p+1],Lb.dc(e.first,e.D,d,u.fe),Lb.dc(h.first,h.D,d,u.Mh),a.quadraticCurveTo(u.fe.x,u.fe.y,u.Mh.x,u.Mh.y),n++;Lb.dc(b[b.length-1].D,b[b.length-1].first,0.1,u.fe);a.lineTo(u.fe.x,u.fe.y);n=b.length/2;for(p=b.length-2;0<p;p-=2)d=0.05,e=b[p],h=b[p-1],Lb.dc(e.D,e.first,d,u.fe),Lb.dc(h.D,h.first,d,u.Mh),a.quadraticCurveTo(u.fe.x,u.fe.y,u.Mh.x,u.Mh.y),n--;a.lineTo(c.x,
c.y);a.closePath();a.fill()};u.aI=function(a,b,c){var d=[],e=[],h=0,n=0,p=new Jb,r;d.push(b.toString());r=0;for(var v=1;v<a.length;v+=2)h=a[v-1],r=a[v+1],Lb.lb(h.first,h.D,u.U),Lb.lb(r.first,r.D,u.Hc),h=Lb.Ia(u.U,u.Hc),n+=h,e.push(h);for(v=h=0;v<e.length;v++)h+=e[v],r=h/n,u.Sd(b,c,r,p),d.push(p.toString());return d};
u.bI=function(a,b,c){var d=[],e=[],h=0,n=0,p=new Jb,r,v,E;d.push(b.toString());v=1;for(E=a.length;v<E;v+=2)h=a[v-1],r=a[v+1],Lb.lb(h.first,h.D,u.U),Lb.lb(r.first,r.D,u.Hc),h=Lb.Ia(u.U,u.Hc),n+=h,e.push(h);n/=2;v=h=0;for(E=e.length;v<E;v++)h+=e[v],a=1-Math.abs(n-h)/n,u.Sd(b,c,a,p),d.push(p.toString());return d};
u.dy=function(a,b,c){var d,e,h,n,p,r;a.save();for(var v=0,E=1;E<b.length;E+=2)d=b[E-1],e=b[E],h=b[E+1],p=c[v],r=c[v+1],1<E&&(Lb.dc(d.first,b[E-2].first,0.05,d.first),Lb.dc(d.D,b[E-2].D,0.05,d.D)),Lb.lb(d.first,d.D,u.U),Lb.lb(h.first,h.D,u.Hc),n=a.createLinearGradient(u.U.x,u.U.y,u.Hc.x,u.Hc.y),n.addColorStop(0,p),n.addColorStop(1,r),a.fillStyle=n,a.beginPath(),a.moveTo(d.first.x,d.first.y),a.quadraticCurveTo(e.first.x,e.first.y,h.first.x,h.first.y),a.lineTo(h.D.x,h.D.y),a.quadraticCurveTo(e.D.x,e.D.y,
d.D.x,d.D.y),a.lineTo(d.first.x,d.first.y),a.closePath(),a.fill(),v++;a.restore()};
u.cJ=function(a,b,c,d){var e,h;u.ph(a,b,d);a.save();for(var n=1;n<b.length-1;n+=2){e=b[n-1];h=b[n];d=b[n+1];1<n&&(Lb.dc(e.first,b[n-2].first,0.05,e.first),Lb.dc(e.D,b[n-2].D,0.05,e.D));a.beginPath();a.moveTo(e.first.x,e.first.y);a.quadraticCurveTo(h.first.x,h.first.y,d.first.x,d.first.y);a.lineTo(d.D.x,d.D.y);a.quadraticCurveTo(h.D.x,h.D.y,e.D.x,e.D.y);a.lineTo(e.first.x,e.first.y);a.closePath();a.save();c.frame=0;Lb.lb(e.first,e.D,u.U);Lb.lb(h.first,h.D,u.Hc);var p=Lb.Aa(u.Hc,u.U),r=Lb.Mf(p),p=p.Length()/
16;h=Lb.Ia(h.first,h.D);e=(Lb.Ia(e.first,e.D)+h)/64;Lb.lb(u.U,u.Hc,u.U);a.clip();c.fc(a,u.U.x,u.U.y,r,p,e);a.restore();a.save();c.frame=1;Lb.lb(d.first,d.D,u.U);p=Lb.Aa(u.U,u.Hc);r=Lb.Mf(p);p=p.Length()/16;e=(h+Lb.Ia(d.first,d.D))/64;Lb.lb(u.U,u.Hc,u.U);a.clip();c.fc(a,u.U.x,u.U.y,r,p,e);a.restore()}a.restore()};u.U=new Kb;u.Hc=new Kb;u.fe=new Kb;u.Mh=new Kb;Ib.a.Q=Jb;Ib.a.H=u;var Mb=q,Ob={Be:"Normal",si:"BlackSide",Fk:"Machine",Tk:"WhiteSide",Sk:"Valentine"};Ob.all=[Ob.Be,Ob.si,Ob.Fk,Ob.Tk,Ob.Sk];
function Pb(a,b,c,d,e){this.keys={};a&&(this.keys[Ob.Be]=a);b&&(this.keys[Ob.si]=b);c&&(this.keys[Ob.Fk]=c);d&&(this.keys[Ob.Tk]=d);e&&(this.keys[Ob.Sk]=e)}Pb.prototype.key=function(a){return this.keys[this.Wy(a)?a:Ob.Be]};Pb.prototype.Wy=function(a){return a in this.keys};Mb.a.ac=Ob;Mb.a.l=Pb;var Qb=window,Rb=JSON,Sb=q;function Tb(a){this.levels=[];this.initial=Ub.vt;this.theme=a||Sb.a.ac.Be}
function w(a,b,c){this.time=0;this.stars=Sb.Uc?0:3;this.score=0;this.levelDisplayNumber=a||0;this.levelNumber=b||0;this.state=Sb.Uc?c:Ub.qc}
function Vb(a){a=a||{};this.version=a.version||Sb.version;this.perf=a.perf||0;this.config=a.config||new Wb;this.unlockedChapters=a.unlockedChapters||(!Sb.Uc?4:0);this.openedMultiTouch=a.openedMultiTouch||k;this.lastLevelOpen=a.lastLevelOpen||!Sb.Uc;this.settings=a.settings||{mutedTracks:k,mutedEffects:k,debug:!Sb.Uc};this.worlds=a.worlds;if(!this.worlds||this.settings.debug)this.worlds=[],this.worlds[0]=new Tb,this.worlds[0].levels=[new w(1,0,Ub.qc),new w(2,1),new w(3,195),new w(4,171),new w(5,187),
new w(6,174),new w(7,178),new w(8,181),new w(9,197),new w(10,184)],this.worlds[1]=new Tb(Sb.a.ac.si),this.worlds[1].levels=[new w(1,198,Ub.qc),new w(2,175),new w(3,170),new w(4,186,Ub.vt),new w(5,185),new w(6,173),new w(7,182),new w(8,192),new w(9,193),new w(10,191)];if(this.worlds[2]&&5>this.worlds.length)this.worlds[4]=this.worlds[2],this.worlds[2]=j;else if(!this.worlds[4]||this.settings.debug)this.worlds[4]=new Tb(Sb.a.ac.Fk),this.worlds[4].levels=[new w(1,18,Ub.qc),new w(2,200),new w(3,86),new w(4,
203),new w(5,83),new w(6,75),new w(7,51),new w(8,52),new w(9,204),new w(10,55)];if(!this.worlds[2]||this.settings.debug)this.worlds[2]=new Tb(Sb.a.ac.Tk),this.worlds[2].levels=[new w(1,98,Ub.qc),new w(2,97),new w(3,96),new w(4,99),new w(5,100),new w(6,102),new w(7,105),new w(8,112),new w(9,113),new w(10,116)];if(!this.worlds[3]||this.settings.debug)this.worlds[3]=new Tb(Sb.a.ac.Sk),this.worlds[3].levels=[new w(1,126,Ub.qc),new w(2,127),new w(3,129),new w(4,131),new w(5,136),new w(6,138),new w(7,143),
new w(8,137),new w(9,144),new w(10,142)]}var Xb=[0,10,20,30,40,0],Ub={vt:"Locked",qc:"Unlocked",pP:"Complete"};function Wb(){this.touch=this.version=this.browser=this.os=f}m=Vb.prototype;m.nJ=function(){return new w(0,169,Ub.qc)};m.dC=function(a){return Xb[a]};m.Xn=function(){for(var a,b,c=0,d=0;d<this.worlds.length;d++){a=this.worlds[d];for(var e=0;e<a.levels.length;e++)b=a.levels[e],c+=b.stars}return c};
m.RJ=function(a){a=this.worlds[a];for(var b=0,c=0;c<a.levels.length;c++)b+=a.levels[c].stars;return b};m.xk=function(){for(var a,b,c=0,d=0;d<this.worlds.length;d++){a=this.worlds[d];for(var e=0;e<a.levels.length;e++)b=a.levels[e],c+=b.score}return c};m.QJ=function(a){a=this.worlds[a];for(var b=0,c=0;c<a.levels.length;c++)b+=a.levels[c].score;return b};m.kn=function(){return 50<=this.Xn()};Sb.a.Tg=Ub;
Sb.a.va=function(){var a=Qb.localStorage.contrejour||new Vb;a instanceof Vb||(a=new Vb(Rb.parse(a)));return a};Sb.a.Ee=function(a){a&&(a=Rb.stringify(a),Qb.localStorage.contrejour=a)};Sb.a.vD=function(){Qb.localStorage.contrejour=j};var Yb=window,Zb=q;function $b(){this.Vi=this.Wi=this.Nc=j;this.lm=0;this.isIPAD="iPad"===BrowserDetect.OS;this.Sm=0}m=$b.prototype;m.aa=function(a,b){this.Vi||(Zb.a.J[a].volume=1<b?b/100:b,Zb.a.J[a].play())};
m.Mr=function(a){if(this.Nc!==Zb.a.J[a]){if(this.Nc!=f){this.Nc.pause();var b=this.Nc;Yb.setTimeout(function(){b.currentTime=0},1500)}this.Nc=Zb.a.J[a];this.Wi?this.Sm=Date.now():Zb.a.J[a].play()}};
m.tg=function(a){if(a){for(var b=0;b<Zb.a.Ec.length;b++)Zb.a.Ec[b].isTrack===g&&(Zb.a.Ec[b].muted=g,this.VK&&Zb.a.Ec[b].pause());this.lm=Date.now()}else{for(b=0;b<Zb.a.Ec.length;b++)Zb.a.Ec[b].muted=k;0!==this.lm&&!this.VK&&(0!==this.Sm?(b=Date.now()-this.Sm,this.Nc.currentTime=b%(1E3*this.Nc.duration)/1E3):0===this.Nc.currentTime&&(b=Date.now()-this.lm,this.Nc.currentTime+=b%(1E3*this.Nc.duration)/1E3));this.lm=this.Sm=0;this.Nc.play()}this.MO(a)};
m.Ij=function(a){if(a)for(var b=0;b<Zb.a.Ec.length;b++)Zb.a.Ec[b].isTrack===k&&(Zb.a.Ec[b].muted=g);else for(b=0;b<Zb.a.Ec.length;b++)Zb.a.Ec[b].isTrack===k&&(Zb.a.Ec[b].muted=k);this.LO(a)};m.gg=function(){this.Wi===j&&(this.Wi=this.eK());return this.Wi};m.Ch=function(){this.Vi===j&&(this.Vi=this.dK());return this.Vi};m.MO=function(a){var b=Zb.a.va();this.Wi=b.settings.mutedTracks=a;Zb.a.Ee(b)};m.LO=function(a){var b=Zb.a.va();this.Vi=b.settings.mutedEffects=a;Zb.a.Ee(b)};m.eK=function(){return Zb.a.va().settings.mutedTracks};
m.dK=function(){return Zb.a.va().settings.mutedEffects};Zb.a.A=new $b;
var ac=window,bc=PxLoader,x=q,cc=[],y={LF:"McMainMenuLogo-hd",MF:"McMainMenuLogoBlue-hd",Zu:"McEyeMonster-hd",$u:"McEyeBallMonster-hd",NF:"McMenuGroundPhone-hd",OF:"McMenuGroundPhoneBlue-hd",Cv:"McChapterIELocked-hd",Mo:"McPlanetLocked-hd",Dv:"McPlanetLockedBlue-hd",Jk:"McChapterLockedBlur-hd",Pt:"McChapterIELockedBlur-hd",Jt:"McSmokeBlack-hd",Gv:"McPlanetTablo-hd",Hv:"McPlanetTabloBlue-hd",Ho:"McEnergyIcon-hd",Tu:"McLockIcon-hd",Uu:"McLockIconBlue-hd",wF:"McChapter1Name-hd",Bo:"McBackground4Content-hd",
av:"McPlanet1Background-hd",fv:"McPlanet1Foreground-hd",Kt:"McChapter1Blur-hd",Yu:"McMenuCircleSpikes-hd",Ev:"McPlanetRoseLight-hd",Ov:"McRoseForeground-hd",bv:"McPlanetEye-hd",cv:"McPlanet1EyeBall-hd",dv:"McPlanetEyeBlink-hd",ev:"McPlanetEyeBlinkOneTime-hd",Fv:"McFlowerHead-hd",zv:"McFlowerHeadBlue-hd",xF:"McChapter2Name-hd",Ik:"McBackgroundContent1_5Blue-hd",gv:"McPlanet2Background-hd",Lt:"McChapter2Blur-hd",Kk:"McPlanetSpringView-hd",No:"McPlanetSpringBack-hd",Wv:"McSatellite-hd",yF:"McChapter3Name-hd",
Mt:"McMenuBackground3-hd",hv:"McPlanetIEBackground-hd",jv:"McPlanetIEForeground-hd",Nt:"McChapterIEBlur-hd",iv:"McPlanetIEBackgroundLight-hd",lv:"McPlanetIEGear1-hd",mv:"McPlanetIEGear2-hd",nv:"McPlanetIEGear3-hd",ov:"McPlanetIEGear4-hd",kv:"McPlanetIEForegroundParticle-hd",pv:"McPlanetIEParticle-hd",Ku:"McIELockedSign-hd",qv:"McPlanet4Background-hd",QF:"McPlanet4Shadow-hd",RF:"McPlanet4Spring0-hd",SF:"McPlanet4Spring1-hd",zF:"McChapter4Name-hd",Co:"McChapter4MenuBackground-hd",Do:"McChapter4Blur-hd",
rv:"McPlanet4Locked-hd",Yt:new x.a.l("McEggView0-hd",j,j,j,"McEggView0_7-hd"),Zt:new x.a.l("McEggView1-hd",j,j,j,"McEggView1_7-hd"),$t:new x.a.l("McEggView2-hd",j,j,j,"McEggView2_7-hd"),au:new x.a.l("McEggView3-hd",j,j,j,"McEggView3_7-hd"),Go:new x.a.l("McEggBridgeView-hd",j,j,j,"McEggBridgeView_7-hd"),Iv:"McPlanetVBackground-hd",Jv:"McPlanetVBackground1-hd",Kv:"McPlanetVBackground2-hd",Fo:"McChapterVBlur-hd",Lv:"McPlanetVLocked-hd",AF:"McChapter5Name-hd",Eo:"McChapter5MenuBackground-hd",Tv:"McRotatorBase-hd",
Gt:"McBaloonGrassAll-hd",Ht:"McBaloonLegs-hd",It:"McBaloonTailEnd-hd",BF:"McChapterDevName-hd",uv:"McPlanetDevBackground-hd",vv:"McPlanetDevForeground-hd",Ot:"McChapterDevBlur-hd",yv:"McPlanetDevSign-hd",tv:"McPlanetDevBackRays-hd",wv:"McPlanetDevLowerRightRays-hd",Av:"McPlanetDevUpperLeftRays-hd",Bv:"McPlanetDevUpperRightRays-hd",xv:"McPlanetDevParticles-hd",sv:"McPlanetDevBackLight-hd",Rt:"McEyeMonsterBlack-hd",St:"McEyeBallMonsterBlack-hd",Tt:"McEyeBlinkMonsterBlack-hd",Ut:"McEyeBlinkOneTimeMonsterBlack-hd",
Mu:"McInspired-hd",Nu:"McIntroLogo-hd",Eu:"McFinalRose-hd",dw:"McStebloAnimation-hd",Sv:"McRoseHeadLight-hd",Pv:"McRoseHeadBack-hd",Rv:"McRoseHeadFront-hd",Qv:"McRoseHeadDown-hd",Xu:"McLystokMain-hd",Vu:"McLystok1-hd",Wu:"McLystok2-hd",Mv:"McPuddle-hd",VE:"McArrowView-hd",Ct:"McBackSnotEye-hd",Bt:"McBackSnotBase-hd",Dt:"McBackSnotEyeBall-hd",Et:"McBackSnotEyeBlink-hd",Ft:"McBackSnotEyeBlinkOneTime-hd",Xt:new x.a.l("McDust-hd",j,j,"McDustWhite-hd"),Ug:"McEnergyBall-hd",du:new x.a.l("McEye-hd","McEyeBlack-hd",
j,"McEyeBlack-hd"),eu:new x.a.l("McEyeAngry-hd","McEyeAngryBlack-hd",j,"McEyeAngryBlack-hd"),fu:new x.a.l("McEyeBall-hd","McEyeBallBlack-hd",j,"McEyeBallWhite-hd"),gu:new x.a.l("McEyeBallHit-hd","McEyeBallHitBlack-hd",j,"McEyeBallHitWhite-hd"),hu:new x.a.l("McEyeBallMonster-hd","McEyeBallMonsterBlack-hd",j,"McEyeBallMonsterWhite-hd"),iu:new x.a.l("McEyeBlink-hd","McEyeBlinkBlack-hd",j,"McEyeBlinkBlack-hd"),ju:new x.a.l("McEyeBlinkOneTime-hd","McEyeBlinkOneTimeBlack-hd",j,"McEyeBlinkOneTimeBlack-hd"),
Io:new x.a.l("McEyeBlinkMonster-hd","McEyeBlinkMonsterBlack-hd",j,"McEyeBlinkOneTimeBlack-hd"),Jo:new x.a.l("McEyeBlinkOneTimeMonster-hd","McEyeBlinkOneTimeMonsterBlack-hd",j,"McEyeBlinkOneTimeMonsterBlack-hd"),vu:new x.a.l("McEyeWink-hd","McEyeWinkBlack-hd",j,"McEyeWinkBlack-hd"),ku:"McEyeBlue-hd",mu:new x.a.l("McEyeCloseMonster-hd","McEyeCloseMonsterBlack-hd",j,"McEyeCloseMonsterBlack-hd"),lu:new x.a.l("McEyeClose-hd","McEyeCloseBlack-hd",j,"McEyeCloseBlack-hd"),nu:new x.a.l("McEyeCloseSlow-hd",
"McEyeCloseSlowBlack-hd",j,"McEyeCloseSlowBlack-hd"),ou:new x.a.l("McEyeDead-hd","McEyeDeadBlack-hd",j,"McEyeDeadBlack-hd"),pu:new x.a.l("McEyeMonster-hd","McEyeMonsterBlack-hd",j,"McEyeMonsterBlack-hd"),qu:"McEyeMonsterRed-hd",ru:new x.a.l("McEyeOpen-hd","McEyeOpenBlack-hd",j,"McEyeOpenBlack-hd"),su:new x.a.l("McEyeOpenMonster-hd","McEyeOpenMonsterBlack-hd",j,"McEyeOpenMonsterBlack-hd"),tu:new x.a.l("McEyeSleep-hd","McEyeSleepBlack-hd",j,"McEyeSleepBlack-hd"),uu:new x.a.l("McEyeSmile-hd","McEyeSmileBlack-hd",
j,"McEyeSmileBlack-hd"),wu:new x.a.l("McFakeHeroBackground-hd","McFakeHeroBackgroundBlack-hd",j,"McFakeHeroBackgroundWhite-hd"),xu:new x.a.l("McFakeHeroEye-hd","McFakeHeroEyeBlack-hd",j,"McFakeHeroEyeBlack-hd"),yu:new x.a.l("McFakeHeroEyeBall-hd","McFakeHeroEyeBallBlack-hd",j,"McFakeHeroEyeBallWhite-hd"),zu:new x.a.l("McFakeHeroEyeBlink-hd","McFakeHeroEyeBlinkBlack-hd",j,"McFakeHeroEyeBlinkBlack-hd"),EF:"McFakeHeroEyeOpen-hd",Au:new x.a.l("McFakeHeroEyeSmile-hd","McFakeHeroEyeSmileBlack-hd",j,"McFakeHeroEyeSmileBlack-hd"),
Bu:new x.a.l("McFakeHeroHotspot-hd","McFakeHeroHotspotBlack-hd",j,"McFakeHeroHotspotWhite-hd"),Cu:new x.a.l("McFakeHeroShadow-hd","McFakeHeroShadowBlack-hd",j,"McFakeHeroShadowWhite-hd"),Lu:"McImprovedResult-hd",Du:new x.a.l("McFallParticle-hd",j,j,j,"McParticle_7-hd"),$v:"McSnowParticle-hd",vi:"McFinishPart-hd",Fu:"McFly-hd",Ko:new x.a.l("McGroundPart-hd","McGroundPartBlack-hd",j,"McGroundPartWhite-hd","McGroundPart_7-hd"),Lo:new x.a.l("McHeroBackView-hd","McHeroBlackView-hd",j,"McHeroWhiteView-hd"),
Hu:new x.a.l("McHeroShadow-hd",j,j,"McHeroShadowWhite-hd"),Iu:"McHeroHighliteMenu-hd",Ju:"McHotspotwhite-hd",$F:new x.a.l("McSimpleSpikesView-hd","McSimpleSpikesViewBlack-hd",j,"McSimpleSpikesViewWhite-hd"),Yv:new x.a.l("McSnotEnd-hd","McSnotEndBlack-hd",j,"McSnotEndWhite-hd"),Zv:new x.a.l("McSnotEndHighlite-hd",j,j,j,"McSnotEndHighlite_7-hd"),Oo:new x.a.l("McSnotStart-hd","McSnotStartBlack-hd",j,"McSnotStartWhite-hd"),fw:new x.a.l("McStrongSnotEnd-hd","McStrongSnotEndBlack-hd",j,"McStrongSnotEndWhite-hd",
"McStrongSnotEnd_7-hd"),gw:new x.a.l("strongSnotTexture-hd","blackStrongSnotTexture-hd",j,"whiteStrongSnotTexture-hd","strongSnotTexture_7-hd"),oG:"strongSnotTextureRed-hd",jw:"McTeleportPartBlack-hd",kw:"McTeleportPartBlue-hd",iw:"McTeleportPart-hd",lw:new x.a.l("McTotalGrass-hd",j,j,"McWhiteGrass-hd","McGrass_7-hd"),mw:new x.a.l("McTrampolineEnd-hd","McTrampolineEndBlack-hd",j,"McTrampolineEndWhite-hd"),nw:new x.a.l("McTrampolinePath-hd","McTrampolinePathBlack-hd"),Lk:new x.a.l("McWhiteSmoke-hd",
"McWhiteSmokeBlack-hd"),Wt:"McDragViewLimitWhite-hd",Ou:new x.a.l("McKaktusView0-hd","McKaktusView0Black-hd"),Pu:"McKaktusView1-hd",Qu:new x.a.l("McKaktusView2-hd","McKaktusView2Black-hd"),Ru:new x.a.l("McKaktusView3-hd","McKaktusView3Black-hd"),Su:"McKaktusView4-hd",GF:new x.a.l("McLightView0-hd"),HF:new x.a.l("McLightView1-hd"),KF:new x.a.l("McLightView7-hd"),IF:new x.a.l("McLightView11-hd"),JF:new x.a.l("McLightView12-hd"),PF:new x.a.l("McMultitouch2HintView-hd"),TF:new x.a.l("McPortal2HintView-hd"),
UF:new x.a.l("McPortalHintView-hd"),Nv:new x.a.l("McRelsHintView-hd",j,j,"McRelsHintView_7-hd"),VF:new x.a.l("McRoseView-hd"),WF:new x.a.l("McShadowView0-hd"),aG:new x.a.l("McSlingshotHintView-hd"),bG:new x.a.l("McSnotHintView-hd"),cG:new x.a.l("McSnotReleaseHintView-hd"),cw:new x.a.l("McSpringView-hd","McSpringViewBlack-hd",j,"McSpringViewWhite-hd","McSpringView_7-hd"),bw:new x.a.l("McSpringShadow-hd",j,j,"McSpringShadowWhite-hd","McSpringShadow_7-hd"),dG:new x.a.l("McStoneLongBlackView-hd"),eG:new x.a.l("McStoneLongView-hd"),
nG:new x.a.l("McStripesHintView-hd"),UE:new x.a.l("McAmieHintView-hd"),sF:new x.a.l("McBackgroundStoneView1-hd","McBackgroundStoneView1Black-hd"),tF:new x.a.l("McBackgroundStoneView2-hd","McBackgroundStoneView2Black-hd"),Vt:new x.a.l("McDragSquareView-hd",j,j,"McDragViewWhite-hd","McDragView_7-hd"),Vv:new x.a.l("McRoundDragSquareView-hd",j,j,"McRoundDragViewWhite-hd","McRoundDragView_7-hd"),Uv:new x.a.l("McRoundDragFrameView-hd",j,j,j,"McRoundDragFrameView_7-hd"),CF:new x.a.l("McEndLevelView-hd"),
DF:new x.a.l("McEnergyView-hd"),FF:new x.a.l("McGroundHintView-hd"),Gu:new x.a.l("McGroundHintMouseView-hd"),aw:new x.a.l("McSpikesView-hd",j,j,"McSpikesViewWhite-hd"),Xv:new x.a.l("McSimpleSpikesViewBlack-hd","McSimpleSpikesView-hd",j,"McSimpleSpikesViewWhite-hd"),Qt:new x.a.l("McCircleSpikesViewBlack-hd","McCircleSpikesView-hd",j,"McCircleSpikesViewWhite-hd","McCircleSpikesView_7-hd"),ew:"McStoneView3Black-hd",fG:new x.a.l("McStoneView1-hd"),gG:new x.a.l("McStoneView2-hd"),hG:new x.a.l("McStoneView3-hd"),
iG:new x.a.l("McStoneView4-hd"),jG:new x.a.l("McStoneView5-hd"),kG:new x.a.l("McStoneView6-hd"),lG:new x.a.l("McStoneView7-hd"),mG:new x.a.l("McStoneView8-hd"),WE:"McBackground3_0Content-hd.jpg",XE:"McBackground3_0Foreground-hd.png",YE:"McBackground3_1Content-hd.jpg",ZE:"McBackground3_1Foreground-hd.png",$E:"McBackground3_2Content-hd.jpg",aF:"McBackground3_2Foreground-hd.png",bF:"McBackground3_4Content-hd.jpg",cF:"McBackground3_4Foreground-hd.png",dF:"McBackground5Content-hd.jpg",eF:"McBackgroundContent1_5-hd.jpg",
fF:"McBackgroundContent2_1-hd.jpg",gF:"McBackgroundContent2_2-hd.jpg",hF:"McBackgroundContent2_3-hd.jpg",iF:"McBackgroundContent2_4-hd.jpg",jF:"McBackgroundContent2_6-hd.jpg",kF:"McBackgroundContent4_3-hd.png",lF:"McBackgroundContent4_4-hd.png",mF:"McBackgroundContent4_7-hd.png",nF:"McBackgroundContent7_1-hd.jpg",oF:"McBackgroundContent7_2-hd.jpg",pF:"McBackgroundContent7_3-hd.jpg",qF:"McBackgroundContent7_4-hd.jpg",rF:"McBackgroundCrabContent-hd.jpg",uF:"McBlackGround0-hd.png",vF:"McBlackGround1-hd.png",
XF:"McShesternaBackground-hd.png",YF:"McShesternaBackgroundBlur-hd.png",ZF:"McShesternaOut-hd.png",bu:"McEndRose-hd",cu:"McEndRoseBlack-hd",hw:"McTear-hd"},z={Tc:{yx:"chapter1",zx:"chapter2",Ax:"chapter3",Bx:"chapter4",Cx:"chapter5",lf:"menu"}};z.Tw=[z.Tc.yx,z.Tc.zx,z.Tc.Ax,z.Tc.Bx,z.Tc.Cx];
z.n={Uw:"angry2",ex:"backgroundEyeHit0",ip:"begin5",lx:"bonus5",mx:"bonus6",nx:"bonus7",ux:"breathIn4",click:"click",Dx:"clip0",Ex:"clip1",Sx:"deathByFall2",Tx:"deathByFlowerOut10",Ux:"deathByFlowerOut4",Vx:"deathBySpikes5",end:"end",Uq:"landing1",yz:"landing3",Zq:"laugh0",Bz:"laugh1",Cz:"laugh3",pm:"leapOn1",Jz:"leapOn2",Kz:"leapOn3",rr:"newClip",sr:"newClip1",Fr:"perdelkaOut0",MA:"perdelkaOutEmpty1",NA:"petitkoIsHoping",OA:"petitkoIsTrying",eB:"rope2",fB:"rope3",gB:"rope5",mB:"saddness",SB:"sleeping0",
qC:"suspicious0",rC:"suspicious1",sC:"suspicious3",ok:"teleport",vC:"teleport2"};z.YH=[z.n.lx,z.n.mx,z.n.nx];z.Lz=[z.n.Jz,z.n.Kz,z.n.sr];z.Iz=[z.n.pm,z.n.rr];z.XM=[z.n.eB,z.n.fB,z.n.gB];z.NH=[z.n.rr,z.n.sr];z.dL=[z.n.Zq,z.n.Bz,z.n.Cz];z.lO=[z.n.qC,z.n.rC,z.n.sC];z.SN=[z.n.SB];z.random=function(a){if(a&&a instanceof Array)return a[Math.round(x.a.e.u(0,a.length-1))]};
function dc(a){this.Fa=new bc({appVersion:x.version});this.aq=[];this.images={};this.cr=this.vd=0;this.gf=a===g;this.Eq="img/";this.ez=".png";this.FR="elements/";this.GR=".xml"}m=dc.prototype;
m.jz=function(a,b){this.Fa&&(a?(this.R(z.Tc.yx,"sound/tracks/"+b+"/chapter1."+b,g),this.R(z.Tc.zx,"sound/tracks/"+b+"/chapter2."+b,g),this.R(z.Tc.Ax,"sound/tracks/"+b+"/chapter3."+b,g),this.R(z.Tc.Bx,"sound/tracks/"+b+"/chapter4."+b,g),this.R(z.Tc.Cx,"sound/tracks/"+b+"/chapter5."+b,g),this.R(z.Tc.lf,"sound/tracks/"+b+"/menu."+b,g)):(this.R(z.n.Uw,"sound/effects/"+b+"/angry2."+b),this.R(z.n.ex,"sound/effects/"+b+"/backgroundEyeHit0."+b),this.R(z.n.ip,"sound/effects/"+b+"/begin5."+b),this.R(z.n.lx,
"sound/effects/"+b+"/bonus5."+b),this.R(z.n.mx,"sound/effects/"+b+"/bonus6."+b),this.R(z.n.nx,"sound/effects/"+b+"/bonus7."+b),this.R(z.n.ux,"sound/effects/"+b+"/breathIn4."+b),this.R(z.n.click,"sound/effects/"+b+"/click."+b),this.R(z.n.Dx,"sound/effects/"+b+"/clip0."+b),this.R(z.n.Ex,"sound/effects/"+b+"/clip1."+b),this.R(z.n.Sx,"sound/effects/"+b+"/deathByFall2."+b),this.R(z.n.Tx,"sound/effects/"+b+"/deathByFlowerOut10."+b),this.R(z.n.Ux,"sound/effects/"+b+"/deathByFlowerOut4."+b),this.R(z.n.Vx,
"sound/effects/"+b+"/deathBySpikes5."+b),this.R(z.n.end,"sound/effects/"+b+"/end."+b),this.R(z.n.Uq,"sound/effects/"+b+"/landing1."+b),this.R(z.n.yz,"sound/effects/"+b+"/landing3."+b),this.R(z.n.Zq,"sound/effects/"+b+"/laugh0."+b),this.R(z.n.Bz,"sound/effects/"+b+"/laugh1."+b),this.R(z.n.Cz,"sound/effects/"+b+"/laugh3."+b),this.R(z.n.pm,"sound/effects/"+b+"/leapOn1."+b),this.R(z.n.Jz,"sound/effects/"+b+"/leapOn2."+b),this.R(z.n.Kz,"sound/effects/"+b+"/leapOn3."+b),this.R(z.n.rr,"sound/effects/"+b+
"/newClip."+b),this.R(z.n.sr,"sound/effects/"+b+"/newClip1."+b),this.R(z.n.Fr,"sound/effects/"+b+"/perdelkaOut0."+b),this.R(z.n.MA,"sound/effects/"+b+"/perdelkaOutEmpty1."+b),this.R(z.n.NA,"sound/effects/"+b+"/petitkoIsHoping."+b),this.R(z.n.OA,"sound/effects/"+b+"/petitkoIsTrying."+b),this.R(z.n.eB,"sound/effects/"+b+"/rope2."+b),this.R(z.n.fB,"sound/effects/"+b+"/rope3."+b),this.R(z.n.gB,"sound/effects/"+b+"/rope5."+b),this.R(z.n.mB,"sound/effects/"+b+"/saddness."+b),this.R(z.n.SB,"sound/effects/"+
b+"/sleeping0."+b),this.R(z.n.qC,"sound/effects/"+b+"/suspicious0."+b),this.R(z.n.rC,"sound/effects/"+b+"/suspicious1."+b),this.R(z.n.sC,"sound/effects/"+b+"/suspicious3."+b),this.R(z.n.ok,"sound/effects/"+b+"/teleport."+b),this.R(z.n.vC,"sound/effects/"+b+"/teleport."+b)))};
m.QK=function(){this.Fa&&(this.c(y.LF),this.c(y.MF),this.c(y.Zu),this.c(y.$u),this.c(y.NF),this.c(y.OF),this.c(y.Mo),this.c(y.Dv),this.c(y.Cv),this.c(y.Gv),this.c(y.Hv),this.c(y.Ho),this.c(y.Tu),this.c(y.Uu),this.c(y.Jk),this.c(y.Pt),this.c(y.Jt),this.c(y.wF),this.c(y.Bo),this.c(y.av),this.c(y.fv),this.c(y.Kt),this.c(y.Yu),this.c(y.Ev),this.c(y.Ov),this.c(y.bv),this.c(y.cv),this.c(y.dv),this.c(y.ev),this.c(y.Fv),this.c(y.zv),this.c(y.xF),this.c(y.Ik),this.c(y.gv),this.c(y.Lt),this.c(y.Kk),this.c(y.No),
this.c(y.Wv),this.c(y.yF),this.c(y.Mt),this.c(y.hv),this.c(y.jv),this.c(y.iv),this.c(y.lv),this.c(y.mv),this.c(y.nv),this.c(y.ov),this.c(y.kv),this.c(y.pv),this.c(y.Ku),this.c(y.Nt),this.c(y.BF),this.c(y.uv),this.c(y.vv),this.c(y.Ot),this.c(y.yv),this.c(y.tv),this.c(y.wv),this.c(y.Av),this.c(y.Bv),this.c(y.sv),this.c(y.xv),this.c(y.St),this.c(y.Rt),this.c(y.Tt),this.c(y.Ut),this.c(y.Mu),this.c(y.Nu),this.c(y.Eu),this.c(y.dw),this.c(y.Sv),this.c(y.Pv),this.c(y.Rv),this.c(y.Qv),this.c(y.Xu),this.c(y.Vu),
this.c(y.Wu),this.c(y.Mv),this.c(y.VE),this.c(y.Ct),this.c(y.Bt),this.c(y.Dt),this.c(y.Et),this.c(y.Ft),this.c(y.Xt),this.c(y.Ug),this.c(y.du),this.c(y.eu),this.c(y.fu),this.c(y.gu),this.c(y.hu),this.c(y.iu),this.c(y.ju),this.c(y.Io),this.c(y.Jo),this.c(y.vu),this.c(y.ku),this.c(y.mu),this.c(y.lu),this.c(y.nu),this.c(y.ou),this.c(y.pu),this.c(y.qu),this.c(y.ru),this.c(y.su),this.c(y.tu),this.c(y.uu),this.c(y.wu),this.c(y.xu),this.c(y.yu),this.c(y.zu),this.c(y.EF),this.c(y.Au),this.c(y.Bu),this.c(y.Cu),
this.c(y.Lu),this.c(y.Du),this.c(y.$v),this.c(y.vi),this.c(y.Fu),this.c(y.Ko),this.c(y.Lo),this.c(y.Hu),this.c(y.Iu),this.c(y.Ju),this.c(y.$F),this.c(y.Yv),this.c(y.Zv),this.c(y.Oo),this.c(y.bw),this.c(y.fw),this.c(y.gw),this.c(y.oG),this.c(y.jw),this.c(y.kw),this.c(y.iw),this.c(y.lw),this.c(y.nw),this.c(y.mw),this.c(y.Lk),this.c(y.Wt),this.pa(y.WE),this.pa(y.XE),this.pa(y.YE),this.pa(y.ZE),this.pa(y.$E),this.pa(y.aF),this.pa(y.bF),this.pa(y.cF),this.pa(y.dF),this.pa(y.eF),this.pa(y.fF),this.pa(y.gF),
this.pa(y.hF),this.pa(y.iF),this.pa(y.jF),this.pa(y.rF),this.pa(y.uF),this.pa(y.vF),this.pa(y.XF),this.pa(y.YF),this.pa(y.ZF),this.c(y.sF),this.c(y.tF),this.c(y.Qt),this.c(y.Vt),this.c(y.CF),this.c(y.DF),this.c(y.FF),this.c(y.Gu),this.c(y.Ou),this.c(y.Pu),this.c(y.Qu),this.c(y.Ru),this.c(y.Su),this.c(y.GF),this.c(y.KF),this.c(y.PF),this.c(y.TF),this.c(y.UF),this.c(y.Nv),this.c(y.VF),this.c(y.WF),this.c(y.Xv),this.c(y.aG),this.c(y.bG),this.c(y.cG),this.c(y.aw),this.c(y.cw),this.c(y.dG),this.c(y.eG),
this.c(y.ew),this.c(y.fG),this.c(y.gG),this.c(y.hG),this.c(y.iG),this.c(y.jG),this.c(y.kG),this.c(y.lG),this.c(y.mG),this.c(y.nG),this.c(y.bu),this.c(y.cu),this.c(y.hw),this.pa(y.kF),this.pa(y.lF),this.pa(y.mF),this.c(y.Co),this.c(y.HF),this.c(y.IF),this.c(y.JF),this.c(y.Yt),this.c(y.Zt),this.c(y.$t),this.c(y.au),this.c(y.Go),this.c(y.Vv),this.c(y.Uv),this.c(y.zF),this.c(y.Do),this.c(y.rv),this.c(y.qv),this.c(y.QF),this.c(y.RF),this.c(y.SF),this.pa(y.nF),this.pa(y.oF),this.pa(y.pF),this.pa(y.qF),
this.c(y.Tv),this.c(y.Gt),this.c(y.Ht),this.c(y.It),this.c(y.UE),this.c(y.AF),this.c(y.Eo),this.c(y.Fo),this.c(y.Lv),this.c(y.Iv),this.c(y.Jv),this.c(y.Kv),this.c("McSkipIcon-hd"),this.c("McTotalLine-hd"),this.c("McRightPanelBackground-hd"),this.c("McRestartIcon-hd"),this.c("McPauseIcon-hd"),this.c("McMenuIcon-hd"),this.c("McButtonBackgroundBig-hd_blue"),this.c("McButtonBackground-hd_blue"),this.c("McRightPanelBackground-hd_blue"),this.c("McPauseIcon-hd_blue"),this.c("McPlayIcon-hd_blue"),this.c("McRestartIcon-hd_blue"),
this.c("McSkipIcon-hd_blue"),this.c("McSoundIcon-hd_blue"),this.c("McMusicIcon-hd"),this.c("McMusicIcon-hd_blue"),this.c("McMenuIcon-hd_blue"),this.c("McBackIcon-hd_blue"),this.c("McLevelComplete-hd_blue"),this.c("McLevelComplete-hd"),this.c("McLevels0-hd"),this.c("McLevels1-hd"),this.c("McLevels2-hd"),this.c("McLevels3-hd"),this.c("McLevels4-hd"),this.c("McLevels5-hd"),this.c("McLevels6-hd"),this.c("McLevels7-hd"),this.c("McLevels8-hd"),this.c("McLevels9-hd"),this.c("McLevels0-hd_blue"),this.c("McLevels1-hd_blue"),
this.c("McLevels2-hd_blue"),this.c("McLevels3-hd_blue"),this.c("McLevels4-hd_blue"),this.c("McLevels5-hd_blue"),this.c("McLevels6-hd_blue"),this.c("McLevels7-hd_blue"),this.c("McLevels8-hd_blue"),this.c("McLevels9-hd_blue"),this.c("McButtonBackgroundBig-hd"),this.c("McPlayIcon-hd"),this.c("McLevelItemBackground-hd"),this.c("McLevelItemBackground-hd_blue"),this.c("McLevelEnergy-hd"),this.c("McBackIcon-hd"),this.c("McButtonBackground-hd"),this.c("McDisabledIcon-hd"),this.c("McSoundIcon-hd"),this.c("McLevelItemInactive-hd"),
this.c("McLevelItemInactive-hd_blue"),this.c("McRoseButton-hd"),this.c("McVenzel-hd"),this.c("McEnergyBig-hd"),this.c("McEnergyBigInactive-hd"),this.c("shareBlack"),this.c("shareBlue"),this.c("sharePurple"),this.c("shareHover"),this.c("meetPetit"),this.c("McBackIcon-hd_purple"),this.c("McMenuIcon-hd_purple"),this.c("McMusicIcon-hd_purple"),this.c("McPauseIcon-hd_purple"),this.c("McPlayIcon-hd_purple"),this.c("McRestartIcon-hd_purple"),this.c("McSkipIcon-hd_purple"),this.c("McSoundIcon-hd_purple"),
this.c("McTotalLine-hd_purple"))};m.Ow=function(a){if(this.Fa){var b,c;if(a instanceof x.a.l)for(var d=0;d<x.a.ac.all.length;d++)b=x.a.ac.all[d],a.Wy(b)&&(b=a.key(b),c=this.Eq+b+this.ez,this.images[b]=this.Fa.addImage(c,["game-image"],f),this.vd+=1)}};m.c=function(a){if(this.Fa)if(a instanceof x.a.l)this.Ow(a);else{var b=this.Eq+a+this.ez;this.gf&&ac.console&&ac.console.log("["+(this.vd+1)+"] Game Image: "+a+" url: "+b);this.images[a]=this.Fa.addImage(b,["game-image"],f);this.vd+=1}};
m.pa=function(a){if(this.Fa)if(a instanceof x.a.l)this.Ow(a);else{var b=this.Eq+a;this.gf&&ac.console&&ac.console.log("["+(this.vd+1)+"] Game Image: "+a+" url: "+b);this.images[a]=this.Fa.addImage(b,["game-image"],f);this.vd+=1}};m.R=function(a,b,c){if(this.Fa){var d=new Audio;z[a]=d;cc.push(d);d.isTrack=c||k;d.isTrack&&(d.loop="loop");d.Pz=k;d.preload="auto";d.src=b;d.load();this.vd+=1}};
m.lL=function(){this.Fa&&this.Fa.start(["game-image","game-sound"]);if("iPad"!==BrowserDetect.OS){var a=g,b=k,c=ac.setInterval(function(){a=g;for(var d=cc.length-1;0<=d;d--)cc[d].Pz||(4===cc[d].readyState?cc[d].Pz=g:a=k);a&&(ac.clearInterval(c),b=g)},300);ac.setTimeout(function(){b||ac.clearInterval(c)},45E3)}};m.Ey=function(a,b){if(this.images){var c=a.key?a.key(b):a;return{name:c,img:this.images[c]}}};m.wH=function(){var a=ec;this.Fa&&this.Fa.addCompletionListener(a,["game-image"])};
m.xH=function(){var a=fc;this.Fa&&this.Fa.addProgressListener(a,["game-image"])};m.YA=function(a,b,c){return-1===this.aq.indexOf(b)?(this.gf&&ac.console&&ac.console.log("["+(this.cr+1)+"] Level Image: "+b+" url: "+c),this.images[b]=a.addImage(c,["level-image"],f),this.aq.push(b),this.cr+=1,g):k};x.a.tc=new dc(k);x.a.i=y;x.a.J=z;x.a.Ec=cc;var gc=q;function hc(){this.initial=f;this.position=new ic(0,0);this.scale=new ic(1,1);this.rotation=0}var ic=Box2D.Common.Math.b2Vec2;m=hc.prototype;
m.s=function(a,b){this.position.x=a;this.position.y=b};m.sN=function(a){this.position.x=a.x;this.position.y=a.y};m.wB=function(a,b){this.position.x+=a;this.position.y+=b};m.p=function(a,b){this.scale.x=a;this.scale.y=b};m.wN=function(a,b){this.scale.x+=a;this.scale.y+=b};m.Ua=ba("rotation");m.vN=function(a){this.rotation+=a};m.ds=function(a){this.initial||(this.initial=new hc,this.initial.s(a.position.x,a.position.y),this.initial.p(a.scale.x,a.scale.y),this.initial.Ua(a.rotation))};
m.copy=function(a){gc.a.g.M(a.position,this.position);gc.a.g.M(a.scale,this.scale);this.rotation=a.rotation};gc.a.Ga=hc;var jc=q;function kc(){this.elements=[];this.uf=[];this.Lf=[];this.Oe=this.sort=f;this.mq=k}m=kc.prototype;m.add=function(a){this.Lf.push(a)};m.remove=function(a){a=this.elements.indexOf(a);-1!==a&&this.uf.push(a)};m.Sr=function(a){0<=a&&a<this.elements.length&&this.uf.push(a)};m.ZI=ba("Oe");m.UN=ba("sort");
m.update=function(){var a=k;if(0<this.uf.length){a=g;this.uf.sort(function(a,b){return b-a});for(var b=0;b<this.uf.length;b++){var c=this.uf[b];this.Oe&&this.Oe(this.elements[c]);this.elements.splice(c,1)}this.uf=[]}0<this.Lf.length&&(a=g,this.elements=this.elements.concat(this.Lf),this.Lf=[]);if(a&&this.sort||this.mq)this.elements.sort(this.sort),this.mq=k};
m.clear=function(){this.elements=this.elements.concat(this.Lf);if(this.Oe)for(var a=0;a<this.elements.length;a++)this.Oe(this.elements[a]);this.elements=[];this.uf=[];this.Lf=[]};jc.a.dt=kc;var lc=window,mc=Class,nc=q;function oc(a,b,c,d,e,h){var n=b.transform.position.Copy(),p=b.transform.scale.x,r=new pc;nc.a.$a(a,h,function(a,c){nc.a.g.dc(n,d,1-c/a,r);b.s(r.x,r.y);var h=nc.a.e.mb(p,e,1-c/a);b.p(h,h)},c)}
var pc=Box2D.Common.Math.b2Vec2,qc={NONE:0,sP:1,Wo:2,o:4,ea:7},rc=mc.extend({init:function(a,b,c,d){this.context=a;this.jh=b;this.ke=c;this.name=d?d:"noname-"+Math.floor(100*Math.random()+1)},update:l(g)}),sc=rc.extend({init:function(a,b,c,d){d||(d="noname-delay-"+Math.floor(100*Math.random()+1));this._super(a,b,c,d)},update:function(a){this.ke-=a.B;return 0>=this.ke?(this.jh(),g):k}}),tc=rc.extend({init:function(a,b,c,d,e){e||(e="noname-step-"+Math.floor(100*Math.random()+1));this._super(a,b,d,e);
this.step=c;this.duration=d},update:function(a){this.ke-=a.B;0>this.ke&&(this.ke=0);this.step&&this.step(this.duration,this.ke);return 0>=this.ke?(this.jh&&this.jh(),g):k}}),uc=mc.extend({init:function(a){this.gf=a;this.Nb=new nc.a.dt},add:function(a){if(!(a instanceof rc))throw"Scheduler could not add Action.";this.gf&&lc.console&&lc.console.log(a.name+" has been added");this.Nb.add(a)},clear:function(a,b){if(0==(qc.ea&a))throw"Can not clear Actions from unknown context: "+a;this.Nb.update();for(var c=
0;c<this.Nb.elements.length;c++)if((b?this.Nb.elements[c].context==a:1)&&0!=(this.Nb.elements[c].context&a))this.gf&&lc.console&&lc.console.log("Cleared action: ["+this.Nb.elements[c].name+"]"),this.Nb.Sr(c)},update:function(a,b){this.Nb.update();b||(b=qc.ea);for(var c=0;c<this.Nb.elements.length;c++)try{0!=(this.Nb.elements[c].context&b)&&this.Nb.elements[c].update(a)&&(this.gf&&lc.console&&lc.console.log("Completed action: ["+this.Nb.elements[c].name+"]"),this.Nb.Sr(c))}catch(d){this.gf&&lc.console&&
lc.console.log("Error occurred during action: ["+this.Nb.elements[c].name+"] Error: ["+d+"]"),this.Nb.Sr(c)}}});nc.a=nc.a||{};nc.a.j=qc;nc.a.w=function(a,b,c,d){nc.a.ai.add(new sc(a,b,c,d))};nc.a.$a=function(a,b,c,d,e){nc.a.ai.add(new tc(a,b,c,d,e))};nc.a.hb=function(a,b,c,d,e){var h=b.alpha;nc.a.$a(a,e,function(a,c){b.alpha=nc.a.e.mb(h,d,1-c/a)},c)};nc.a.WL=function(a){var b=a.transform.scale.x;nc.a.$a(A.a.j.o,f,function(c,d){var e=nc.a.e.mb(b,0.7,1-d/c);a.p(e,e)},0.25)};
nc.a.YQ=function(a,b,c,d,e){var h=b.transform.position.Copy(),n=new pc;nc.a.$a(a,e,function(a,c){nc.a.g.dc(h,d,1-c/a,n);b.s(n.x,n.y)},c)};nc.a.VL=function(a){var b=a.transform.rotation,c=b;nc.a.$a(A.a.j.o,f,function(d,e){c=nc.a.e.mb(b,0,1-e/d);a.Ua(c)},0.25)};nc.a.XL=oc;
nc.a.pA=function(a,b,c,d,e,h){function n(){oc(a,b,r,v,G,function(){p++;p<e-1?((ea=p===e-2)?(v.x=v.y=0,G=1):(v.x=nc.a.e.u(-d,d),v.y=nc.a.e.u(-d,d),G=1+0.2*(p/e),G+=0!==p%2?0.05:-0.05),v.Add(E),n()):h()})}var p=0,r=c/e,v=new pc(nc.a.e.u(-d,d),nc.a.e.u(-d,d)),E=b.Ea().Copy();v.Add(E);var G=1+0.2*(p/e),G=G+(0!==p%2?0.05:-0.05),ea=k;n()};nc.a.ai=new uc;var vc=q;
function wc(a,b,c,d){this.fontFamily=d||"Tekton";this.bold=this.Lb=k;this.text=a;this.transform=new vc.a.Ga;this.fontSize=b;this.lineHeight=c;this.alpha=1;this.vR=0;this.Rr=k;this.rm=[];this.Hd=new xc;this.anchor=new xc;this.color="rgb(45, 45, 45)";this.shadowColor="rgba(45,45,45,.8)";this.Sw="center";this.visible=g;this.qy=1;this.shadowOffsetX=0;this.shadowOffsetY=5;this.shadowBlur=8;a=[14,20,28,40];c=1.5;for(var e=0;e<a.length;e++)if(d=a[e],d>b){c*=b/d;break}this.transform.p(c,c)}var xc=Box2D.Common.Math.b2Vec2;
m=wc.prototype;
m.h=function(a){this.Rr||(this.GM(),this.Rr=g);a.save();a.font=this.bold?"bold "+this.fontSize+"pt "+this.fontFamily:this.fontSize+"pt "+this.fontFamily;a.globalAlpha*=this.alpha;a.textAlign=this.Sw;for(var b=0,c=0;c<this.rm.length;c++)if(this.visible){var d=0==c?this.qy:1;a.save();a.fillStyle=this.color;this.Lb&&(a.shadowColor=this.shadowColor,a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY,a.shadowBlur=this.shadowBlur);a.translate(this.transform.position.x,this.transform.position.y+b);
a.rotate(this.transform.rotation);a.scale(this.transform.scale.x*d,this.transform.scale.y*d);a.fillText(this.rm[c],0,0);b+=this.lineHeight;a.restore()}a.restore()};m.CB=function(a){this.text=a;this.Rr=k};m.bi=ba("Sw");m.GM=function(){this.rm.length=0;this.rm=this.text.split("\\n")};m.s=function(a,b){this.transform.s(a,b)};m.p=function(a,b){this.transform.p(a,b)};m.Ua=function(a){this.transform.rotation=a};vc.a.$b=wc;
var yc=Class,zc=q,Ac=Box2D.Common.Math.b2Vec2,Bc=Box2D.Dynamics.b2Body,Cc=yc.extend({name:"unknown",init:function(a,b,c,d){this.d=a;this.ka=k;this.transform=new zc.a.Ga;this.body=b;this.config=d;this.ja=30;this.Bk=0;this.visible=g;this.ln=d?zc.a.e.Z(d.rotationOffset):0;this.ln||(this.ln=0);this.body instanceof Bc||(this.body=j);c&&(this.transform=c,this.transform.ds(c));this.Qr=new Ac},update:function(){this.body&&(this.OO(),this.Ms())},OO:function(){var a=this.body.GetPosition();this.transform.position.x=
a.x*this.ja;this.transform.position.y=a.y*this.ja},Ms:function(){this.transform.rotation=-this.body.GetAngle()+this.ln},h:aa(),bf:l(k),fm:l(k),sp:l(k),il:l(k),fa:ba("visible"),xa:function(){this.ka=g},ib:aa(),Qa:function(){this.ka=k},dd:aa(),Km:aa(),Jm:aa(),aR:aa(),ae:l(k),Ea:function(){return this.transform.position},yQ:function(){return this.transform.position.x},zQ:function(){return this.transform.position.y},Xh:function(){this.body&&(zc.a.g.M(this.transform.position,this.Qr),this.Qr.Multiply(1/
this.ja),this.body.SetPosition(this.Qr))},s:function(a,b){this.transform.s(a,b);this.Xh()},kc:function(a){this.transform.s(a.x,a.y);this.Xh()},Pw:function(a,b){this.transform.wB(a,b);this.Xh()},AH:function(a){this.transform.wB(a.x,a.y);this.Xh()},BQ:function(){return this.transform.scale.Copy()},CQ:function(){return this.transform.scale.x},DQ:function(){return this.transform.scale.y},p:function(a,b){this.transform.p(a,b)},dk:function(a,b){var c=this,d=this.transform.scale.x;zc.a.$a(zc.a.j.o,j,function(b,
h){var n=zc.a.e.mb(d,a,1-h/b);c.p(n,n)},b)},Qw:function(a,b){this.transform.wN(a,b)},AQ:function(){return this.transform.rotation},Ua:function(a){this.transform.Ua(a)},BH:function(a){this.transform.vN(a)},ua:ba("Bk"),Dc:l(-1),hg:l(k),oj:function(){return this.d.Ra()&&this.config.blackViewType?this.config.blackViewType:this.config.iPhoneViewType||this.config.viewType},uq:function(){var a=this.oj();return zc.a.i[a]||a+"-hd"},el:function(){return this.transform.position},Oe:aa(),kQ:0,CR:0}),Dc=Cc.extend({init:function(a,
b,c,d){this._super(a,b,c,d)},yg:function(){return this.transform.position},Dh:l(k)}),Ec=yc.extend({init:function(a,b){this.Uh=a;this.value=b}}),Fc=yc.extend({init:function(a){this.touch=a;this.Is=new Ac},yg:function(){this.Is.x=this.touch.x;this.Is.y=this.touch.y;return this.Is},Dh:l(g)}),Gc=Cc.extend({init:function(a,b,c){this._super(a,b,c);this.gd=j},XA:aa(),WA:aa()});zc.b.bb=Cc;zc.b.Nk=Dc;zc.b.Ok=Ec;zc.b.kH=Fc;zc.b.CG=Gc;
zc.a.Wa={DP:-2,QG:11,uP:12,ED:1,RD:6,hD:-9,rG:-2,LD:11,BD:2,OG:4,ND:9,dH:9,FP:2,gP:-1,gH:11,vo:10,iE:-1,bE:-1,Ys:-2,dD:-9,cD:-10,hE:-3};var Hc=q;function Ic(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d}function Jc(){this.frames=this.height=this.width=0;this.DR=k;this.Pn=new Kc;this.anchor=new Kc;this.OQ=k;this.nq=[]}var Kc=Box2D.Common.Math.b2Vec2;
Jc.prototype.PK=function(){for(var a=j,b=0;b<this.Pn.y;b++)for(var c=0;c<this.Pn.x;c++)a=new Ic(c*this.width,b*this.height,this.width,this.height),this.nq.push(a)};Jc.prototype.UM=function(){this.nq.reverse()};
Hc.a.wD={SJ:function(a){"-hd"!==a.substr(-3).toLowerCase()&&(a+="-hd");var b=Hc.a.iJ[a];return(a=b?b:Hc.a.Up.TJ(a))?(b=new Jc,b.width=parseFloat(a.width),b.height=parseFloat(a.height),b.frames=parseFloat(a.frames),b.Pn.x=parseFloat(a.tileData.x),b.Pn.y=parseFloat(a.tileData.y),b.anchor.x=parseFloat(a.anchor.x),b.anchor.y=parseFloat(a.anchor.y),b.PK(),b):j}};var Lc=Box2D,B=q;
function Mc(a,b,c,d,e,h,n){this.Qe=a;this.qQ=b;this.Oa=e;this.xz=h;this.jg=c;this.rL=d;this.NK=Lc.Common.Math.b2Math.SubtractVV(this.Da().GetPosition(),this.Qe.GetPosition()).Length();this.TQ=n}function Nc(){this.body=f;this.Rc=new Oc}
var Oc=Lc.Common.Math.b2Vec2,Pc=Lc.Dynamics.b2Body,Qc=B.b.Nk.extend({init:function(a,b,c,d){this._super(c,b.Qe,d,a);this.G=b;this.d=c;this.ka=k;this.lk=30;this.Vf=8;this.bj=12;this.Dd=new Oc;this.Tb=new Oc;this.O=[];this.ur=this.ur?this.ur:2*(this.G.Oa.length-1)+1;for(a=0;a<this.ur;a++)this.O.push(new B.a.H.pc(new Oc,new Oc));this.Nj=new Oc;this.rd=new Oc;this.pf=new Oc;this.rA=new Oc;this.Tb=new Oc},update:function(){this.od()},od:function(){var a=this.G.Oa[0].GetPosition();this.Dd=this.G.Qe.GetPosition().Copy();
this.Dd.Multiply(this.ja);B.a.g.M(a,this.rd);this.rd.Multiply(this.ja);B.a.H.gb(this.O[0],this.Dd,this.Dd,this.rd,this.lk);this.Nj.x=this.Dd.x;this.Nj.y=this.Dd.y;a=this.G.Da().GetPosition();this.Tb.x=a.x;this.Tb.y=a.y;this.Tb.Multiply(this.ja);for(var b=1,c=0;c<this.G.Oa.length-1;c++){var a=this.G.Oa[c].GetPosition(),d=this.G.Oa[c+1].GetPosition();this.rd.x=a.x;this.rd.y=a.y;this.rd.Multiply(this.ja);this.pf.x=d.x;this.pf.y=d.y;this.pf.Multiply(this.ja);B.a.H.gb(this.O[b++],this.rd,this.Nj,this.pf,
this.Vf);this.Nj.x=this.pf.x;this.Nj.y=this.pf.y;c<this.G.Oa.length-2&&(B.a.g.lb(this.rd,this.pf,this.rA),B.a.H.gb(this.O[b++],this.rA,this.rd,this.pf,this.Vf))}B.a.H.gb(this.O[this.O.length-1],this.Tb,this.rd,this.Tb,this.bj)},Dc:l(1),hg:l(g)}),Sc=Qc.extend({name:"SnotBodyClip",init:function(a,b,c,d){this._super(a,b,c,d);this.Nx();this.ua(B.a.Wa.OG);this.Oc=this.Bc=j;this.zq=k;this.G.Da().SetUserData(this);this.d.Xk(new B.b.Ok(this,1));this.k=new Rc(this,c,B.a.i.Oo);this.qh=new B.a.I(B.a.i.Yv);this.Zj(Sc.lt);
a=this.d.Ra();b=this.d.tb();a||b?(this.od(),a?(this.mc=new B.a.Q(0,72,101,1),this.Zc=new B.a.Q(0,255,255,1)):(this.mc=new B.a.Q(160,160,160,1),this.Zc=new B.a.Q(204,204,204,1)),this.Oi=B.a.H.aI(this.O,this.mc,this.Zc),this.mc=this.mc.toString(),this.Zc=this.Zc.toString(),this.Zn=-1,a&&(this.bl=new B.b.po(this.d,this.G.Da(),new B.a.Q(0,81,83,1)),this.bl.width=15)):this.Zc=this.mc="black";this.be=new B.a.Yb;this.cn=new B.a.Yb;this.Cc=new Oc;this.Bl=new Oc},Nx:function(){this.d.Ra()||(this.Vp=new B.a.I(B.a.i.Zv),
this.Dq=new B.b.nd(0.05,0.1))},update:function(a){this.zq&&(this.bn(),this.zq=k);if(this.ka)for(var b=0;b<this.G.Oa.length;b++)this.G.Ie(b).SetAwake(g);if(this.Bc==j&&(0<this.Zn&&0.015>this.d.totalTime-this.Zn||this.ka))this.ka?(b=this.UJ(),this.LC(b,a.B/3)):(b=this.Cy(this.G.Da().GetPosition()),b.body!=j&&this.LC(b,a.B/3)),this.Bc!=j&&(this.Zn=0);this.k.update(a);this.d.Ra()&&this.bl.update(a);this._super(a);this.Dq&&(this.Dq.update(a.B),this.Vp.alpha=0.4+0.6*this.Dq.value)},LC:function(a,b){B.a.g.lA(this.G.Da(),
a.Rc,this.G.Da().GetAngle(),0.5,b);a.body!=j&&(this.aL(a.body,a.Rc),this.Qa(j))},AA:function(){this.zq=g},UJ:function(){B.a.g.er(this.Cc,this.G.Qe.GetPosition(),this.maxLength(),this.Bl);B.a.g.er(this.Bl,this.G.Da().GetPosition(),Sc.PG,this.Bl);return this.Cy(this.Bl)},Cy:function(a){var b=new Nc,c=B.a.g.Qj(this.d.b2World,a,this.wz());if(0<c.length){for(var d,e=k,h=0;h<c.length;h++)if((d=c[h].GetBody().GetUserData())&&d.bf()&&d.Af&&1.5>B.a.g.Ia(a,d.body.GetPosition())){b.body=d.body;B.a.g.M(d.body.GetPosition(),
b.Rc);e=g;break}e||B.a.g.M(a,b.Rc)}else B.a.g.M(a,b.Rc);return b},wz:function(){return Sc.pE},maxLength:function(){return this.G.NK*this.$x()},$x:function(){return Sc.ro},h:function(a){if(this.d.io){var b=a.C;b.save();this.bl&&this.bl.h(a);this.Vp&&this.Vp.fc(b,this.Tb.x,this.Tb.y,0,1,1);this.Oi?B.a.H.dy(b,this.O,this.Oi):B.a.H.ph(b,this.O,this.mc);this.qh.fc(b,this.Tb.x,this.Tb.y,0,1,1);this.k.h(a);b.restore()}},Dc:l(1),yg:ca("Tb"),xa:function(a){return!this.Bc?(this._super(a),this.ka=g,this.Cc.x=
a.x/30,this.Cc.y=a.y/30,this.Zj(Sc.CD),this.G.Da().SetType(Pc.b2_staticBody),B.a.A.aa(B.a.J.n.pm,50),g):k},ib:function(a){this.Cc.x=a.x/30;this.Cc.y=a.y/30},Qa:function(a){this._super(a);this.Zn=this.d.totalTime;this.ka=k;this.Zj(Sc.lt);this.G.Da().SetType(Pc.b2_dynamicBody)},aL:function(a,b){B.a.A.aa(B.a.J.random(this.GA()),50);this.Zj(Sc.vE);if(this.Oc=a.GetUserData())this.Oc.Bf++,this.Oc.ag.addListener(this,this.AA);this.G.Da().SetPositionAndAngle(a.GetPosition(),a.GetAngle());this.Bc=B.a.g.Td(this.G.Da(),
a,b,k);this.k.$c.Kj();this.be.yb()},bn:function(){this.Bc&&(B.a.A.aa(B.a.J.random(B.a.J.Lz),50),this.Oc&&(this.Oc.ag.removeListener(this,this.AA),this.Oc.Bf--,this.Oc=j),this.d.b2World.DestroyJoint(this.Bc),this.Bc=j,this.Ww(),this.cn.yb())},WK:function(){return this.Bc&&this.Bc!=j?g:k},ae:function(){return!this.Oc},Ww:function(){var a=this.G.vq();a.Subtract(this.G.Da().GetPosition());a.Multiply(Sc.AD/a.Length());this.G.Da().ApplyForce(a,this.G.Da().GetWorldCenter())},Zj:function(a){for(var b,c=0;c<
this.G.Oa.length;c++)b=this.G.Ie(c),b.SetAwake(g),b.SetLinearDamping(a)},GA:function(){return B.a.J.Iz},debug:function(a,b){if(a){this.active=[];for(var c=0;c<this.G.Oa.length;c++){var d=this.G.Ie(c),e=d.GetType();d.IsAwake();d=d.GetPosition();this.active.push({x:30*d.x,y:30*d.y,color:e==Pc.b2_staticBody?"red":"green"})}}if(b)for(c=0;c<this.active.length;c++)d=this.active[c],b.fillStyle=d.color,b.beginPath(),b.arc(d.x,d.y,0.6*this.fy,0,2*Math.PI,g),b.closePath(),b.fill()}});Sc.AD=10;Sc.lt=0.5;
Sc.CD=3;Sc.ro=2.6;Sc.vE=0;Sc.pE=0.3;Sc.PG=50*B.a.g.Ka;
var Rc=B.b.bb.extend({name:"SnotEye",init:function(a,b,c){this._super(b,a.G.Qe);this.ne=a;this.jx=k;this.ne.G.Qe.SetUserData(this);this.$c=new B.b.Po(b,this.ne.G.Qe);this.background=new B.a.I(c);var d=this;B.a.w(B.a.j.o,function(){d.blink()},B.a.e.u(1,2),"blink")},update:function(a){this._super(a);this.$c.update(a)},xa:function(){this.ne.bn();this.$c.ll();return g},ae:l(g),blink:function(){var a=this;B.a.w(B.a.j.o,function(){a.blink()},B.a.e.u(Rc.gD,Rc.fD),"blink");this.ne.Bc||(this.jx=g,this.$c.Kj(),
B.a.w(B.a.j.o,function(){a.mJ()},B.a.e.u(Rc.ID,Rc.HD),"endblink"))},mJ:function(){this.jx=k;this.ne.Bc||this.$c.ll()},h:function(a){var b=a.C;b.fillStyle=this.ne.mc;b.beginPath();b.arc(this.transform.position.x,this.transform.position.y,0.5*this.ne.lk,0,2*Math.PI,g);b.closePath();b.fill();this.background.h(a.C,this.transform);this.$c.h(a)},Dc:function(){return this.ne.WK()?1:-1},jN:function(a,b){this.$c.p(a,b)}});Rc.gD=10;Rc.fD=25;Rc.ID=2;Rc.HD=5;m=Mc.prototype;m.Ie=function(a){return this.Oa[a]};
m.cL=function(a){return this.xz[a]};m.py=function(){return this.Oa[0]};m.Da=function(){return this.Oa[this.Oa.length-1]};m.vq=function(){return this.jg.GetWorldPointCachedVector(this.rL)};B.b.SnotBodyClipBase=Qc;B.b.SnotBodyClip=Sc;B.b.ZG=Rc;B.b.YG=Mc;
var Tc=q,Vc=Box2D.Common.Math.b2Vec2,Wc=Class.extend({init:function(a,b){this.d=a;this.type=b},match:function(a){return this.type===a.config.type},ie:l(j)}),Xc=Wc.extend({init:function(a){this._super(a,"foreground")},ie:function(a){a=a.config;a.z||(a.z=12);return 1}}),Yc=Wc.extend({init:function(a){this._super(a,"plasticine")},ie:function(a){var b=[];a=a.points;for(var c=0;c<a.length;c++)b.push(new Vc(a[c].x,this.d.Rf-a[c].y));return b}}),Zc=Wc.extend({ie:l(1)});Tc.b.Bw=Wc;Tc.b.ZD=Xc;Tc.b.zG=Yc;
Tc.b.XD=Zc;
var $c=Box2D,ad=q,bd=$c.Common.Math.b2Vec2,cd=$c.Dynamics.b2BodyDef,dd=$c.Dynamics.b2Body,ed=ad.b.Bw.extend({ie:function(a){var b=new cd,c=a.config;b.type=c.dynamic?dd.b2_dynamicBody:dd.b2_staticBody;b.position=new bd(a.position.x,this.d.Rf-a.position.y);b.bullet="true"===c.bullet;b=this.d.b2World.CreateBody(b);c.angularDamping&&b.SetAngularDamping(c.angularDamping);c.fixedRotation&&b.SetFixedRotation(g);this.Mw(b,a);return b},sl:aa(),Mw:function(a,b){var c=this.sl(b);this.Lw(a,b,c)},Lw:function(a,b,
c){b=b.config;a=ad.a.g.Kw(c,a,b.density||0.3);a.friction=b.friction||1;a.restitution=b.restitution||0;a.SetSensor(b.sensor||k);c=a.GetFilterData();b.categoryBits&&(c.categoryBits=b.categoryBits);b.maskBits&&(c.maskBits=b.maskBits);b.filterGroup&&(c.groupIndex=b.filterGroup);a.SetFilterData(c);return a}}),fd=ed.extend({init:function(a){this._super(a,"circle")},sl:function(a){var b=new $c.Collision.Shapes.b2CircleShape(a.radius);b.SetLocalPosition(new bd(a.position.x,-a.position.y));b.density=0.3;return b}}),
gd=ed.extend({init:function(a){this._super(a,"polygon")},sl:function(a){var b=new $c.Collision.Shapes.b2PolygonShape,c=[];a=a.vertices;for(var d=a.length-1;0<=d;d--)c.push(new bd(a[d].x,-a[d].y));b.SetAsArray(c,c.length);b.density=0.3;return b}}),hd=ed.extend({init:function(a){this._super(a,"body");this.Th=[new fd(a),new gd(a)]},Mw:function(a,b){for(var c,d,e=0;e<b.shapes.length;e++){c=b.shapes[e];for(d=0;d<this.Th.length;d++)if(this.Th[d].match(c)){d=this.Th[d].sl(c);d=this.Lw(a,b,d);c.fixtureConfig&&
d.SetUserData(c.fixtureConfig);break}}}});ad.b.uD=fd;ad.b.AG=gd;ad.b.tD=hd;var id=q;function jd(a,b){this.body=a;this.bL=b}
var kd=Box2D.Common.Math.b2Vec2,ld=id.b.Bw.extend({init:function(a,b,c){b?this._super(a,b):this._super(a,"snot");this.Qh=c?c:1.2*ld.Qo},ie:function(a){var b=new kd(a.start.x,this.d.Rf-a.start.y);a=new kd(a.end.x,this.d.Rf-a.end.y);a=this.nj(b,a);var c=id.a.g.Qj(this.d.b2World,b,0.5);c.sort(function(a,b){var c=a.GetBody().GetUserData(),d=b.GetBody().GetUserData();return c instanceof id.b.DragableBodyClip?-1:d instanceof id.b.DragableBodyClip?1:0});if(c=c[0]){var c=c.GetBody(),d=c.GetUserData();if(d!=
j&&(d instanceof id.b.EnergyBodyClip||d instanceof id.b.PlasticinePartBodyClip))c=this.d.Ze}else c=this.d.Ze;d=id.a.g.Bp(this.d.b2World,ld.tt,b,this.Oy(),g);id.a.oa.bp(d);for(var e=id.a.g.Td(c,d,b,k),h=d,n=[],p=[],r=new jd(j,j),v=0;v<a.ia;v++)r=this.Si(h,a.Iy(v),a.Iy(v+1),v,a.ia),n.push(r.body),p.push(r.bL),h=r.body;return new id.b.YG(d,e,c,c.GetLocalPoint(b),n,p,a)},Sl:function(a,b){return a==b-1?ld.JD:ld.Jf},Oy:function(){return ld.Jf},nj:function(a,b){return id.a.Ro.nj(a,b,this.Qh,ld.SE)},linearDamping:function(){return ld.yE},
Si:function(a,b,c,d,e){d=this.Gp(b,c,this.Sl(d,e),d,e);d.SetLinearDamping(this.linearDamping());a=this.im(a,d,b,c);return new jd(d,a)},Gp:function(a,b,c){return id.a.g.Bp(this.d.b2World,ld.tt,b,c,g)},im:function(a,b){return id.a.g.Cp(a,b,5,ld.yD)}});ld.SE=3;ld.Qo=50*id.a.g.Ka;ld.Jf=0.13;ld.JD=1.7*ld.Jf;ld.yE=1;ld.yD=0.1;ld.tt=5*id.a.g.Ka;var md=ld.extend({init:function(a){this._super(a,"backSnot",100*id.a.g.Ka)},Sl:l(0.3)});id.b.Xg=ld;id.b.mD=md;
var nd=q,od=Box2D.Common.Math.b2Vec2,pd=nd.b.bb.extend({init:function(a,b,c){this._super(b,j,c,a);this.ua(nd.a.Wa.cD);this.img=new nd.a.I(a.type)},h:function(a){this.d.ic||this.img.h(a.$,this.transform)}}),qd=pd.extend({init:function(a,b,c){this._super(a,b,c);this.za=this.transform.position.Copy();this.zl=this.transform.position.Copy();b=new od;if(a=a.config.moveOffset)a=a.split(","),b.x=parseFloat(a[0]),b.y=-parseFloat(a[1]);this.zl.Add(b);if(!this.kO){var d=this;nd.a.$a(nd.a.j.o,j,function(a,b){nd.a.g.dc(d.za,
d.zl,1-b/a,d.transform.position)},60)}}}),rd=qd.extend({init:function(a,b,c){this._super(a,b,c);this.lB=nd.a.e.Z(a.config.speed/2)},update:function(a){this.transform.rotation+=30*this.lB*a.B}}),td=rd.extend({init:function(a,b,c){this._super(a,b,c);this.up=this.transform.position.Copy();this.ob=40;this.up.x+=this.ob;this.lB=nd.a.e.Z(0.2);this.Nr=new od},update:function(a){this._super(a);nd.a.g.qb(this.ob,2*this.transform.rotation,this.Nr);this.Nr.Add(this.up);nd.a.g.M(this.Nr,this.transform.position)}}),
ud=pd.extend({init:function(a,b,c){this._super(a,b,c);this.Ks=0;this.d.vc?(this.d.kj=g,this.alpha=245/255):this.img.alpha=0},update:function(a){this.d.dr=1-this.img.alpha;0<this.img.alpha&&(0>=this.Ks?(this.d.kj=g,this.Ks=5):(this.d.kj=k,this.Ks--),this.alpha-=2*a.B/60,this.img.alpha=this.alpha,0>this.img.alpha&&(this.img.alpha=0,this.d.kj=k))}}),vd=qd.extend({init:function(a,b,c){this.kO=!b.vc;this._super(a,b,c);b.vc||this.transform.s(this.zl.x,this.zl.y)}}),wd=pd.extend({});nd.b.nD=pd;
nd.b.MoveBackground=qd;nd.b.RotatableBackground=rd;nd.b.RadiusRotatableBackground=td;nd.b.FadeBackground=ud;nd.b.SunBackground=vd;nd.b.LightPowerBackground=wd;
var xd=q,yd=Box2D.Common.Math.b2Vec2,Ad=xd.b.SnotBodyClip.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.k=new zd(this,c,xd.a.i.Oo);this.lk=20;this.bj=this.Vf=10;this.qO=new xd.a.I(xd.a.i.gw);this.d.Ra()?(this.zp=new xd.a.Q(0,54,70,1),this.nl=new xd.a.Q(0,102,131,1)):this.d.tb()?(this.zp=new xd.a.Q(202,202,202,1),this.nl=new xd.a.Q(160,160,160,1)):this.d.ig()?(this.zp=new xd.a.Q(128,108,141,1),this.nl=new xd.a.Q(128,108,141,1)):(this.zp=new xd.a.Q(30,30,30,1),this.nl=new xd.a.Q(90,90,90,
1));this.qh=new xd.a.I(xd.a.i.fw);this.k.jN(0.95,0.95);this.Kh=this.Qx();this.jf=Math.max(this.Kh*Ad.GE,this.Kh+Ad.LE);this.qJ=2*this.Kh;this.Rj=this.Sn=0;this.k.yB(0)},Nx:aa(),update:function(a){this._super(a);var b=this.Qx(),c=this.eI();this.Bc&&b>this.jf&&c?(this.Rj=xd.a.e.ba(this.Rj,1,Ad.ct),this.Sn>Ad.FG||b>this.qJ?this.bn():this.Sn+=a.B):(a=0,c&&b>this.Kh&&(a=Math.min(0.65,(b-this.Kh)/this.Kh)),this.Rj=xd.a.e.ba(this.Rj,a,Ad.ct),this.Sn=0);this.k.yB(this.Rj)},h:function(a){if(this.d.io){var b=
a.C;xd.a.H.cJ(b,this.O,this.qO,this.nl.toString());b.fillStyle="black";this.k.h(a);this.qh.fc(b,this.Tb.x,this.Tb.y,0,1,1);b.restore()}},Qx:function(){return xd.a.g.Ia(this.G.py().GetPosition(),this.G.Da().GetPosition())},$x:function(){return Ad.ro},wz:function(){return Ad.wE},Ww:aa(),Zj:aa(),GA:function(){return xd.a.J.XM},eI:function(){return!this.Bc?k:!this.Oc.fm()?g:1<this.Oc.Bf||this.Oc.rz()}});Ad.GE=1.3;Ad.LE=2.33;Ad.FG=0.6;Ad.ro=1;Ad.wE=0.2;Ad.ct=20/255;Ad.yi=new yd;
var zd=xd.b.ZG.extend({init:function(a,b,c){this._super(a,b,c);this.$c=new xd.b.HG(b,this.ne.G.Qe);this.tz=k;this.sk=0;this.js=this.iA=0.075;this.fk=this.lr=0.5;this.zn=new yd;this.IB=new yd},update:function(a){this._super(a);this.tz?(this.sk+=a.B,this.sk>this.js&&(this.sk=0,this.zn.x=xd.a.e.u(-this.fk,this.fk),this.zn.y=xd.a.e.u(-this.fk,this.fk))):xd.a.g.M(Ad.yi,this.zn);xd.a.g.dc(Ad.yi,this.zn,this.sk/this.js,this.IB);this.$c.AH(this.IB)},yB:function(a){this.$c.$A.alpha=a;this.uN(0.05>=a);this.tz=
0.05<a;this.fk=this.lr+a*this.lr;this.js=this.iA-0.06*a},uN:function(a){this.$c.kb=a}});xd.b.StrongSnotBodyClip=Ad;xd.b.OP=zd;var Bd=q,Dd=Bd.b.Xg.extend({init:function(a,b,c){this._super(a,b?b:"strongSnot",c?c:2*(Bd.b.Xg.Qo/3))},im:function(a,b,c,d){return Bd.a.g.Td(a,b,d,k)},Sl:function(a,b){return Bd.b.Xg.Jf+(b-a)/b*Bd.b.Xg.Jf},Oy:l(10),linearDamping:l(0)});Bd.b.zw=Dd;
var Ed=Box2D,Fd=q,Gd=Ed.Common.Math.b2Vec2,Gb=Fd.b.SnotBodyClipBase.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.lk=15;this.Vf=6;this.bj=15;this.qR=this.fy;for(a=2;a<this.G.Oa.length-2;a++)if(b=this.G.Ie(a).GetUserData())b.parent=this;a=this.G.vq();b=this.G.Da().GetPosition();this.U=Ed.Common.Math.b2Math.AddVV(a,b);this.eO=Ed.Common.Math.b2Math.SubtractVV(a,b).Length();this.U.Multiply(0.5);this.tp=this.U.Copy();this.tp.Multiply(this.ja);this.ee=Ed.Common.Math.b2Math.SubtractVV(b,a);this.ee=
Fd.a.g.Vj(this.ee);this.ee.Multiply(1/this.ee.Length());this.sj=this.eO/Gb.zD;this.eC=this.sj*Gb.Pk;this.jf=this.sj*Gb.EE;this.fI=this.jf-this.eC;this.path=new Fd.b.De(this.d,this.Ji(),Fd.a.i.nw);this.path.ua(Fd.a.Wa.gH);for(a=this.path.alpha=0;a<Gb.pw;a++)b=this.path.Jd(),b.opacity=1-Math.abs(a-3)/(Gb.pw-3),b.s(Gb.qw*a*this.sj,0);this.Yi=new Gd;this.CC=-1;this.Pp=j;this.Qn=Gb.sw;this.es(1);this.vj=[];this.Oa=[];this.Fq=f;a=this.d.Ra();b=this.d.tb();a||b?(this.od(),a?(this.mc=new Fd.a.Q(0,72,101,
1),this.Zc=new Fd.a.Q(0,255,255,1)):(this.mc=new Fd.a.Q(160,160,160,1),this.Zc=new Fd.a.Q(204,204,204,1)),this.Oi=Fd.a.H.bI(this.O,this.mc,this.Zc),this.mc=this.mc.toString(),this.Zc=this.Zc.toString()):this.Zc=this.mc="black";this.qh=new Fd.a.I(Fd.a.i.mw);this.ay=new Fd.a.Yb;this.Xy=new Fd.a.Yb;this.Ed=new Gd;this.Qi=new Gd;this.bh=new Gd},update:function(a){this._super(a);this.Qn+=a.B;var b=0;if(this.ka)if(Fd.a.g.Nd(this.Yi,this.U,this.Ed),Fd.a.g.Ve(this.Ed,this.ee)>-Gb.Pk)this.kC(),this.d.Rl(this.CC);
else{var b=0.5,c=this.Ed.Length();c>this.jf&&(this.Ed.Multiply(this.jf/c),c=this.jf);for(var d=Fd.a.g.Mf(this.Ed),c=Gb.qw*Math.max(c-Gb.Pk,1)*this.sj,e=Math.cos(d),h=Math.sin(d),n,d=0;d<this.path.r.length;d++)n=this.path.r[d],n.s(this.tp.x-e*c*d,this.tp.y-(h*c*d-1.6*d*d));Fd.a.g.Md(this.Ed,this.U,this.Ed);Fd.a.g.nc(this.Ji().GetWorldCenter(),this.Ed,Gb.KE,this.Ed);this.Pp.SetTarget(this.Ed);for(d=0;d<this.G.Oa.length;d++){c=this.G.Ie(d);for(c=c.GetContactList();c;)e=c.other,e.GetFixtureList().IsSensor()||
(Fd.a.g.Nd(this.Ji().GetWorldCenter(),e.GetWorldCenter(),this.Qi),this.Qi.Multiply(1/this.Qi.Length()),this.Qi.Multiply(30*Gb.Aw*e.GetMass()*a.B),e.ApplyForce(this.Qi,e.GetWorldCenter())),c=c.next}}this.path.alpha=Fd.a.e.ba(this.path.alpha,b,0.05)},h:function(a){if(this.d.io){var b=a.C;b.save();this.Oi?Fd.a.H.dy(b,this.O,this.Oi):Fd.a.H.ph(b,this.O,this.mc);this.qh.fc(b,this.Dd.x,this.Dd.y,0,1,1);this.qh.fc(b,this.Tb.x,this.Tb.y,0,1,1);this.path.h(a);b.restore()}},xa:function(a){this.CC=a.id;this.ka=
g;this.Yi.x=a.x/30;this.Yi.y=a.y/30;a=this.Ji();this.Pp=Fd.a.g.DI(a,a.GetWorldCenter());this.ay.yb();this.es(20)},ib:function(a){this.Yi.x=a.x/30;this.Yi.y=a.y/30},Qa:function(){this.$q();this.kC()},dd:function(a){a.GetUserData()instanceof Fd.b.HeroBodyClip&&this.Xy.yb();this.Qn<Gb.sw&&0>this.vj.indexOf(a)&&(this.vj.push(a),Fd.a.g.M(this.Fq,this.bh),this.bh.Multiply(a.GetMass()),a.SetLinearVelocity(Gb.yi),a.ApplyImpulse(this.bh,a.GetWorldCenter()))},kC:function(){this.ka=k;this.d.b2World.DestroyJoint(this.Pp);
this.es(1)},Ji:function(){return this.G.Ie(Math.floor(this.G.Oa.length/2))},es:function(a){for(var b,c=1;c<this.G.xz.length;c++)b=this.G.cL(c),b.SetDampingRatio(a)},$q:function(){Fd.a.A.aa(Fd.a.J.n.yz,70);var a=Ed.Common.Math.b2Math.SubtractVV(this.U,this.Ji().GetWorldCenter()),b=a.Length();if(!(b<=Gb.Pk)){this.vj.length=0;this.Oa.length=0;for(var c,d,e,h=0;h<this.G.Oa.length;h++){c=this.G.Ie(h);d=c.GetContactList();e=Fd.a.g.Ia(c.GetWorldCenter(),this.U);for(this.Oa.push(c);d;)d.contact.IsTouching()&&
(c=Fd.a.g.Ia(d.other.GetWorldCenter(),this.U),c<e&&this.vj.push(d.other)),d=d.next}a.Multiply(1/b);b=(b-this.eC)/this.fI*this.sj;this.Dz(this.Oa,Gb.HE*b,a);this.Dz(this.vj,Gb.Zs*b,a);this.Fq=a;this.Fq.Multiply(Gb.Zs*b);this.Qn=0}},Dz:function(a,b,c){for(var d,e=0;e<a.length;e++)d=a[e],Fd.a.g.M(c,this.bh),this.bh.Multiply(b*d.GetMass()),d.SetLinearVelocity(Gb.yi),d.ApplyImpulse(this.bh,d.GetWorldCenter())}});Gb.sw=0.3;Gb.zD=6.533333;Gb.pw=7;Gb.qw=14;Gb.Aw=3;Gb.KE=50/30;Gb.EE=5;Gb.Pk=1.621671;
Gb.Zs=22;Gb.HE=6;Gb.DD=500;Gb.yi=new Gd;var Hd=Fd.b.bb.extend({init:function(a,b){this._super(a,b);this.body.SetUserData(this);this.parent=this.data=j},ae:function(){return this.parent&&!this.parent.ka},hg:l(g),xa:function(a){return this.parent&&!this.parent.ka?(this.parent.xa(a),g):k},ib:function(a){this.parent&&this.parent.ib(a)},Qa:function(a){this.parent&&this.parent.Qa(a)},dd:function(a,b){this.parent&&this.parent.dd(a,b)},Dc:l(0)});Fd.b.TrampolineBodyClip=Gb;Fd.b.TrampolinePartBodyClip=Hd;
var Id=Box2D,Jd=q,Kd=Id.Common.Math.b2Vec2,Ld=Jd.b.zw.extend({init:function(a,b,c){this._super(a,b?b:"bridgeSnot",c?c:Ld.jD)},Gp:function(a,b,c,d,e){var h=b.Copy();a=this.Hy(a,b,d,e);b=new Jd.a.H.pc(new Kd,new Kd);d=new Jd.a.H.pc(new Kd,new Kd);Jd.a.H.gb(b,a.start,a.start,a.end,Ld.at);Jd.a.H.gb(d,a.end,a.start,a.end,Ld.at);c=Jd.a.g.uI(this.d.b2World,h,[d.first,d.D,b.D,b.first],c);Jd.a.oa.bp(c);return c},Hy:function(a,b){a=Id.Common.Math.b2Math.SubtractVV(a,b);b.x=b.y=0;return{start:a,end:b}},im:function(a,
b,c){return Jd.a.g.Td(a,b,Id.Common.Math.b2Math.SubtractVV(c,b.GetPosition()),k)}});Ld.at=10/30;Ld.jD=25/30;
var Md=Ld.extend({init:function(a){this._super(a,"trampoline",0.5*Jd.b.Xg.Qo);this.ia=[]},Sl:l(2),Hy:function(a,b,c,d){a=Id.Common.Math.b2Math.SubtractVV(a,b);var e=a.Copy();0<c&&a.Multiply(1.25);c!==d-1?e.Multiply(-0.25):e.x=b.y=0;return{start:a,end:e}},nj:function(a,b){var c=this._super(a,b);0===c.ia%2&&(c=Jd.a.Ro.nj(a,b,this.Qh,c.ia+1));return c},im:function(a,b,c,d){c=Id.Common.Math.b2Math.SubtractVV(c,d);var e=Id.Common.Math.b2Math.AddVV(c,d);c.Add(d);return Jd.a.g.wI(a,b,e,c)},Gp:function(a,
b,c,d,e){a=this._super(a,b,c,d,e);Jd.a.oa.bp(a);a.SetAngularDamping(20);this.ia.push(new Jd.b.TrampolinePartBodyClip(this.d,a));return a},ie:function(a){this.ia.length=0;for(var b=this._super(a),c=0;c<this.ia.length;c++)this.ia[c].data=b;c=new Kd(a.start.x,this.d.Rf-a.start.y);a=new Kd(a.end.x,this.d.Rf-a.end.y);Jd.a.g.Td(this.d.Ze,b.Da(),a,k);Jd.a.g.Td(this.d.Ze,b.py(),c,k);return b}});Jd.b.lH=Md;
var Nd=q,Od=Box2D.Common.Math.b2Vec2,Pd=Nd.b.SnotBodyClipBase.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.ua(Nd.a.Wa.dD);this.uy=0.25;this.kq=Nd.a.e.u(0,2*Math.PI);this.IJ=Nd.a.e.u(0.01,0.02);this.bC=this.aC=k;a=a.scale;this.lk=6.2*a.x;this.Vf=2.5*a.x;this.bj=6.2*a.x;this.fy=0.5*this.bj;this.G.Da().SetUserData(this);this.k=new Nd.b.lD(this.d,this.G.Da());a=a.x/Pd.eD;this.k.p(a,a);this.k.Kj();this.color="rgb(61,61,60)";this.vy=new Od},update:function(a){this._super(a);this.k.update(a);
this.bC||(this.bC=g,this.aC=Nd.a.e.MJ(Math.ceil(Nd.a.e.RN(this.transform.rotation,-180)/90),0));if(this.aC)for(var b=0;b<this.G.Oa.length;b++)a=this.G.Ie(b),Nd.a.g.Vw(a);else Nd.a.g.Vw(this.G.Da());a=0.75*this.uy+0.25*this.uy*Math.cos(this.kq);this.kq+=this.IJ;Nd.a.g.qb(a,this.k.we,this.vy);this.G.Da().ApplyForce(this.vy,this.G.Da().GetWorldCenter())},h:function(a){if(this.d.io&&!this.d.ic){var b=a.$;b.save();Nd.a.H.ph(b,this.O,this.color);Nd.a.yw.BN(b,61,30,7);b.restore();this.k.h(a)}},Dc:l(-2),
xa:function(a){var b=this.G.Da();this.k.gd=this.d.tK(a);a=Nd.a.g.Aa(this.G.vq(),b.GetPosition());a.Multiply(Pd.KG/a.Length());b.ApplyImpulse(a,b.GetWorldCenter());Nd.a.A.aa(Nd.a.J.random(Nd.a.J.NH),Nd.a.e.u(30,50));0.5>Math.random()&&Nd.a.A.aa(Nd.a.J.n.ex,Nd.a.e.u(30,50));return g},ae:l(g),hg:l(k)});Pd.KG=0.7;Pd.eD=11.24;Nd.b.BackSnotBodyClip=Pd;
var Qd=q,Rd=Box2D.Common.Math.b2Vec2,Sd=Box2D.Dynamics.b2Body,Td=new Rd,Ud=Qd.b.bb.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.ua(Qd.a.Wa.BD);this.Za=new Qd.a.I(this.dz);this.Qp=new Qd.a.Yb;this.xj=k;this.Ip=0.588;this.za=this.body.GetPosition().Copy();this.Y=this.za.Copy();this.Kq=new Rd;this.Jq=new Rd;this.Ng=new Rd;this.Cc=new Rd;this.touch=j;this.axis=new Rd;Qd.a.g.qb(1,Qd.a.e.Z(a.rotation),this.axis);a=a.scaleX;this.SC=3.4*a;this.BL=-3.4*a;this.Jx(a);this.body.SetUserData(this);
this.body.SetType(Sd.b2_kinematicBody);this.speed=new Rd;this.Me=new Rd},dz:Qd.a.i.Vt,update:function(a){this._super(a);this.body.SetLinearVelocity(Td);this.touch&&this.YO(a);this.Hj(a);!Qd.a.e.Ud(a.B,0)&&this.body.GetType()===Sd.b2_dynamicBody&&(this.body.SetType(Sd.b2_staticBody),this.body.SetPositionAndAngle(this.za,this.body.GetAngle()));this.le(Qd.a.e.ba(this.Ip,this.ka?1:0.588,0.02))},h:function(a){this.Za.h(a.C,this.transform)},ae:l(g),hg:l(g),Dc:l(1),xa:function(a){return!this.touch&&this.xM(a)?
(this.xj=k,this.touch=a,this.ka=g,Qd.a.g.M(this.Cc,this.Kq),Qd.a.g.M(Qd.a.g.Aa(this.body.GetPosition(),this.za),this.Jq),this.Qp.yb(),g):k},ib:aa(),Qa:function(){this.ka=k;this.touch=j},xM:function(a){this.Cc.x=a.x/30;this.Cc.y=a.y/30;a=Qd.a.g.cc(this.body.GetPosition(),this.Ng);return 1.66>Qd.a.g.Ia(this.Cc,a)},YO:function(){this.Cc.x=this.touch.x/30;this.Cc.y=this.touch.y/30;var a=Qd.a.g.cc(Qd.a.g.Aa(this.Cc,this.Kq),this.Jq);this.by(a)},by:function(a){a=Qd.a.g.Ve(a,this.axis);a=Qd.a.e.Bb(a,this.BL,
this.SC);Qd.a.g.M(this.axis,this.Y);this.Y.Multiply(a);Qd.a.g.Md(this.Y,this.za,this.Y)},Hj:function(a){!Qd.a.e.Ud(a.B,0)&&!Qd.a.g.Nf(this.Y,this.body.GetPosition())&&(Qd.a.g.Nd(this.Y,this.body.GetPosition(),this.Me),this.xj&&Qd.a.g.xp(this.Me,26.67*a.B,this.Me),Qd.a.g.M(this.Me,this.speed),this.speed.Multiply(0.3/a.B),this.Me.Multiply(0.7),this.body.SetLinearVelocity(this.speed),this.body.SetPosition(Qd.a.g.cc(this.body.GetPosition(),this.Me)));Qd.a.g.eP(this.body)},Jx:function(){this.qg=new Qd.b.mt(this.d,
j,Qd.a.i.Wt);var a=new Rd;Qd.a.g.qb(30*this.SC,this.ln,a);var b=this.transform.position.Copy();b.x=Math.floor(b.x);b.y=Math.floor(b.y);this.left=this.qg.Kf(0);this.left.kc(Qd.a.g.Aa(b,a));this.left.Ua(this.transform.rotation);this.right=this.qg.Kf(0);this.right.kc(Qd.a.g.cc(b,a));this.right.Ua(this.transform.rotation);this.right.p(-1,1);this.T=this.qg.Kf(1);this.T.kc(Qd.a.g.cc(b,a));this.T.Ua(this.transform.rotation);this.T.p(2*(a.Length()/this.qg.V.pd.width),1);this.d.entities.add(this.qg);this.qg.ua(1);
this.le(0.588)},le:function(a){this.Ip=a;this.qg.PH=a}});Qd.b.DragableBodyClip=Ud;
var Vd=q,Wd=Vd.b.DragableBodyClip.extend({init:function(a,b,c,d){this._super(a,b,c,d);a=42*Vd.a.g.Ka;this.Ng.x=a;this.Ng.y=-a},h:function(a){this.hx.h(a.C,this.kp);this._super(a)},dz:Vd.a.i.Vv,Jx:function(a){this.hx=new Vd.a.I(Vd.a.i.Uv);var b=200*a/200;this.kp=new Vd.a.Ga;this.kp.copy(this.transform.initial);this.kp.p(b,b);this.ob=200*a*Vd.a.g.Ka/2},by:function(a){Vd.a.g.xp(a,this.ob,a);Vd.a.g.Md(this.za,a,this.Y)},le:function(a){this.Ip=a;this.hx.alpha=a}});Vd.b.RoundDragBodyClip=Wd;
var Xd=q,Yd=Box2D.Common.Math.b2Vec2,Zd=Xd.b.bb.extend({init:function(a,b,c){this._super(a,b);this.BR=k;this.frames=Zd.TD;this.fb=new Yd;this.Oj=this.body.GetPosition().Copy();this.Oj.Multiply(this.ja);this.Tm=new Yd;this.ul=new Yd;this.target=new Yd;this.sb=0;this.width=Zd.eH;this.Pb=[];this.Zh=[];this.O=[];this.Kp=[];for(a=0;20>a;a++)this.Kp.push(new Yd);this.color=c;this.mI=this.color.toString();this.alpha=1;this.visible=g;this.lq=this.Ti=k},update:function(){var a=this.body?this.body.GetPosition():
this.target;Xd.a.g.M(a,this.fb);this.fb.Multiply(this.ja);a=g;if(!Xd.a.g.Nf(this.Oj,Zd.ZERO)){Xd.a.g.lb(this.Oj,this.fb,this.ul);if(Xd.a.g.Nf(this.Tm,Zd.ZERO))this.Zh.unshift(this.sb),this.Pb.unshift(this.fb.Copy());else{var b=Xd.a.g.Ia(this.Tm,this.ul);if(a=b>Zd.PE){b=Math.ceil(b/Zd.sG);20<b&&(b=20);Xd.a.e.zy(this.Tm,this.Oj,this.ul,b,k,this.Kp,0);for(var c=0;c<b;c++)this.Zh.unshift(this.sb);0===this.Pb.length&&this.Pb.push(new Yd);Xd.a.g.M(this.fb,this.Pb[0]);for(c=0;c<b;c++)this.Pb.splice(1,0,
this.Kp[c].Copy())}}this.FI()}a&&(Xd.a.g.M(this.ul,this.Tm),Xd.a.g.M(this.fb,this.Oj));this.LM();this.sb++},h:function(a){if(!(3>this.O.length||!this.visible||this.Ti&&this.d.ic&&!this.lq)){a=this.Ti?a.$:a.C;a.save();a.fillStyle=this.mI;a.globalAlpha=this.alpha;a.beginPath();var b=this.O[0].first,c;a.moveTo(b.x,b.y);for(var d=0;d<this.O.length-1;d+=2)b=this.O[d].first,c=this.O[d+1].first,a.quadraticCurveTo(b.x,b.y,c.x,c.y);for(d=this.O.length-1;0<d;d--)b=this.O[d].D,c=this.O[d-1].D,a.quadraticCurveTo(b.x,
b.y,c.x,c.y);a.closePath();a.fill();a.restore();this.lq=k}},length:function(){return this.Pb.length},FI:function(){this.O.length=0;for(var a=this.Pb.length+1,b,c,d,e=this.Pb.length-1;0<=e;e--)if(b=e===this.Pb.length-1?this.Pb[this.Pb.length-1]:this.Pb[e+1],c=0===e?this.fb:this.Pb[e-1],d=this.width*(1-(e+1)/a),1<d){var h=new Xd.a.H.pc;Xd.a.H.gb(h,this.Pb[e],b,c,d);this.O.push(h)}},LM:function(){for(var a=this.sb-this.frames;0<this.Zh.length&&this.Zh[this.Zh.length-1]<=a;)this.Zh.pop(),this.Pb.pop()},
hN:function(a){if(this.Ti!==a&&(this.Ti=a))this.lq=g}});Zd.TD=25;Zd.PE=1;Zd.sG=3;Zd.eH=30;Zd.ZERO=new Yd;Xd.b.po=Zd;q.a.XG=function(){this.UG=1E3;this.fH=2E3;this.zP=60;this.stars=this.time=0;this.Py=function(){return Math.round(Math.max(this.fH*(180-this.time)/180,0))};this.Ny=function(){return Math.round(this.stars*this.UG)}};
var C=q,$d=Box2D.Common.Math.b2Vec2,ae=C.b.CG.extend({init:function(a,b,c,d){this._super(a,b);this.zk=this.we=0;this.Y=new $d;this.Xa=7;this.EP=30;this.OD=3;this.Qk=0.5;this.Hk=5;this.Gk=10;this.visible=g;this.cd=this.yd=k;this.kb=g;this.Re=0.5;this.pe=new $d;this.nb=new $d;this.Ci=new C.a.I(d);this.fj=new C.a.I(c);this.ha=new C.a.bt;this.gc=new C.a.bt;this.zf();this.da=new C.a.Ga;this.transform.ds(this.transform)},update:function(a){this._super(a);this.transform.rotation=0;this.refresh();C.a.g.nc(this.nb,
this.pe,this.Qk,this.nb);this.visible&&(this.ha.Vc()&&this.ha.update(a),this.gc.Vc()&&this.gc.update(a))},h:function(a){this.visible&&(this.da.s(this.transform.position.x+this.nb.x*this.Re*this.transform.scale.x,this.transform.position.y+this.nb.y*this.Re*this.transform.scale.y),this.da.p(this.transform.scale.x,this.transform.scale.y),this.ha.Vc()?this.ha.h(a.C,this.da):(this.Ci.h(a.C,this.da),this.Rp(a.C,this.da)),this.da.s(this.transform.position.x+this.nb.x*this.transform.scale.x,this.transform.position.y+
this.nb.y*this.transform.scale.y),this.da.p(this.transform.scale.x,this.transform.scale.y),this.da.p(this.transform.scale.x,this.transform.scale.y),this.gc.Vc()?this.gc.h(a.C,this.da):this.fj.h(a.C,this.da))},Rp:aa(),Fg:function(a){a!=this.zk&&(this.zk=C.a.e.ZL(a,0,1))},refresh:function(){var a=this.Xa*this.zk;this.pe.x=a*Math.cos(this.we);this.pe.y=a*Math.sin(this.we);this.yd&&(this.pe.x=0);this.cd&&(this.pe.y=0)},Uy:function(){return this.ha.Uy()},Qc:function(a,b,c){var d=this;this.ha.$r(a,b,function(){d.ge(a);
c&&c(a)});d.vr(a);this.ha.ra&&(this.yd=this.ha.ra.yd,this.cd=this.ha.ra.cd)},nM:function(a,b,c){var d=this;this.gc.$r(a,b,function(){d.ge(a);c&&c(a)});this.yd=this.gc.ra.yd;this.cd=this.gc.ra.cd},hR:function(a,b,c,d){var e=this;C.a.w(C.a.j.o,function(){e.Qc(a,c,d)},b)},yf:function(){var a=this;C.a.w(C.a.j.o,function(){if(!a.ha.Vc()&&a.kb){var b=a.ha.tN(function(){a.ge(b)});a.yd=a.ha.ra.yd;a.cd=a.ha.ra.cd;a.vr(b)}a.yf()},C.a.e.u(a.Hk,a.Gk))},vr:aa(),ge:function(){this.cd=this.yd=k},Ha:function(a,b,
c,d,e){a=new C.a.rb(a,k);a.yd=d;a.cd=e;this.ha.add(a,b,c);return a},vH:function(a,b,c,d,e){a=new C.a.rb(a,k);a.yd=d;a.cd=e;this.gc.add(a,b,c)},zf:aa(),Je:function(a){this.Ci.Je(a);this.fj.Je(a)}}),be=ae.extend({init:function(a,b){this._super(a,b,C.a.i.fu,C.a.i.du);this.Xa=14;this.Ic=this.pl=0;this.mr=this.fg=g;this.jy=k;this.kx=new C.a.I(C.a.i.ku)},update:function(a){this._super(a);0<this.pl?(this.Ic=C.a.e.ba(this.Ic,1,0.1),this.fg=k,this.pl-=a.B):this.fg||(this.Ic=C.a.e.ba(this.Ic,0,0.1),C.a.e.Ud(this.Ic,
0)&&(this.kb=this.fg=g));this.kx.alpha=this.Ic},Rp:function(a,b){!this.fg&&(!this.d.Ra()&&!this.d.tb())&&this.kx.h(a,b)},zf:function(){this.Ha(C.a.i.uu,"smile",g,k,g);this.Ha(C.a.i.iu,"blink",g,k,k);this.Ha(C.a.i.eu,"angry",g,k,k);this.Ha(C.a.i.ju,"blinkonce",g,k,g);this.Ha(C.a.i.vu,"wink",g,k,g);this.Ha(C.a.i.nu,"closeSlow",k,k,g);this.Ha(C.a.i.tu,"sleep",k,k,g);this.Ha(C.a.i.ru,"open",k,k,g);this.vH(C.a.i.gu,"hit",k,g,g);this.Ha(C.a.i.lu,"close",k,k,g).Sc()},FB:function(a){var b=Math.atan2(a.y,
a.x);a=a.Length();this.mr&&(this.we=b,this.Fg(a/this.OD))},ak:function(a){(this.mr=a)||this.Fg(0)},tJ:function(){if(this.fg){var a=this;this.ha.mk();this.kb=k;this.nM("hit",g,function(){a.aM()})}},aM:function(){var a=this;this.Qc("blink",g,function(){a.kb=g})},Kj:function(){if(this.fg){var a=this;this.ha.mk();a.kb=k;this.Qc("open",g,function(){a.kb=g})}},ll:function(){if(this.fg){var a=this;this.ha.mk();this.Qc("closeSlow",g,function(){a.xr()})}},xr:function(){this.jy=g;this.Qc("sleep",g);this.ha.oN()},
Ai:function(){this.pl=0.5;this.d.Ra()||(this.kb=k,this.ha.mk())},vr:function(a){switch(a){case "smile":C.a.A.aa(C.a.J.random(C.a.J.dL),75);break;case "angry":C.a.A.aa(C.a.J.n.Uw,75);break;case "blink":C.a.A.aa(C.a.J.n.Ex,75);break;case "blinkonce":C.a.A.aa(C.a.J.n.Dx,75);break;case "wink":C.a.A.aa(C.a.J.random(C.a.J.lO),75)}}}),ce=ae.extend({init:function(a,b,c,d){this._super(a,b,c?c:C.a.i.hu,d?d:C.a.i.pu);var e=this;this.Xa=5;this.Hk=3;this.Gk=8;this.Wm=ce.xG;this.Vm=ce.wG;this.jl=this.visible=k;
this.d&&this.d.zH(this);e=this;C.a.w(C.a.j.o,function(){e.xx()},0.1,"changePosition");this.yf()},update:function(a){if(this.gd){var b=C.a.g.Aa(this.gd.yg(),this.transform.position);this.we=Math.atan2(b.y,b.x);this.Fg(Math.min(b.LengthSquared(),1))}this._super(a)},zf:function(){this.Ha(C.a.i.Io,"blink",g,k,k);this.Ha(C.a.i.Jo,"blinkonce",g,k,k);this.Ha(C.a.i.su,"open",k,k,k);this.Ha(C.a.i.mu,"close",k,k,k)},Kj:function(){this.visible||(this.visible=g,this.Qc("open",g),this.kb=g)},xr:function(){this.kb=
this.visible=k},ll:function(){var a=this;this.visible&&this.Qc("close",g,function(){a.xr()})},WA:function(){0.5>Math.random()&&(this.Li(),this.jl=g)},XA:function(a){this.gd===a&&(this.Li(),this.jl=g)},Li:function(){this.d&&(this.gd=this.d.jK())},xx:function(){this.jl?this.jl=k:this.Li();var a=this;C.a.w(C.a.j.o,function(){a.xx()},C.a.e.u(this.Wm,this.Vm),"changePosition")}});ce.xG=3;ce.wG=15;
var de=ce.extend({init:function(a,b){this._super(a,b);this.$A=new C.a.I(C.a.i.qu)},Rp:function(a,b){this.$A.h(a,b)}}),ee=ce.extend({init:function(a,b){this._super(a,b,C.a.i.Dt,C.a.i.Ct);this.Xa=28;this.Re=0.4;this.Qk=3;this.OH=new C.a.I(C.a.i.Bt)},h:function(a){a=a.$;this.OH.h(a,this.transform);this.visible&&(this.da.s(this.transform.position.x+this.nb.x*this.Re,this.transform.position.y+this.nb.y*this.Re),this.da.p(this.transform.scale.x,this.transform.scale.y),this.ha.Vc()?this.ha.h(a,this.da):
this.Ci.h(a,this.da),this.da.s(this.transform.position.x+this.nb.x,this.transform.position.y+this.nb.y),this.da.p(this.transform.scale.x,this.transform.scale.y),this.gc.Vc()?this.gc.h(a,this.da):this.fj.h(a,this.da))},zf:function(){this.Ha(C.a.i.Et,"blink",g,k,k);this.Ha(C.a.i.Ft,"blinkonce",g,k,k)}}),fe=ae.extend({init:function(a){this._super(j,j,C.a.i.yu,C.a.i.xu);this.Xa=12;this.Qk=2;this.Hk=3;this.Gk=7;this.transform=a},h:function(a){this.visible&&(this.da.s(this.transform.position.x+0.5*this.nb.x,
this.transform.position.y+0.5*this.nb.y),this.da.p(this.transform.scale.x,this.transform.scale.y),this.ha.Vc()?this.ha.h(a,this.da):this.Ci.h(a,this.da),this.da.s(this.transform.position.x+this.nb.x,this.transform.position.y+this.nb.y),this.da.p(this.transform.scale.x,this.transform.scale.y),this.gc.Vc()?this.gc.h(a,this.da):this.fj.h(a,this.da))},zf:function(){this.Ha(C.a.i.zu,"blink",g,k,k);this.Ha(C.a.i.Au,"smile",k,k,k)}});C.b.qt=be;C.b.Po=ce;C.b.HG=de;C.b.WD=fe;C.b.lD=ee;
var ge=Box2D,he=q,ie=ge.Common.Math.b2Vec2,je=he.b.Nk.extend({init:function(a,b){a.entities.add(this);var c=new ge.Dynamics.b2BodyDef;c.type=ge.Dynamics.b2Body.b2_dynamicBody;c.position=new ie(b.position.x/30,b.position.y/30);var d=a.b2World.CreateBody(c),e=new ge.Collision.Shapes.b2CircleShape(0.5);e.SetLocalPosition({x:c.position.x/30,y:-c.position.y/30});c=new ge.Dynamics.b2FixtureDef;c.shape=e;c.restitution=0;c.density=1;c.friction=1;d.CreateFixture(c);this._super(a,d);this.ja=30;this.body.SetUserData(this);
this.body.SetActive(g);this.body.ApplyForce(new ie(100,-100),this.body.GetWorldCenter());this.Ba=new he.a.I(he.a.i.ou);he.a.w(he.a.j.o,function(){a.q.Ag()},2,"Waiting to restart after DeadEye pops out")},update:function(a){this._super(a)},h:function(a){this.Ba.h(a.C,this.transform)}});he.b.FD=je;var ke=Box2D,le=q,me=ke.Common.Math.b2Vec2,ne=ke.Dynamics.b2Body,oe={oP:0.5};oe.lP=Math.PI/6;oe.mP=6;oe.nP=3;oe.hP=1;oe.eE=5;oe.fE=3;oe.gE=0.2;
oe.GI=function(a,b,c){c=oe.wK(c);Math.seedrandom(a.q.LQ);for(var d=j,e=0,h=j,n=0,p=j,r=j,v=j,E=j,G=0;G<c.length-1;G++)0>=n&&Math.random()<oe.gE&&(n=Math.floor(le.a.e.u(oe.fE,oe.eE))),p=c[G],r=c[G+1],v=ke.Common.Math.b2Math.SubtractVV(p,r).Length(),E=le.a.g.Zw(p,r),p=oe.cK(p,r),E=oe.xD(a,E,p),E=new le.b.PlasticinePartBodyClip(a,E,b,v,0<n||a.tb()||a.ig()),n--,v=new le.b.yG(E,v),h!=j?h.insertAfter(v):d=v,h=v,e++;d.insertBefore(h);return{item:d,count:e}};
oe.cK=function(a,b){var c=ke.Common.Math.b2Math.SubtractVV(b,a),d=new me;le.a.g.lb(a,b,d);c=le.a.g.jB(c);c.Normalize();c.Multiply(Hb.Yg/2);d.Add(c);return d};oe.NJ=function(a,b,c,d,e){a=new le.a.qD(a,b,c);d=le.a.Ro.Ky(a.length(),d,3);b=a.sK(d.Qh,d.Qh);var h=j,h=j;for(c=0;c<d.ia;c++)h=b[c],h=a.fK(h),e.push(h)};
oe.wK=function(a){for(var b=18*D.a.g.Ka,c=[],d=new me,e=0;e<a.length-1;e++)le.a.g.lb(a[e],a[e+1],d),c.push(d.Copy());le.a.g.lb(a[a.length-1],a[0],d);c.push(d.Copy());c.unshift(d.Copy());for(var h=[],e=0;e<c.length-1;e++)oe.NJ(c[e],a[e],c[e+1],b,h);h.push(d);return h};oe.xD=function(a,b,c){a=le.a.g.tI(a.b2World,c,b);a.SetType(ne.b2_kinematicBody);Hb.cp(a);a.SetLinearDamping(10);a.SetAngularDamping(10);b=new ke.Collision.Shapes.b2MassData;a.GetMassData(b);b.sE*=10;a.SetMassData(b);return a};oe.xP={};
var Hb={lE:5/30,st:-10/30,zo:0.4,yo:40/30,GP:0.1,tG:0.3,HP:70/30,Yg:25/30,uG:0.6,Ce:0.6};Hb.RP=-Hb.Yg/2;Hb.CP=3;Hb.AP=2/30;Hb.wi=-Hb.Yg/2-Hb.lE+0.5;Hb.bp=function(a){var b=new ke.Dynamics.b2FilterData;b.categoryBits=16;b.maskBits=61455;b.groupIndex=0;le.a.g.bs(a,b)};Hb.VP=function(a){var b=new ke.Dynamics.b2FilterData;b.categoryBits=16;b.maskBits=61455;b.groupIndex=0;a.SetFilterData(b)};
Hb.cp=function(a){var b=new ke.Dynamics.b2FilterData;b.categoryBits=256;b.maskBits=65535;b.groupIndex=0;le.a.g.bs(a,b)};Hb.WP=function(a){var b=new ke.Dynamics.b2FilterData;b.categoryBits=256;b.maskBits=65535;b.groupIndex=0;a.SetFilterData(b)};le.a=le.a||{};le.a.cH=oe;le.a.oa=Hb;
var pe=Box2D,qe=Class,F=q,re=pe.Common.Math.b2Vec2,se=qe.extend({init:function(a,b){this.next=this.wa=j;this.L=a;this.L.item=this;this.width=b;this.za=this.L.body.GetPosition().Copy();this.af=this.L.body.GetAngle();this.RK=this.oq(F.a.oa.st).Copy();this.kM=this.oq(F.a.oa.yo).Copy();this.Lh=pe.Common.Math.b2Math.SubtractVV(this.kM,this.RK);this.Lh.Normalize();this.$e=this.Lh.Copy();this.$e.Multiply(-F.a.oa.yo-0.5*F.a.oa.Yg);this.$e.x*=this.L.ja;this.$e.y*=this.L.ja;this.jM=-Math.atan2(this.Lh.y,this.Lh.x)+
F.a.e.Vg();this.iM=F.a.g.jB(this.Lh.Copy())},pK:function(a){a.Subtract(this.za);var b=0,b=0>F.a.g.Ve(a,this.L.ee)?-F.a.oa.st:F.a.oa.yo,c=-F.a.g.Ve(a,this.iM);if(Math.abs(c)>F.a.oa.zo){var d=F.a.g.Ve(a,this.Lh),c=F.a.e.Bb(c,-F.a.oa.zo,F.a.oa.zo);a.x=c;a.y=d;F.a.g.rotate(a,-this.jM,a)}a.Length()<=b||(a.Normalize(),a.Multiply(b));a.Add(this.za);return a},ZO:function(a,b,c){this.L.Jj(a,b);for(var d=this.wa,e=0.5*this.width+a+0.5*d.width;e<c;)d.L.Jj(e,b),e+=0.5*d.width,d=d.wa,e+=0.5*d.width;d=this.next;
for(e=a-0.5*this.width-0.5*d.width;Math.abs(e)<c;)d.L.Jj(e,b),e-=0.5*d.width,d=d.next,e-=0.5*d.width},EQ:function(){return this.L.yh()},rq:function(a){return F.a.H.Sg(this.L.rq(a))},sq:function(a){return F.a.H.Sg(this.L.sq(a))},Ay:function(a){return F.a.H.Sg(this.L.Ay(a))},yh:function(){var a=this.L.yh();a.x*=this.L.ja;a.y*=this.L.ja;return a},Tl:function(){var a=this.L.Tl();a.x*=this.L.ja;a.y*=this.L.ja;return a},WJ:function(){se.Ca.x=0.5*-this.width;se.Ca.y=0;return this.L.body.GetWorldPointCachedVector(se.Ca)},
kK:function(){se.Ca.x=0.5*this.width;se.Ca.y=0;return this.L.body.GetWorldPointCachedVector(se.Ca)},oq:function(a){se.Ca.x=0.5*this.width;se.Ca.y=0.5*F.a.oa.Yg+a;return this.L.body.GetWorldPointCachedVector(se.Ca)},uQ:function(a){a=this.oq(a);a.x*=this.L.ja;a.y*=this.L.ja;return a},FQ:function(a){se.Ca.x=a;se.Ca.y=F.a.oa.wi;return this.L.body.GetWorldPointCachedVector(se.Ca)},bK:function(){se.Ca.x=2*this.width;se.Ca.y=0;return this.L.body.GetWorldPointCachedVector(se.Ca)},hK:function(){se.Ca.x=2*
-this.width;se.Ca.y=0;return this.L.body.GetWorldPointCachedVector(se.Ca)},lK:function(){var a=this.L.body.GetWorldPointCachedVector(this.mK());a.x*=this.L.ja;a.y*=this.L.ja;return a},mK:function(){se.Ca.x=this.width/2;se.Ca.y=F.a.oa.wi;return se.Ca},xQ:function(){return this.L.body.GetWorldPointCachedVector(this.XJ())},XJ:function(){se.Ca.x=-this.width/2;se.Ca.y=F.a.oa.wi;return se.Ca},remove:function(){this.next&&(this.next.wa=this.wa);this.wa&&(this.wa.next=this.next);this.next=this.wa=j},insertBefore:function(a){this.wa&&
(this.wa.next=a,a.wa=this.wa);a.next=this;this.wa=a},insertAfter:function(a){this.next&&(this.next.wa=a,a.next=this.next);a.wa=this;this.next=a},getItem:function(a,b){for(var c=0,d=this;c<a;)d=0>b?d.wa:d.next,c++;return d}});se.Ca=new re;
var te=qe.extend({init:function(a,b){this.Pe=a;this.touch=b;this.Mq=new re(b.x/30,b.y/30);this.zz=this.Mq.Copy();this.nh=this.Mq.Copy();this.za=this.Pe.L.body.GetPosition().Copy();this.left=a.getItem(te.ti,-1);this.right=a.getItem(te.ti,1);this.aQ=new F.a.H.pc;this.Ad(g);this.ja=1/30;this.fp=new re;this.gp=new re;this.Of=new re;this.Pf=new re;this.Qd=0;this.tk=new re;this.uk=new re;this.Cs=new re;this.Ds=new re;this.or=new re;this.pr=new re;this.Sh=[];for(var c=0;c<2*te.ti;c++)this.Sh.push(new re);
this.TH=[this.fp,this.Of,this.or,this.tk,this.Cs];this.UH=[this.Ds,this.uk,this.pr,this.Pf,this.gp];this.pq=new re},Ad:function(a){var b=this.Pe.wa,c=this.Pe.next,d=0;for(this.Pe.L.Ad(a);d<te.ti;)b.L.Ad(a),c.L.Ad(a),b=b.wa,c=c.next,d++},update:function(){var a=k;this.nh.x=this.touch.x*this.ja;this.nh.y=this.touch.y*this.ja;F.a.g.Nf(this.nh,this.zz)||(this.dI(),this.zz=this.nh.Copy(),a=g);var b=F.a.g.Ve(F.a.g.Aa(this.nh,this.Pe.L.body.GetPosition()),this.Pe.L.ee);Math.abs(b)>te.UD&&this.Pe.L.LJ(this.touch);
return a},dI:function(){var a=this.left.kK();this.fp.x=a.x;this.fp.y=a.y;a=this.right.WJ();this.gp.x=a.x;this.gp.y=a.y;a=this.left.bK();this.Of.x=a.x;this.Of.y=a.y;a=this.right.hK();this.Pf.x=a.x;this.Pf.y=a.y;this.Qd=Math.atan2(this.Pf.y-this.Of.y,this.Pf.x-this.Of.x);a=this.By();this.tk.x=a.x+2*-F.a.oa.Ce*Math.cos(this.Qd);this.tk.y=a.y+2*-F.a.oa.Ce*Math.sin(this.Qd);this.uk.x=a.x+2*-F.a.oa.Ce*Math.cos(this.Qd+Math.PI);this.uk.y=a.y+2*-F.a.oa.Ce*Math.sin(this.Qd+Math.PI);this.Cs.x=a.x+0.5*-F.a.oa.Ce*
Math.cos(this.Qd);this.Cs.y=a.y+0.5*-F.a.oa.Ce*Math.sin(this.Qd);this.Ds.x=a.x+0.5*-F.a.oa.Ce*Math.cos(this.Qd+Math.PI);this.Ds.y=a.y+0.5*-F.a.oa.Ce*Math.sin(this.Qd+Math.PI);this.or.x=0.5*(this.tk.x+this.Of.x);this.or.y=0.5*(this.tk.y+this.Of.y);this.pr.x=0.5*(this.uk.x+this.Pf.x);this.pr.y=0.5*(this.uk.y+this.Pf.y);a=F.a.e.Fw(this.Sh,this.TH,3,0);F.a.e.Fw(this.Sh,this.UH,3,a);this.PO()},PO:function(){var a=0,b=this.left.next,c,d;c=j;for(var e=new re(0,0);a<this.Sh.length-1;)c=this.Sh[a],d=this.Sh[a+
1],e.x=0.5*(c.x+d.x),e.y=0.5*(c.y+d.y),c=Math.atan2(d.y-c.y,d.x-c.x),b.L.BB(e,c),b=b.next,a++},wQ:function(){return F.a.H.Sg(this.By())},By:function(){F.a.g.Md(this.za,this.nh,this.pq);this.pq.Subtract(this.Mq);return this.Pe.pK(this.pq)},finish:function(){this.Ad(k)}});te.ti=7;te.UD=100/30;F.b.yG=se;F.b.ft=te;
var ue=Box2D,D=q,ve=ue.Common.Math.b2Vec2,we=D.b.bb.extend({name:"PlasticineBodyClip",init:function(a,b,c,d){this._super(c,j,d,a);this.ua(D.a.Wa.hE);a=D.a.cH.GI(c,this,b);this.RA=document.getElementById("plasticineDiv");this.Jh=document.createElement("canvas");this.Jh.style.position="absolute";this.Jh.width=960;this.Jh.height=640;this.S=this.Jh.getContext("2d");this.RA.appendChild(this.Jh);this.ug=a.count;this.wh=a.item;this.tA=0;this.Cl=[];this.Eh=this.Xq=0;this.nm=Infinity;this.uC=this.fl=0;this.Jc=
g;this.borderColor=this.d.Ra()?"rgb(26,70,99)":this.d.tb()?"#cccccc":this.d.ig()?"#FFFB00":"rgb(204,204,204)";this.zN=this.d.Ra()?"#00ade8":this.d.tb()?"#a6a6a6":this.d.ig()?"#fe7f28":"#ffffff";this.fillColor=this.d.tb()?"#cccccc":"#000000";this.d.Ra()?(this.xn=4.5,this.ek=30,this.yn=8,this.ej=k,this.wn=EasingType.xo):this.d.tb()?(this.xn=7.7,this.ek=35,this.yn=10,this.ej=k,this.wn=EasingType.xo):this.d.ig()?(this.xn=6.5,this.ek=36,this.yn=10,this.ej=g,this.wn=EasingType.NP):(this.xn=3.5,this.ek=
we.et,this.yn=8,this.ej=k,this.wn=EasingType.xo);this.O=[];this.eg=[];for(a=0;a<=2*this.ug;a++)this.O.push(new ve),this.eg.push(new ve);this.dm=this.od(g);this.sy=this.dm.y+Math.min(25,0.25*this.dm.height);this.ej&&640<this.dm.y+this.dm.height&&(this.sy=640);this.cI()},update:function(a){this.uC=2>this.nm?we.MD:we.TG;this.fl=D.a.e.ba(this.fl,this.uC,we.Mk);this.nm+=a.B;for(var b=this.wh,c=0;c<this.ug;c++)b.L.update(a),b=b.next},h:function(a){if(this.d.bP){a=a.$;var b,c;if(!this.d.ic&&0<this.fl){a.save();
a.lineWidth=2;a.strokeStyle=this.borderColor;a.globalAlpha=this.fl;a.beginPath();b=this.eg[0];a.moveTo(b.x,b.y);for(var d=1,e=0;e<this.ug;e++)b=this.eg[d++],c=this.eg[d++],a.quadraticCurveTo(b.x,b.y,c.x,c.y);a.closePath();a.stroke();a.restore()}if(this.Jc||this.d.kj||this.d.hm){this.od();a=this.S;a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore();a.save();a.fillStyle=this.fillColor;a.beginPath();a.globalAlpha=1;b=this.O[0];a.moveTo(b.x,b.y);d=1;for(e=
0;e<this.ug;e++)b=this.O[d++],c=this.O[d++],a.quadraticCurveTo(b.x,b.y,c.x,c.y);a.closePath();D.a.yw.AN(a,this.xn*this.d.dr,this.ek,this.yn,this.sy,this.zN,this.fillColor,this.ej,this.wn);a.fill();a.restore();this.Jc=k}}},Oe:function(){this._super();this.RA.removeChild(this.Jh);this.S="Null"},od:function(a){a=a===f?k:a;D.a.g.M(this.wh.yh(),this.O[0]);var b,c;b=this.wh;for(var d=this.S.canvas.width,e=this.S.canvas.height,h=0,n=0,p=1,r=0;r<this.ug;r++)c=b.next,D.a.g.M(b.lK(),this.O[p++]),D.a.g.M(c.yh(),
this.O[p++]),b=b.next,a&&(c=this.O[p-1],c.x<d&&(d=c.x),c.x>h&&(h=c.x),c.y<e&&(e=c.y),c.y>n&&(n=c.y));if(a)return{x:d,y:e,width:h-d,height:n-e}},cI:function(){var a,b;a=this.wh;D.a.g.Md(this.O[0],this.wh.$e,this.eg[0]);for(var c=1,d=0;d<this.ug;d++)b=a.next,D.a.g.Md(this.O[c],a.$e,this.eg[c++]),D.a.g.Md(this.O[c],b.$e,this.eg[c++]),a=a.next},$N:function(a,b){this.Jc=g;for(var c=a.wa,d=a.next,e=0;e<D.b.ft.ti;){if(c.L.ka||d.L.ka)return k;c=c.wa;d=d.next;e++}a.L.xf(0);a.next.L.xf(0);a.next.next.L.xf(0);
a.wa.L.xf(0);a.wa.wa.L.xf(0);this.Cl[b.id]=new D.b.ft(a,b);this.tA++;this.d.sa.IK();return g},PL:function(a){this.Jc=g;if(a=this.Cl[a.id])this.Jc=a.update(),this.nm=0},lC:function(a,b){var c=this.Cl[b.id];c&&(c.finish(),delete this.Cl[b.id],this.tA--,this.d.sa.TI(),this.Jc=g)},hn:function(){for(var a=this.wh,b=0;b<this.ug;b++)a.L.QL(),a=a.next}});we.TG=0;we.Mk=0.02;we.MD=0.4;we.et=30;
var xe=D.b.bb.extend({name:"PlasticinePartBodyClip",init:function(a,b,c,d,e){this._super(a,b);this.body.SetUserData(this);this.parent=c;this.width=d;this.item=j;this.nr=k;this.af=this.body.GetAngle();this.za=this.body.GetPosition().Copy();this.Fd=this.af;this.Y=this.za.Copy();this.ee=ue.Common.Math.b2Math.SubtractVV(this.yh(),this.body.GetWorldCenter());this.ee.Normalize();a=D.a.e.Cd(this.body.GetAngle(),-D.a.e.Vg());b=this.d.tb()?xe.dE:xe.cE;D.a.e.gx(a,-b,b)?(this.pz=g,e&&this.Dp()):this.pz=k;this.uz=
D.a.e.gx(a,Math.PI/2,2*Math.PI);this.Vl=this.mm=0;D.a.oa.cp(this.body);this.Ah=new ve;this.li=new ve;this.Jc=k;this.li=new ve;this.Ah=new ve;this.oA=new ve},Dp:function(){this.d.Ra()||(this.We=this.d.tb()||this.d.ig()?new D.b.nH(this.d,this):new D.b.so(this.d,this))},update:function(a){this.mm=a.B;this.Jc&&this.RL(a);this.We&&this.We.update(a)},BB:function(a,b){this.nr=k;this.Jc=g;var c=this.body.GetPosition();this.Xq=(a.x-c.x)*(1/this.mm);this.Eh=(a.y-c.y)*(1/this.mm);this.Fd=D.a.e.Cd(b,this.body.GetAngle()-
Math.PI);this.Y.x=a.x;this.Y.y=a.y;4<this.Xq*this.Xq+this.Eh*this.Eh&&this.ly()},Jm:function(a,b){var c=a.GetUserData();if(c&&c.bf()){var d=new ue.Collision.b2WorldManifold;b.GetWorldManifold(d);var d=this.body.GetLocalPoint(d.m_points[0]),e=d.x;d.y+=6*D.a.g.Ka;this.item.ZO(e,c,D.b.so.tP);this.pz&&!this.ka&&this.uH(a,b,d)}},Jj:function(a,b){this.We&&this.We.Jj(a,b)},QL:function(){this.BB(this.za,this.af);this.nr=g},RL:function(a){var b=this.body.GetPosition();D.a.e.Ud(this.Fd,this.body.GetAngle())||
this.body.SetAngle(this.Fd);D.a.g.Nf(this.Y,b)?D.a.g.Nf(this.body.GetLinearVelocity(),xe.Ck)||(this.body.SetLinearVelocity(xe.Ck),this.parent.Jc=g,this.Jc=k):(D.a.g.Nd(this.Y,b,this.Ah),this.nr&&this.Ah.Multiply(0.3),D.a.g.M(this.Ah,this.li),this.Ah.Multiply(xe.TE),this.li.Multiply(xe.RG/a.B),a=this.li.Length(),a>xe.xt&&this.li.Multiply(xe.xt/a),D.a.g.Md(b,this.Ah,this.oA),this.body.SetLinearVelocity(this.li),this.body.SetPosition(this.oA),this.uz&&this.ly(),this.parent.Jc=g)},LJ:function(a){this.parent.lC(this.item,
a);this.d.Rl(a.id)},ly:function(){this.Vl-=this.mm;if(this.uz&0>=this.Vl&&-5<this.Eh&&0.2>Math.random()){this.Vl=xe.jE;var a=D.a.g.BM(this.item.rq(xe.kE),this.item.sq(0)),b=this.d.xq.Vk();0>this.Eh&&(b.Ma*=1.3,a.y+=Math.max(this.Eh,-35));b.kc(a)}},uH:function(a,b,c){b=a.GetLinearVelocity().Length();if(1<=b&&0.33>Math.random()){c=a.GetWorldPointCachedVector(c);var d=this.d.tb()?2:1;this.d.Tp.yH(a.GetLinearVelocity(),c,b,d)}},xf:function(a){this.We&&this.We.xf(a)},ae:l(g),xa:function(a){return this.parent.$N(this.item,
a)},ib:function(a){this.parent.PL(a)},Qa:function(a){this.parent.lC(this.item,a)},Ad:ba("ka"),ZJ:function(){xe.Rb.x=0;xe.Rb.y=D.a.oa.wi;return xe.Rb},Gy:function(){var a=D.a.oa.wi-(0.8*(this.parent.ek-we.et)+15)/30;xe.Rb.x=0;xe.Rb.y=a;return xe.Rb},Tl:function(){return this.body.GetWorldPointCachedVector(this.Gy())},yh:function(){return this.body.GetWorldPointCachedVector(this.ZJ())},rq:function(a){xe.Rb.x=-this.width/2;xe.Rb.y=a;return this.body.GetWorldPointCachedVector(xe.Rb)},sq:function(a){xe.Rb.x=
this.width/2;xe.Rb.y=a;return this.body.GetWorldPointCachedVector(xe.Rb)},Ay:function(a){xe.Rb.x=0;xe.Rb.y=a;return this.body.GetWorldPointCachedVector(xe.Rb)},Dc:l(0),hg:l(g)});xe.Rb=new ve;xe.Ck=new ve;xe.TE=0.4;xe.RG=0.5;xe.xt=4.5;xe.cE=Math.PI/6;xe.dE=Math.PI/3;xe.jE=D.a.e.u(0.205,0.41);xe.kE=20*D.a.g.Ka;D.b.PlasticineBodyClip=we;D.b.PlasticinePartBodyClip=xe;
var ye=q,ze=Box2D.Common.Math.b2Vec2,Ae=ye.b.bb.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.body=b;this.body.SetUserData(this);a=this.oj();b=0<=a.indexOf("Circle");this.oe=new ye.a.rb(b?ye.a.i.Qt:0<=a.indexOf("Simple")?ye.a.i.Xv:ye.a.i.aw,k);this.oe.Nh=k;this.oe.jc=g;this.bz=k;this.GJ=b;this.za=this.body.GetPosition().Copy();this.Lq=this.transform.scale.x;this.offset=new ze;this.bN()},update:function(a){this._super(a);this.oe.update(a);if(this.GJ&&!this.bz){var b=ye.a.g.Aa(this.za,this.body.GetPosition()),
b=Math.atan2(b.y,b.x),b=ye.a.e.Cd(b,this.direction-Math.PI);this.direction=ye.a.e.ba(this.direction,b,this.sc*a.B);ye.a.g.qb(this.speed*a.B,this.direction,this.offset);this.body.SetPosition(ye.a.g.cc(this.body.GetPosition(),this.offset));this._super(a)}},h:function(a){this.oe.h(a.C,this.transform)},dd:function(a){a=a.GetUserData();a!==f&&a!==j&&a.bf()&&(this.bz=g,this.oe.play(),a.hy())},bN:function(){this.speed=ye.a.e.u(0.067,0.1);this.direction=ye.a.e.u(0,2*Math.PI);this.sc=ye.a.e.u(0.8,1.2)}});
ye.b.SimpleSpikesBodyClip=Ae;var Be=q,Ce=Box2D.Common.Math.b2Vec2;
Be.b.YD=function(a,b){this.sR=this;this.ud=a;this.wb=new Ce;this.wc=new Ce;this.rR=new Ce;this.Bg=new Ce;this.vk=new Ce;this.fO=34*this.ud.transform.scale.x;this.Gz=0.9;this.Hz=7*this.ud.transform.scale.x;this.HJ=70*this.ud.transform.scale.x;this.sJ=9.25*this.ud.transform.scale.x;this.gO=6*this.ud.transform.scale.x;this.Vf=0.01*this.ud.transform.scale.x;this.rO=6*this.ud.transform.scale.x;this.Ef=new Ce(b.position.x,b.position.y);this.U=new Ce;this.top=new Ce;this.Kg=[new Ce,new Ce];this.Ki=[new Ce,
new Ce];this.wk=[new Ce,new Ce];Be.a.e.KH(this.ud.transform.rotation,this.Bg);Be.a.g.Vj(this.Bg);this.Bg.Normalize();this.wb.x=this.Bg.x;this.wb.y=this.Bg.y;this.wb.Multiply(this.fO);this.Ef.x-=this.wb.x;this.Ef.y-=this.wb.y;this.vk.x=this.Bg.x;this.vk.y=this.Bg.y;this.vk.Multiply(this.HJ);var c=a.d.tb();this.XN=c?"#979797":"black";this.rJ=c?"#979797":"black";this.update=function(){var a=this.ud.k.gd;this.top.x=this.Ef.x+this.vk.x;this.top.y=this.Ef.y+this.vk.y;var b=a&&a.bf&&a.bf(),c=a instanceof
Be.b.SpikesFlowerBodyClip;b&&!this.ud.Oq||!b&&!c&&a?(a=a.yg(),this.wc.x=a.x-this.top.x,this.wc.y=a.y-this.top.y):(this.wc.x=0,this.wc.y=0);this.wc.Normalize();this.wc.x*=this.Hz;this.wc.y*=this.Hz;this.top.x+=this.wc.x;this.top.y+=this.wc.y;Be.a.g.lb(this.Ef,this.top,this.U);this.U.x-=this.wc.x*this.Gz;this.U.y-=this.wc.y*this.Gz;this.Ls(this.Ef,this.Kg,this.gO,this.U);this.Ls(this.U,this.Ki,this.Vf,this.top);this.Ls(this.top,this.wk,this.rO,this.U)};this.h=function(a){a=a.C;a.fillStyle=this.XN;a.beginPath();
a.moveTo(this.Kg[0].x,this.Kg[0].y);a.quadraticCurveTo(this.Ki[0].x,this.Ki[0].y,this.wk[1].x,this.wk[1].y);a.lineTo(this.wk[0].x,this.wk[0].y);a.quadraticCurveTo(this.Ki[1].x,this.Ki[1].y,this.Kg[1].x,this.Kg[1].y);a.lineTo(this.Kg[0].x,this.Kg[0].y);a.closePath();a.fill();a.fillStyle=this.rJ;a.beginPath();a.arc(this.top.x,this.top.y,this.sJ,0,2*Math.PI,k);a.closePath();a.fill()};this.Ls=function(a,b,c,n){this.wb.x=n.x-a.x;this.wb.y=n.y-a.y;Be.a.g.Vj(this.wb);this.wb.Normalize();this.wb.x*=c;this.wb.y*=
c;b[0].x=a.x;b[0].y=a.y;b[1].x=a.x;b[1].y=a.y;b[0].x+=-this.wb.x;b[0].y+=-this.wb.y;b[1].x+=this.wb.x;b[1].y+=this.wb.y}};
var Ge=q,He=Ge.b.SimpleSpikesBodyClip.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.Oq=k;this.transform=d;this.Ol=new Ge.b.YD(this,this.transform);this.k=new Ge.b.Po(c,b);this.k.visible=g;this.k.transform.p(0.7*this.transform.scale.x,0.7*this.transform.scale.x)},yg:function(){return this.k.transform.position},dd:function(a){var b=a.GetUserData();if(b!==f&&b!==j){var c=this;b.bf()&&!b.nz&&(this.Oq=b.nz=g,this.k.kb=k,this.oe.play(),Ge.a.A.aa(Ge.a.J.n.Ux,70),Ge.a.w(Ge.a.j.Wo,function(){b.ey(c.body.GetPosition(),
0.5,3,0,0.2)},0,"Flower is eating the hero"),this.k.gd=this,Ge.a.w(Ge.a.j.Wo,function(){c.oe.ga.pd.UM();c.oe.stop();c.oe.play();Ge.a.A.aa(Ge.a.J.n.Tx,70);var a=new Ge.b.FD(c.d,c.transform),e=b.Rx();a.p(e,e);c.k.kb=g;c.k.gd=a;c.Oq=k},2,"Waiting to open spike flower"))}},update:function(a){this._super(a);this.Ol.update();this.k.update(a);this.k.transform.position.x=this.Ol.top.x;this.k.transform.position.y=this.Ol.top.y},h:function(a){this.Ol.h(a);this._super(a);this.k.h(a)}});
Ge.b.SpikesFlowerBodyClip=He;
var H=q,Ie=Box2D.Common.Math.b2Vec2,Je=Box2D.Dynamics.b2Body,I=H.b.bb.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.body.SetUserData(this);this.body.SetBullet(g);this.ei=this.transform.scale.x;this.oC=I.WG.Copy();this.oC.Multiply(this.ei);this.nC=I.VG*this.ei*H.a.g.Ka;this.Ii=new H.b.nd(0.06,0.07);this.Ii.de=0.95;this.Ii.kf=1.04;for(a=this.body.GetFixtureList();a;)a.SetFriction(1),this.tj(a)&&a.SetSensor(g),a=a.GetNext();this.cb=new H.a.rb(H.a.i.cw);this.cb.Nh=k;this.cb.tB(I.ri);this.cb.jc=
g;this.Ez=-I.ut;this.jb=j;this.La=new H.b.Dw(this.d,this.body);a=I.MG.Copy();a.y*=this.ei;H.a.g.rotate(a,this.transform.rotation,a);a=this.body.GetWorldPointCachedVector(a);this.La.Yd.value=30*a.x;this.La.ve.value=30*a.y;this.La.cN=k;this.FM();this.Hp();this.Un=H.a.e.u(I.zt,I.yt);this.DB();this.Lb=new H.a.I(H.a.i.bw);this.offset=new Ie;this.Tj=new Ie;this.lo=new Ie;this.Ff=new Ie;this.Qm=new Ie;H.a.g.rotate(I.Be,this.transform.rotation,this.Qm)},update:function(a){this._super(a);if(this.jb)this.jb.body.GetType()==
Je.b2_kinematicBody||this.vp(this.jb.body,"sticky",1)?(this.TO(),this.UO()):(this.ry(),this.tn(j));else if(!this.cb.Gb&&this.cb.ga.frame===I.ri&&(this.Ii.update(a.B),this.p((2-this.Ii.value)*this.ei,this.Ii.value*this.ei),0>this.Un)){this.Un=H.a.e.u(I.zt,I.yt);this.DB();for(var b=0,c;3>b&&this.La.r.length<I.ww;)c=this.La.Vk(),c.Va*=1/I.Wg,c.Ma*=1/I.Wg,b++}0===this.cb.ga.frame&&(this.cb.Dg(I.ri),this.cb.jc=g);this.cb.update(a);this.La.update(a);this.Un-=a.B},h:function(a){this.Lb.h(a.C,this.transform);
this.cb.ga.h(a.C,this.transform);this.La.h(a.C)},ae:l(g),Dc:function(){return this.jb?2:-10},xa:function(a){return H.a.g.Ia(this.body.GetWorldCenter(),new Ie(a.x/30,a.y/30))<I.FE?(this.eL(),this.jb?this.$q():(H.a.A.aa(H.a.J.n.MA,70),this.XB()),g):k},dd:function(a,b){this.VA(a,b)},Km:function(a){this.jb!=j&&(a===this.jb.body&&!H.a.g.$K(this.body,this.jb.body))&&(this.ry(),this.tn(j))},Jm:function(a,b){this.VA(a,b)},VA:function(a,b){if(!(this.jb!=j||this.d.totalTime-this.Ez<I.ut)){var c=a.GetUserData(),
d=b.GetFixtureA(),e=b.GetFixtureB();if(c&&b.IsTouching()&&(!d.IsSensor()||!e.IsSensor())&&c.il()&&(this.tj(d)||this.tj(e)||this.vp(a,"base",2)))this.VM(),this.tn(c),H.a.A.aa(H.a.J.n.Fr,70),this.cb.ym=g}},tj:function(a){return this.wp(a,"sticky")},TO:function(){var a=this.jb.body;if(a.GetType()===Je.b2_dynamicBody){var b=this.XC();H.a.g.Nd(b,a.GetPosition(),this.Ff);H.a.g.M(this.Ff,this.offset);b=this.Ff.Length();this.Ff.Normalize();this.Ff.Multiply(a.GetMass()*(this.nC-b)*I.xw);a.ApplyForce(this.Ff,
a.GetWorldCenter());var b=H.a.g.Ve(a.GetLinearVelocity(),this.Qm),c=H.a.g.Ve(this.offset,this.Qm);if(0>b*c||10>Math.abs(b)&&1<Math.abs(c))H.a.g.M(this.Qm,this.offset),this.offset.Multiply(c*a.GetMass()*I.xw),a.ApplyForce(this.offset,a.GetWorldCenter());H.a.g.Nd(a.GetPosition(),this.body.GetPosition(),this.Tj);H.a.g.rotate(this.Tj,this.transform.rotation,this.Tj);this.FJ(this.Tj);this.hI(c)}},FJ:function(a){var b=a.y+2.2;0>b&&2*Math.abs(a.x)>Math.abs(b)?(a.x=H.a.e.ba(a.x,H.a.e.xh(a.x)*b/2,0.3),this.Yw(a)):
0<b&&(a.x=H.a.e.ba(a.x,0,0.3),this.Yw(a))},UO:function(){var a=this.jb.body.GetType()===Je.b2_dynamicBody?Math.min(1,this.Tj.y/this.nC):0;this.cb.Dg(I.ri+Math.max(I.SG*(1-a)-1,0))},ry:function(){this.cb.sb!==I.ri&&(this.cb.vf=g,this.cb.play())},tn:ba("jb"),wp:function(a,b){var c=a.GetUserData();return c?c.hasOwnProperty(b):k},vp:function(a,b,c){a=a.GetContactList();for(var d=0;a;){a.contact.IsTouching()&&(this.wp(a.contact.GetFixtureA(),b)||this.wp(a.contact.GetFixtureB(),b))&&d++;if(d===c)return g;
a=a.next}return k},jI:function(a){return this.vp(this.jb.body,a,2)},XC:function(){H.a.g.rotate(this.oC,this.transform.rotation,this.lo);H.a.g.Nd(this.body.GetPosition(),this.lo,this.lo);return this.lo},hI:function(a){0.1>Math.abs(a)&&this.jI("base")&&(a=this.jb.body,a.SetType(Je.b2_kinematicBody),a.SetLinearVelocity(I.ZERO),a.SetAngularVelocity(0))},Yw:function(a){var b=this.jb.body.GetPosition();H.a.g.rotate(a,-this.transform.rotation,b);b.Add(this.body.GetPosition())},eL:function(){for(var a=this.body.GetContactList(),
b,c;a;){b=a.contact.GetFixtureA();c=a.contact.GetFixtureB();if((!b.IsSensor()||!c.IsSensor())&&(this.tj(b)||this.tj(c))&&a.contact.vz)b=a.other.GetUserData(),b!=this.jb&&b.il()&&this.Xw(b);a=a.next}},$q:function(){this.jb.AB(k);this.jb.body.SetType(Je.b2_dynamicBody);this.Xw(this.jb);this.Ez=this.d.totalTime;this.tn(j);H.a.A.aa(H.a.J.n.Fr,70);this.XB()},Xw:function(a){var b=1;if(a.body.GetType()===Je.b2_dynamicBody){var c=H.a.g.Ia(this.XC(),a.body.GetPosition()),c=c-a.Xa;0<c&&(b=Math.max(0,(I.rt-
c)/I.rt))}this.LH(I.uE*b,a.body)},LH:function(a,b){a=a*b.GetMass()*this.ei;b.SetLinearVelocity(I.ZERO);H.a.g.qb(a,this.transform.rotation-0.5*Math.PI,this.Ff);b.ApplyImpulse(this.Ff,b.GetWorldCenter())},XB:function(){this.yN();this.PN();this.cb.tB();this.cb.ck();this.cb.vf=g;this.cb.Gb=g;this.cb.ym=k},FM:function(){this.La.angle=new H.b.Na(-this.transform.rotation+0.5*Math.PI,0.34906585)},Hp:function(){for(var a,b=0;b<I.ww;b++)a=this.La.Wk(this.transform.position),a.visible=k},zB:function(a){this.La.Yd=
new H.b.Na(this.La.Yd.value,a);this.La.ve=new H.b.Na(this.La.ve.value,a)},DB:function(){this.zB(0);this.La.Ih=0.294;this.La.Ph=I.Mk/I.Wg;this.La.xb=I.So/I.Wg},yN:function(){this.zB(I.NG);this.La.Ih=0.705;this.La.Ph=1.6*I.Mk;this.La.xb=I.So},PN:function(){this.La.IN()},VM:function(){this.La.xb=1.5*-I.So;for(var a,b=0;b<this.La.r.length;b++){a=this.La.r[b];a.Va*=-I.Wg;a.Ma*=-I.Wg;var c=Math.sqrt(a.Va*a.Va+a.Ma*a.Ma);300<c&&(c=300/c,a.Va*=c,a.Ma*=c)}}});I.Wg=6;I.yP=40*H.a.g.Ka;I.Aw=7;I.So=7;I.Mk=0.784;
I.NG=20;I.yt=2.3;I.zt=1.5;I.ut=0.2;I.SG=5;I.ri=7;I.ww=10;I.jP=80*H.a.g.Ka;I.wP=20*H.a.g.Ka;I.FE=35*H.a.g.Ka;I.uE=25;I.iP=new Ie(0,20*H.a.g.Ka);I.MG=new Ie(0,-2);I.rt=200*H.a.g.Ka;I.VG=150;I.WG=new Ie(0,40*H.a.g.Ka);I.xw=150;I.Be=new Ie(1,0);I.ZERO=new Ie(0,0);H.b.SpringBodyClip=I;var Ke=window,Le=q;
function Me(){var a=this;this.Sj=[];this.mn=k;this.time={now:Date.now(),wa:a.tR,B:0};this.loop=function(){if(a.mn){a.time.now=Date.now();a.time.B=0.0010*(a.time.now-a.time.wa);a.time.wa=a.time.now;if(0<a.time.B)for(var b=0;b<a.Sj.length;b++)a.Sj[b].update(a.time);Ke.requestAnimationFrame(a.loop)}}}
for(var Ne=0,Oe=["ms","moz","webkit","o"],Pe=0;Pe<Oe.length&&!Ke.requestAnimationFrame;++Pe)Ke.requestAnimationFrame=Ke[Oe[Pe]+"RequestAnimationFrame"],Ke.cancelAnimationFrame=Ke[Oe[Pe]+"CancelAnimationFrame"]||Ke[Oe[Pe]+"CancelRequestAnimationFrame"];Ke.requestAnimationFrame||(Ke.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-Ne)),d=Ke.setTimeout(function(){a(b+c)},c);Ne=b+c;return d});Ke.cancelAnimationFrame||(Ke.cancelAnimationFrame=function(a){Ke.clearTimeout(a)});
Me.prototype.jd=function(a){this.Sj.push(a)};Me.prototype.oh=function(a){a=this.Sj.indexOf(a);0<=a&&this.Sj.splice(a,1)};Me.prototype.start=function(){this.mn||(this.mn=g,this.loop())};Me.prototype.stop=function(){this.mn=k};Le.a.Cb=new Me;var Qe=window,wa=document,Re=q;function Se(a,b,c,d){this.id=a;this.x=b;this.y=c;this.Ib=f;this.ob=(this.Dh=d||k)?Te:Ue}var Ue=15*(1/30),Te=45*(1/30);m=Se.prototype;m.addListener=ba("Ib");m.xa=function(){this.Ib&&this.Ib.xa(this)};m.ib=function(){this.Ib&&this.Ib.ib(this)};
m.Qa=function(){this.Ib&&this.Ib.Qa(this)};m.copy=function(a){this.id=a.id;this.x=a.x;this.y=a.y};Re.a.jH=Se;
Re.a.iH=function(a,b){function c(a){var b=Ka[a];b&&(sd.Qa(b),b.Ib=j,b.Dh?Eb--:Cd--,delete Ka[a])}function d(a){return{x:(a.pageX-De.left)*Ee/Zf,y:(a.pageY-De.top)*Fe/$f}}function e(a){a.preventDefault()}function h(a,b){a.preventDefault();var c=d(a),e=a.pointerId||0;Ka[e]=new Se(e,c.x,c.y,b);b?Eb++:Cd++;sd.xa(Ka[e])}function n(a){a.preventDefault();var b=d(a),c=b.y;if(a=Ka[a.pointerId||0])a.x=b.x,a.y=c}function p(a){a.target.msSetPointerCapture(a.pointerId);0===Eb&&wa.addEventListener("MSPointerMove",
r);h(a,g)}function r(a){n(a)}function v(a){c(a.pointerId||0);0===Eb&&wa.removeEventListener("MSPointerMove",r)}function E(a){a.target.msSetPointerCapture(a.pointerId);0===Eb&&wa.addEventListener("pointermove",G);h(a,g)}function G(a){n(a)}function ea(a){c(a.pointerId||0);0===Eb&&wa.removeEventListener("pointermove",G)}function Ua(a){var b,c,e;a.preventDefault();0===Eb&&wa.addEventListener("touchmove",Aa);for(b=0;b<a.changedTouches.length;b+=1)c=a.changedTouches[b],e=d(c),c=c.identifier,Ka[c]=new Se(c,
e.x,e.y,g),Eb++,sd.xa(Ka[c])}function Aa(a){var b,c,e;a.preventDefault();for(b=0;b<a.changedTouches.length;b+=1){c=a.changedTouches[b];e=d(c);var h=e.y;if(c=Ka[c.identifier])c.x=e.x,c.y=h}}function ab(a){var b,d;for(b=0;b<a.changedTouches.length;b+=1)d=a.changedTouches[b],c(d.identifier);0===Eb&&wa.removeEventListener("touchmove",Aa)}function ib(a){0===Cd&&wa.addEventListener("mousemove",Nb);h(a,k)}function Nb(a){n(a)}function rf(a){c(a.pointerId||0);0===Cd&&wa.removeEventListener("mousemove",Nb)}
var Ka=[],sd=b,Cd=0,Eb=0,De=$("#surface").offset(),Uc=Re.a.Ly(),Ee=960,Fe=640,Zf=Ee*Uc,$f=Fe*Uc;this.update=function(){var a,b;for(a in Ka)Ka.hasOwnProperty(a)&&(b=Ka[a],sd.ib(b))};this.gK=function(){return Ka};this.Rl=function(a){if(a=Ka[a])a.Ib=j};this.kI=function(){var a,b;for(a in Ka)Ka.hasOwnProperty(a)&&(b=Ka[a],c(b.id))};switch(Qe.navigator.rM?"pointer":Qe.navigator.msPointerEnabled?"mspointer":Qe.ontouchstart!==f?"touch":"unknown"){case "mspointer":a.addEventListener("MSPointerDown",p);wa.addEventListener("MSPointerUp",
v);wa.addEventListener("MSPointerCancel",v);wa.addEventListener("MSHoldVisual",e);break;case "pointer":a.addEventListener("pointerdown",E);wa.addEventListener("pointerup",ea);wa.addEventListener("pointerCancel",ea);wa.addEventListener("MSHoldVisual",e);break;case "touch":a.addEventListener("touchstart",Ua);wa.addEventListener("touchend",ab);a.addEventListener("mousedown",ib);wa.addEventListener("mouseup",rf);break;default:a.addEventListener("mousedown",ib),wa.addEventListener("mouseup",rf)}wa.addEventListener("contextmenu",
e);wa.addEventListener("selectstart",e);Qe.onresize=function(){De=$("#surface").offset();Uc=Re.a.Ly();Zf=Ee*Uc;$f=Fe*Uc}};var Ve=window,We=q;
function Xe(a){var b,c,d;switch(a.getAttribute("__type__")){case "NSMutableDictionary":case "Level":case "FlashPoint":c={};for(b=0;b<a.attributes.length;b+=1)d=a.attributes[b],"viewType"==d.name&&"McTeleportView"==d.value||"__type__"!==d.name&&(c[d.name]=!isNaN(d.value)?+d.value:d.value);for(b=0;b<a.childNodes.length;b+=1)d=a.childNodes[b],c[d.nodeName]=Xe(d);return c;case "NSMutableArray":c=[];for(b=0;b<a.childNodes.length;b+=1)c.push(Xe(a.childNodes[b]));return c;case "null":return j;default:throw Error("unrecognized __type__: "+
a.getAttribute("__type__"));}}function Ye(a){a=a.replace(/>\s*</g,"><");return Xe(Ze(a).documentElement)}function $e(a){var b=a instanceof Array?[]:{},c;for(c in a)b[c]=a[c]&&"object"==typeof a[c]?$e(a[c]):a[c];return b}var af=[],bf=[],cf,Ze;
if("undefined"!=typeof Ve.DOMParser)Ze=function(a){return(new Ve.DOMParser).parseFromString(a,"text/xml")};else if("undefined"!=typeof Ve.ActiveXObject&&new Ve.ActiveXObject("Microsoft.XMLDOM"))Ze=function(a){var b=new Ve.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};else throw Error("No XML parser found");We.a.gL=Ye;
We.a.fL={load:function(a,b){b=b||Ve.console.log;if(af[a])b($e(af[a]));else{var c=new XMLHttpRequest;isNaN(a)?c.open("GET","levels/"+a+"?v="+We.version,g):c.open("GET","levels/level"+a+"web.xml?v="+We.version,g);c.onreadystatechange=function(){4===c.readyState&&(af[a]=Ye(c.responseText),b($e(af[a])))};c.send()}}};We.a.iJ=bf;
We.a.Up={load:function(a,b){for(var c=a.length-1;0<=c;c--)if(!bf[a[c]])for(var d=0;d<cf.length;d++)cf[c].name==a[c]&&(bf[element[c]]=cf[c].root);b()},CL:function(){$.get("elements-all.json?v="+We.version,function(a,b,c){if(cf=JSON.parse(c.responseText))for(a=0;a<cf.length;a++)bf[cf[a].name]=cf[a].root})},TJ:function(a){var b=bf[a];if(b)return b;Ve.console&&console.log("unrecognized or uncached element "+a)}};
var df=Modernizr,ef=Tweenable,ff=q,gf=Class.extend({init:function(a,b,c){this.element=a;this.$I=this.VQ=f;this.Gm=k;this.wg=f;this.checked=k;this.Ja=g;this.toggle=c;this.Hq=this.Gq=0;this.ks=this.Wl=this.Fm=k;this.ls=g;this.getAudioTag=this.Gs=j;df.csstransitions||(this.Ja=k,this.XQ=new ef);this.sx=this.tO.bind(this);this.qp=this.EC.bind(this);this.tx=this.vO.bind(this);this.qx=this.TL.bind(this);this.op=this.SL.bind(this);this.Gi=this.UL.bind(this);this.rx=this.tM.bind(this);this.pp=this.sM.bind(this);
this.Hi=this.uM.bind(this);this.gl=this.NL.bind(this);this.np=this.ML.bind(this);this.eh=this.OL.bind(this);this.ZH=this.oy.bind(this);this.GC=this.uK();this.LK(g);this.JK(b);this.fq=1},uK:function(){return window.navigator.rM?"pointer":window.navigator.msPointerEnabled?"mspointer":window.ontouchstart!==f?"touch":"unknown"},JK:function(a){a?this.Im():this.Lm();this.active=a},setActive:function(a){this.active!==a&&(a?this.Im():this.Lm());this.active=a},Im:aa(),Lm:aa(),LK:function(a){a?this.HA():this.yA();
this.visible=a},fa:function(a){this.visible!==a&&(a?this.HA():this.yA());this.visible=a},HA:function(){ff.a.removeClass(this.element,"hiddenButton");ff.a.addClass(this.element,"visible")},yA:function(){ff.a.removeClass(this.element,"visible");ff.a.addClass(this.element,"hiddenButton")},Br:aa(),Cr:aa(),zr:aa(),HM:function(a){this.ks=g;this.Gs=a;this.toggle&&this.ls&&(this.BC(),this.ls=k)},oy:function(){this.ks&&(this.wg&&this.wg(this.Gs),this.ks=k,this.Gs=j,this.toggle&&(this.ls=g))},wl:function(a){this.active&&
this.visible&&(this.Gq=a.clientX,this.Hq=a.clientY,this.Fm=g,this.Yr(),this.Br(a),this.Gm=k)},Op:function(a,b){a.preventDefault();if(this.Fm){var c=Math.abs(this.Hq-a.clientY);if(8<Math.abs(this.Gq-a.clientX)||8<c)switch(this.Gm=g,this.Wj(),this.Fm=k,this.zr(),b){case "mspointer":this.element.removeEventListener("MSPointerMove",this.op);break;case "pointer":this.element.removeEventListener("pointermove",this.pp);break;case "touch":this.element.removeEventListener("touchmove",this.qp);break;default:this.element.removeEventListener("mousemove",
this.np)}}},xl:function(){this.active&&this.visible&&(this.Hq=this.Gq=0,this.Fm=k,this.Wj(),this.Cr(),this.Gm||this.HM())},tO:function(a){this.wl(a.changedTouches[0]);this.element.addEventListener("touchmove",this.qp)},EC:function(a){a.preventDefault();this.Gm=g;this.Wj()},vO:function(a){this.xl(a);this.element.removeEventListener("touchmove",this.qp)},NL:function(a){this.wl(a);this.element.addEventListener("mousemove",this.np)},ML:function(a){this.Op(a,"mouse")},OL:function(a){this.xl(a);this.element.removeEventListener("mousemove",
this.np)},TL:function(a){this.wl(a);this.element.addEventListener("MSPointerMove",this.op)},SL:function(a){this.Op(a,"mspointer")},UL:function(a){this.xl(a);this.element.removeEventListener("MSPointerMove",this.op)},tM:function(a){this.wl(a);this.element.addEventListener("pointermove",this.pp)},sM:function(a){this.Op(a,"pointer")},uM:function(a){this.xl(a);this.element.removeEventListener("pointermove",this.pp)},rc:function(){if(!this.Wl)switch(this.Wl=g,this.GC){case "mspointer":this.element.addEventListener("MSPointerDown",
this.qx);this.element.addEventListener("MSPointerUp",this.Gi);this.element.addEventListener("MSPointerCancel",this.Gi);break;case "pointer":this.element.addEventListener("pointerdown",this.rx);this.element.addEventListener("pointerup",this.Hi);this.element.addEventListener("pointercancel",this.Hi);break;case "touch":this.element.addEventListener("touchstart",this.sx);this.element.addEventListener("touchend",this.tx);this.element.addEventListener("mousedown",this.gl);this.element.addEventListener("mouseup",
this.eh);break;default:this.element.addEventListener("mousedown",this.gl),this.element.addEventListener("mouseup",this.eh)}},Vb:function(){if(this.Wl)switch(this.Wl=k,this.GC){case "mspointer":this.element.removeEventListener("MSPointerDown",this.qx);this.element.removeEventListener("MSPointerOut",this.Gi);this.element.removeEventListener("MSPointerUp",this.Gi);this.element.removeEventListener("MSPointerCancel",this.Gi);break;case "pointer":this.element.removeEventListener("pointerdown",this.rx);
this.element.removeEventListener("pointerout",this.Hi);this.element.removeEventListener("pointerup",this.Hi);this.element.removeEventListener("pointercancel",this.Hi);break;case "touch":this.element.removeEventListener("touchstart",this.sx);this.element.removeEventListener("touchend",this.tx);this.element.removeEventListener("mousedown",this.gl);this.element.removeEventListener("mouseout",this.eh);this.element.removeEventListener("mouseup",this.eh);break;default:this.element.removeEventListener("mousedown",
this.gl),this.element.removeEventListener("mouseout",this.eh),this.element.removeEventListener("mouseup",this.eh)}},iR:function(a){this.$I=a;this.bQ=a.bind(this)},vA:aa(),CA:aa(),BC:function(){this.toggle&&(this.checked?(this.vA(),this.checked=k):(this.CA(),this.checked=g))},Yr:function(){var a=this.element;this.Ja?(a.style.transitionDelay="0ms",a.style.transitionTimingFunction="ease-in",a.style.transitionDuration="150ms",a.style.WebkitTransitionDelay="0ms",a.style.WebkitTransitionTimingFunction=
"ease-in",a.style.WebkitTransitionDuration="150ms",a.style.msTransitionDelay="0ms",a.style.msTransitionTimingFunction="ease-in",a.style.msTransitionDuration="150ms",a.style.MozTransitionDelay="0ms",a.style.MozTransitionTimingFunction="ease-in",a.style.MozTransitionDuration="150ms",a.style.oTransitionDelay="0ms",a.style.oTransitionTimingFunction="ease-in",a.style.oTransitionDuration="150ms",ff.a.ca(a,1.1,1.1)):(new ef).tween({from:{scale:1},to:{scale:1.1},duration:150,step:function(){ff.a.ca(a,this.scale,
this.scale)},easing:"easeOutSine"})},Wj:function(){var a=this,b=this.element;ff.a.A.isIPAD&&a.getAudioTag!=j&&ff.a.A.Mr(a.getAudioTag());this.Ja?(ff.a.zi(b,this.ZH),ff.a.ca(b,1,1)):(new ef).tween({from:{scale:1.1},to:{scale:1},duration:150,step:function(){ff.a.ca(b,this.scale,this.scale)},easing:"easeOutSine",callback:function(){a.oy()}})},fadeIn:function(a){var b=this.element;ff.a.ca(b,this.fq,this.fq);this.fa(g);if(this.Ja)b.style.transitionProperty="transform, opacity",b.style.transitionTimingFunction=
"cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",b.style.transitionDuration="300ms, 300ms",b.style.transitionDelay=a+"ms,"+a+"ms",b.style.msTransitionProperty="-ms-transform, opacity",b.style.msTransitionTimingFunction="cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",b.style.msTransitionDuration="300ms, 300ms",b.style.msTransitionDelay=a+"ms,"+a+"ms",b.style.MozTransitionProperty="-moz-transform, opacity",b.style.MozTransitionTimingFunction="cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",b.style.MozTransitionDuration=
"300ms, 300ms",b.style.MozTransitionDelay=a+"ms,"+a+"ms",b.style.WebkitTransitionProperty="-webkit-transform, opacity",b.style.WebkitTransitionTimingFunction="cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",b.style.WebkitTransitionDuration="300ms, 300ms",b.style.WebkitTransitionDelay=a+"ms,"+a+"ms",b.style.oTransitionProperty="-o-transform, opacity",b.style.oTransitionTimingFunction="cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",b.style.oTransitionDuration="300ms, 300ms",b.style.oTransitionDelay=
a+"ms,"+a+"ms";else{b.style.opacity=0;ff.a.ca(b,0.5,0.5);var c=setTimeout(function(){clearTimeout(c);(new ef).tween({from:{opacity:0,scale:0.5},to:{opacity:1,scale:1},duration:150,step:function(){b.style.opacity=this.opacity;ff.a.ca(b,this.scale,this.scale)},easing:"easeOutSine"})},a)}},fadeOut:function(a){var b=this.element;if(this.Ja)b.style.transitionDuration="0ms, 0ms",b.style.transitionDelay=a+"ms, "+a+"ms",b.style.WebkitTransitionDuration="0ms, 0ms",b.style.WebkitTransitionDelay=a+"ms, "+a+
"ms",b.style.msTransitionDuration="0ms, 0ms",b.style.msTransitionDelay=a+"ms, "+a+"ms",b.style.MozTransitionDuration="0ms, 0ms",b.style.MozTransitionDelay=a+"ms, "+a+"ms",b.style.oTransitionDuration="0ms, 0ms",b.style.oTransitionDelay=a+"ms, "+a+"ms",ff.a.ca(b,0.5,0.5),this.fa(k);else var c=this,d=setTimeout(function(){clearTimeout(d);c.fa(k)},a)},Ld:function(a){a.appendChild(this.element)},appendChild:function(a){this.element.appendChild(a)},addEventListener:function(a,b){this.element.addEventListener(a,
b)},la:ca("element"),pb:ba("wg"),Te:function(a){this.toggle&&(this.checked=a,this.BC())}});ff.F.hH=gf;var hf=document,jf=q;function kf(a){this.element=a;this.ab=[];this.ij=[];a&&($(".meetPetitDiv span").html(jf.a.v.P("MEET_PETIT")),this.element.addEventListener("click",function(){window.open("http://www.youtube.com/watch?v=no0sGjnqYmw");window.focus()}))}
var lf=jf.F.hH.extend({init:function(a,b,c,d,e,h){this.mC=d?d:"";this.sf=e?e:"";this.gz=h?h:"";this._super(a,b,c);this.sd=f;this.toggle&&(this.sd=hf.createElement("div"),jf.a.addClass(this.sd,"disabledIcon"),jf.a.addClass(this.sd,"hidden"),this.element.appendChild(this.sd))},Im:function(){this._super();jf.a.removeClass(this.element,this.gz);jf.a.addClass(this.element,this.mC)},Lm:function(){this._super();jf.a.removeClass(this.element,this.mC);jf.a.addClass(this.element,this.gz)},Br:function(){jf.a.addClass(this.element,
this.sf)},Cr:function(){jf.a.removeClass(this.element,this.sf)},MQ:function(a){this._super(a);jf.a.removeClass(this.element,this.sf)},zr:function(){jf.a.removeClass(this.element,this.sf)},vA:function(){jf.a.removeClass(this.sd,"visible");jf.a.addClass(this.sd,"hidden");jf.a.removeClass(this.element,"disabled")},CA:function(){jf.a.removeClass(this.sd,"hidden");jf.a.addClass(this.sd,"visible");jf.a.addClass(this.element,"disabled")}}),mf=lf.extend({init:function(a,b){this._super(a,b,k,"levelItem","levelItemPressed",
"levelItemInactive")}}),nf=lf.extend({init:function(a,b,c,d,e,h){this._super(a,b,c,d?"gameBtnBig":"gameBtn",d?"pressedBig":"pressed");e&&jf.a.addClass(a,e);h&&(b=hf.createElement("div"),jf.a.addClass(b,h),a.appendChild(b))}}),of=lf.extend({init:function(a){this._super(a,g,k,"roseBtn")}}),pf=lf.extend({init:function(a,b,c,d,e,h){this._super(a,b,c,d,e,h);this.ab=[]},Yk:function(a,b){var c=hf.createElement("div");jf.a.addClass(c,a);if(b){var d=hf.createElement("div");jf.a.addClass(d,b);c.appendChild(d)}this.element.appendChild(c);
this.ab.push(c)},Hx:aa(),rn:function(a,b,c){var d=1-c;a=this.ij[a];b=this.ij[b];a!==b&&(a.style.opacity=d,a.style.opacity=d,b.style.opacity=c,b.style.opacity=c)},Im:aa(),Lm:aa(),Br:function(){for(var a,b=0;b<this.ab.length;b++)a=this.ab[b],jf.a.addClass(a,this.sf)},Cr:function(){for(var a,b=0;b<this.ab.length;b++)a=this.ab[b],jf.a.removeClass(a,this.sf)},EC:function(a){this._super(a);for(var b=0;b<this.ab.length;b++)a=this.ab[b],jf.a.removeClass(a,this.sf)},zr:function(){for(var a,b=0;b<this.ab.length;b++)a=
this.ab[b],jf.a.removeClass(a,this.sf)}}).extend({init:function(a,b,c,d){this._super(a,g,g,j,"pressed");this.element.style.cursor="pointer";this.Yk("gameBtnNonThemed",b);this.Yk("gameBtnBlueNonThemed",c);this.Yk("gameBtnPurpleNonThemed",d);this.element.removeChild(this.sd);this.element.appendChild(this.sd);this.Hx()},Hx:function(){for(var a,b=0;b<this.ab.length-1;b++)a=this.ab[b],a.style.opacity=0;this.ij=[this.ab[0],this.ab[1],this.ab[0],this.ab[2],this.ab[0],this.ab[1]]}});
kf.prototype.Yk=function(a,b){var c=hf.createElement("div");jf.a.addClass(c,a);if(b){var d=hf.createElement("div");jf.a.addClass(d,b);d.innerHTML=jf.a.v.P("MEET_PETIT");c.appendChild(d)}this.element.appendChild(c);this.ab.push(c)};kf.prototype.la=ca("element");kf.prototype.rn=function(a,b,c){var d=1-c;a=this.ij[a];b=this.ij[b];a!==b&&(a.style.opacity=d,a.style.opacity=d,b.style.opacity=c,b.style.opacity=c)};
kf.prototype.addClass=function(a){for(var b=0;b<this.ab.length;b++)jf.a.addClass(this.ab[b].childNodes[0],a)};jf.F.QP=lf;jf.F.AE=mf;jf.F.Zb=nf;jf.F.IG=of;jf.F.At=pf;jf.F.pG=kf;var qf=document,sf=Modernizr,tf=Tweenable,J=q;function uf(a,b){this.q=a;this.element=b;this.ih=this.fh=this.hh=this.gh=f;this.Gc=[];this.Jb=f;this.Ja=g;this.Ep();sf.csstransitions||(this.Ja=k,this.Jb=new tf,this.Jb.cancel=k)}m=uf.prototype;
m.show=function(){var a=this.element,b=this,c=J.a.va();this.ON(c);this.Ja?(J.a.lc(a,550),J.a.hs(a,"cubic-bezier(0.215, 0.610, 0.355, 1.000)"),J.a.kd(a,"620px","0px")):(this.Jb.cancel=k,this.Jb.tween({from:{translateX:1E3},to:{translateX:620},duration:500,step:function(){b.Jb.cancel||J.a.kd(b.element,this.translateX+"px","0px")},easing:"easeOutQuad"}));this.gh.fadeIn(300);this.Tf.fadeIn(400);this.Uf.fadeIn(400);this.hh.fadeIn(450);this.fh.fadeIn(500);if(!this.q.qz()||c.lastLevelOpen)this.q.ZK()||this.ih.fadeIn(550);
for(a=0;a<this.Gc.length;a++)this.Gc[a].rc()};m.hide=function(a){var b=this.element,c=this;if(this.Ja){for(var d=0;d<this.Gc.length;d++){var e=this.Gc[d];e.fadeOut(500);e.Vb()}J.a.lc(b,550);J.a.hs(b,"cubic-bezier(0.550, 0.055, 0.675, 0.190)");a&&J.a.zi(b,a);J.a.kd(b,"1000px","0px")}else this.Jb.cancel=k,this.Jb.tween({from:{translateX:620},to:{translateX:1E3},duration:500,step:function(){c.Jb.cancel||J.a.kd(c.element,this.translateX+"px","0px")},callback:function(){c.Jb.cancel=k;a&&a()},easing:"easeInQuad"})};
m.BK=function(){var a=this.element;if(this.Ja){for(var b=0;b<this.Gc.length;b++){var c=this.Gc[b];c.fadeOut(500);c.Vb()}J.a.lc(a,0)}else this.Jb.cancel=g;J.a.kd(a,"1000px","0px")};m.ON=function(a){this.q.Sb?(a=a.worlds[this.q.Pa].levels[this.q.Sb-1].score,this.Nz.innerHTML=J.a.v.Ub("LEVEL",[this.q.Pa+1,this.q.Sb]),this.pB.innerHTML=J.a.v.Ub("BEST_SCORE",[a])):(this.Nz.innerHTML="",this.pB.innerHTML="")};
m.Ep=function(){var a=this.element,b=this,c=qf.createElement("div");J.a.addClass(c,"smallText");J.a.addClass(c,"scoreText");c.innerText="Best Score: 1232";a.appendChild(c);this.pB=c;c=qf.createElement("div");c.innerText="Level 1 - 1";J.a.addClass(c,"smallText");J.a.addClass(c,"levelText");a.appendChild(c);this.Nz=c;c=qf.createElement("div");this.gh=new J.F.Zb(c,g,k,g,"gamePlayBtn","gamePlayIcon");this.gh.fa(k);J.a.ca(c,0.5,0.5);this.gh.Ld(a);this.Gc.push(this.gh);c=qf.createElement("div");this.Tf=
new J.F.Zb(c,g,g,k,"gameSoundBtnMenuPanel","gameSoundIcon");this.Tf.fa(k);J.a.ca(c,0.5,0.5);this.Tf.Ld(a);this.Gc.push(this.Tf);var d=qf.createElement("div");this.Uf=new J.F.Zb(d,g,g,k,"gameSoundEffectBtnMenuPanel","gameSoundEffectIcon");this.Uf.fa(k);J.a.ca(d,0.5,0.5);this.Uf.Ld(a);this.Gc.push(this.Uf);J.a.A.isIPAD===g&&(c.style.display="none",d.style.display="none");c=qf.createElement("div");qf.createElement("div");this.hh=new J.F.Zb(c,g,k,g,"gameRestartBtn","gameRestartIcon");this.hh.fa(k);J.a.ca(c,
0.5,0.5);this.hh.Ld(a);this.Gc.push(this.hh);c=qf.createElement("div");this.fh=new J.F.Zb(c,g,k,g,"gameMenuBtn","gameMenuIcon");this.fh.fa(k);J.a.ca(c,0.5,0.5);this.fh.Ld(a);this.Gc.push(this.fh);c=qf.createElement("div");this.ih=new J.F.Zb(c,g,k,g,"gameSkipBtn","gameSkipIcon");this.ih.fa(k);J.a.ca(c,0.5,0.5);this.ih.Ld(a);this.Gc.push(this.ih);if(a=J.a.A.gg())this.Tf.Te(!a),J.a.A.tg(a);if(a=J.a.A.Ch())this.Uf.Te(!a),J.a.A.Ij(a);this.gh.pb(function(){b.q.jn();b.hide()});this.hh.pb(function(){b.hide();
J.a.w(J.a.j.ea,function(){b.q.Ag()},0.25)});this.ih.pb(function(){b.hide();J.a.w(J.a.j.ea,function(){b.q.sA()},0.25)});this.fh.pb(function(){b.hide();b.q.Hb.fadeOut(function(){b.q.zj(k);J.a.w(J.a.j.ea,function(){b.q.Hb.fadeIn()},0.25)})});this.Tf.pb(function(){var a=!J.a.A.gg();J.a.A.tg(a);b.q.mf.Te(!a)});this.Uf.pb(function(){var a=!J.a.A.Ch();J.a.A.Ij(a);b.q.nf.Te(!a)})};J.F.qG=uf;var vf=document,wf=Modernizr,xf=Tweenable,K=q;
function yf(a,b){this.Ja=wf.csstransitions;this.qa=vf.getElementById("levelPickerContainer");this.PA=vf.getElementById("levelPicker");this.element=b;this.q=a;this.oB=vf.getElementById("scoreCanvas");this.Ep()}function zf(a,b){this.wg=function(){a.hide(g,function(){var c=K.a.va();K.a.Wz(a.q.Pa,b.levelDisplayNumber,c);a.q.Hh(b.levelDisplayNumber);a.q.jn()});a.q.Hb.fadeOut()}}function Af(a){this.wg=function(){a.hide();a.q.d.CK();a.q.jn()}}m=yf.prototype;
m.show=function(a,b){var c=this;K.a.xc("http://ace.adoftheyear.com/p13100/tagger_v02.php?project=p13100&tag=1a&channel=[sid=US_ContreJour_Tag_3_1c|cid=1003|]");this.update();K.a.removeClass(this.qa,"hideDelay");this.qa.style.visibility="visible";var d=K.a.va();4===this.q.Pa&&d.lastLevelOpen?(this.PA.style.height="360px",this.jo.style.visibility="",this.ko.style.visibility="",this.kg.element.style.visibility=""):(this.PA.style.height="180px",this.jo.style.visibility="hidden",this.ko.style.visibility=
"hidden",this.kg.element.style.visibility="hidden");this.Bs(g);this.Ja?(a||this.Yr(),b&&K.a.zi(this.Ya.la(),b),this.element.style.opacity=1,this.Ya.la().style.opacity=1):(new xf).tween({from:{opacity:0,scale:0.5},to:{opacity:1,scale:1},duration:500,step:function(){c.element.style.opacity=this.opacity;c.Ya.la().style.opacity=this.opacity;a||K.a.ca(c.element,this.scale,this.scale)},callback:function(){b&&b()},easing:"easeOutSine"});this.Ya.rc();this.kg.visible&&this.kg.rc();for(d=0;d<this.uc.length;d++)this.uc[d].rc()};
m.Wj=function(){K.a.ca(this.element,0.5,0.5)};m.Yr=function(){K.a.ca(this.element,1,1)};
m.hide=function(a,b){var c=this;K.a.va();this.Ja?(a||this.Wj(),b&&K.a.zi(this.Ya.la(),b),K.a.toggleClass(this.qa,"hideDelay"),this.qa.style.visibility="hidden",this.element.style.opacity=0,this.Ya.la().style.opacity=0):(new xf).tween({from:{opacity:1,scale:1},to:{opacity:0,scale:0.5},duration:500,step:function(){c.element.style.opacity=this.opacity;c.Ya.la().style.opacity=this.opacity;a||K.a.ca(c.element,this.scale,this.scale)},callback:function(){c.qa.style.visibility="hidden";b&&b()},easing:"easeOutSine"});
this.Ya.Vb();this.kg.Vb();for(var d=0;d<this.uc.length;d++)this.uc[d].Vb()};
m.Ep=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);var a=this,b=K.a.va().worlds[this.q.Pa].levels,c=vf.createElement("div");this.Ya=new K.F.Zb(c,g,k,k,"gameBackBtn","gameBackIcon");this.Ya.Ld(this.qa);this.Ya.pb((new Af(a)).wg);this.uc=[];for(c=0;c<b.length;c++){var d=b[c];this.uc[c]=new K.F.AE(vf.createElement("div"),d.state===K.a.Tg.qc);this.uc[c].levelDisplayNumber=b[c].levelDisplayNumber;this.uc[c].Ld(this.element);this.nN(this.uc[c],d.levelDisplayNumber);
this.uc[c].pb((new zf(a,this.uc[c])).wg);this.uc[c].getAudioTag=function(){return"chapter"+(K.F.q.Pa+1)}}this.kg=new K.F.IG(vf.createElement("div"));this.kg.Ld(this.element);this.kg.pb(function(){a.hide(g,function(){var b=K.a.va();K.a.Wz(a.q.Pa,0,b);a.q.Tz();a.q.jn()});a.q.Hb.fadeOut()});this.jo=vf.createElement("div");K.a.addClass(this.jo,"venzel");this.element.appendChild(this.jo);this.ko=vf.createElement("div");K.a.addClass(this.ko,"venzel2");this.element.appendChild(this.ko)};
m.Bs=function(a){a?($(".menuHeader").css({visibility:"visible"}),$(".menuFooter").css({visibility:"visible"}),this.oB.style.visibility="visible",this.q.mf.la().style.visibility="visible",this.q.nf.la().style.visibility="visible"):($(".menuHeader").css({visibility:"hidden"}),$(".menuFooter").css({visibility:"hidden"}),this.oB.style.visibility="hidden",this.q.mf.la().style.visibility="hidden",this.q.nf.la().style.visibility="hidden")};
m.update=function(){for(var a=K.a.va().worlds[this.q.Pa].levels,b,c,d,e=0;e<this.uc.length;e++){b=this.uc[e];c=b.iL.childNodes;d=a[e];b.setActive(d.state===K.a.Tg.qc);for(d=c.length-1;0<=d;d--)b=c[d],K.a.addClass(b,"levelItemLightInactive"),2-d<a[e].stars&&K.a.removeClass(b,"levelItemLightInactive")}};
m.nN=function(a,b){var c=vf.createElement("div");K.a.addClass(c,"levelItemLightsContainer");a.appendChild(c);a.iL=c;for(var d=0;3>d;d++){var e=vf.createElement("div");K.a.addClass(e,"levelItemLight");K.a.addClass(e,"levelItemLightInactive");c.appendChild(e)}e=vf.createElement("div");K.a.addClass(e,"levelItemInner");a.appendChild(e);c=vf.createElement("div");K.a.addClass(c,"levelItemDigit");d=vf.createElement("div");K.a.addClass(d,"levelItemDigitContainer");e.appendChild(d);if(9>=b)K.a.addClass(c,
"level"+b),d.appendChild(c),c.style.marginLeft="15px";else{var e=Math.floor(b/10),h=b%10,n=vf.createElement("div");K.a.addClass(n,"levelItemDigit");c.style.styleFloat="left";n.style.styleFloat="left";c.style.cssFloat="left";n.style.cssFloat="left";K.a.addClass(c,"level"+e);K.a.addClass(n,"level"+h);d.appendChild(c);d.appendChild(n)}};K.F.CE=yf;K.ql.GG=4;
var A=q,Bf=Box2D.Common.Math.b2Vec2,Cf=Class.extend({init:function(a){this.d=a;this.uA=0;this.Hm=k;this.transform=new A.a.Ga;this.transform.s(180,250);this.transform.p(0,0);this.body=new A.a.I(A.a.i.wu);this.k=new A.b.WD(this.transform);this.Lb=new A.a.I(A.a.i.Cu);this.bm=new A.a.I(A.a.i.Iu,k,g);this.bm.alpha=0.4;a="black";this.d.Ra()?(this.bm.alpha=0.45,this.EK=new A.a.Q(26,70,99),a="rgb(29,166,224)"):this.d.tb()&&(a=A.b.HeroBodyClip.Cw);this.W=new A.b.rE(a);this.W.p(0,0);this.W.pg=k;this.W.speed=
0;this.W.dp=this.transform.position.Copy();this.cz=new A.a.I(A.a.i.Bu);this.cz.alpha=0.4;this.K=new A.b.uw(j,j,A.a.i.vi,this.transform);this.K.Mc=0;this.K.ta=0;this.K.xb=0.1},update:function(a){this.K.update(a);this.W.update(a);this.k.update(a)},h:function(a){var b=a.C;this.d.Ra()?this.bm.fJ(b,this.transform,this.EK):this.bm.h(b,this.transform);this.K.h(a.C);this.Lb.h(b,this.transform);this.W.h(a);this.body.h(b,this.transform);this.cz.h(b,this.transform);this.k.h(b);this.Cf&&(this.Cf.h(b),b.save(),
A.a.e.zb(b,this.Cf.transform),this.Gn.h(b),b.restore())},qN:function(a,b){this.W.uB(a);this.W.speed=b},xL:function(){this.vn(Cf.xE);var a=this;A.a.w(A.a.j.o,function(){a.zL()},0.7)},zL:function(){this.vn(Cf.LG);var a=this,b,c=0.5;this.Hm?(b=function(){a.wL()},c=0.7):b=function(){a.Yz()};A.a.w(A.a.j.o,b,c)},Yz:function(){this.vn(Cf.vG);var a=this;A.a.w(A.a.j.o,function(){a.ZN()},0.5)},wL:function(){this.vn(Cf.tE);var a=this;A.a.w(A.a.j.o,function(){a.Yz()},0.5)},ZN:function(){var a=this;3===this.uA||
this.Hm?(a.k.Qc("smile",g,function(){a.k.yf()}),A.a.A.aa(A.a.J.n.Zq,75)):a.k.Qc("blink",g,function(){a.k.yf()})},vn:function(a){this.k.we=Math.atan2(a.y,a.x);this.k.Fg(a.Length())},An:function(a,b){this.uA=a;this.Hm=b;this.K.ta=2;var c=this;A.a.w(A.a.j.o,function(){A.a.$a(A.a.j.o,function(){c.aO();c.K.ta=0;c.qN(Math.PI,1)},function(a,b){var h=1-b/a,n=A.a.e.mb(0,1,h),h=A.a.e.mb(0,2,h);c.transform.p(n,n);c.W.p(h,h)},0.3)},0.5)},aO:function(){var a=this;A.a.w(A.a.j.o,function(){a.xL()},0.5);a.Hm&&A.a.w(A.a.j.o,
function(){a.MN()},1)},am:function(){this.K.ta=0},MN:function(){this.Cf=new A.b.Rk(A.a.i.Lu);this.Cf.s(70,80);this.Cf.p(0,0);this.Cf.Ua(A.a.e.Z(170));this.Gn=new A.a.$b(A.a.v.P("IMPROVED_RESULT"),28,45);this.Gn.color="rgb(255,255,255)";this.Gn.s(61,75);this.Gn.Ua(A.a.e.Z(-10.8));A.a.VL(this.Cf);A.a.WL(this.Cf)}});Cf.xE=new Bf(1,-1);Cf.LG=new Bf(1,-0.4);Cf.vG=new Bf(0,0);Cf.tE=new Bf(-1,-1);A.b.VD=Cf;
var Df=window,Ef=document,Ff=Modernizr,Gf=Tweenable,L=q,Hf=Class.extend({init:function(a){this.q=a;this.qa=Ef.getElementById("letterBoxContainer");this.cf=Ef.getElementById("letterBoxTop");this.mg=Ef.getElementById("letterBoxBottom");this.Ja=g;this.Jb=j;Ff.csstransitions||(this.Ja=k,this.Jb=new Gf);this.$H=this.yr.bind(this)},show:function(){if(this.Ja)this.qa.style.visibility="visible",L.a.lc(this.cf,550),L.a.ld(this.cf,100),L.a.lc(this.mg,550),L.a.ld(this.mg,100),L.a.zi(this.cf,this.$H),L.a.kd(this.cf,
"0px","0px"),L.a.kd(this.mg,"0px","0px");else{var a=this;this.qa.style.visibility="visible";this.Jb.tween({from:{letterBox:-75,opacity:0},to:{letterBox:0,opacity:1},duration:550,step:function(){L.a.kd(a.cf,0,this.letterBox+"px");L.a.kd(a.mg,0,-this.letterBox+"px")},easing:"easeOutSine",callback:function(){a.yr()}})}},reset:function(){L.a.lc(this.cf,0);L.a.ld(this.cf,0);L.a.lc(this.mg,0);L.a.ld(this.mg,0);L.a.lc(this.qa,0);L.a.ld(this.qa,0);L.a.kd(this.cf,"0px","-75px");L.a.kd(this.mg,"0px","75px");
this.qa.style.visibility="hidden"},yr:aa()}),If=Hf.extend({init:function(a){this._super(a);this.qe=this.createElement("scoreShareContainer",this.qa);this.qe.style.opacity=0;this.qe.style.visibility="visible";this.pI();this.JI();this.KI()},createElement:function(a,b){var c=Ef.getElementById(a);c||(c=Ef.createElement("div"),c.id=a,b.appendChild(c));return c},pI:function(){var a=this,b=this.createElement("finalBackBtn",this.qa);this.Ya=new L.F.Zb(b,g,k,k,"gameBackBtn","gameBackIcon");this.Ya.pb(function(){a.Ya.Vb();
L.zd||a.cq.Vb();a.q.Hb.fadeOut(function(){a.reset();var b=Ef.getElementById("textCanvas");b&&(b.parentElement.removeChild(b),b=f);a.q.zj(k);L.a.w(L.a.j.ea,function(){a.q.Hb.fadeIn()},0.25)})});this.Ya.la().style.opacity=0;this.Ya.la().style.visibility="visible"},JI:function(){var a=this;if(!L.zd){var b=this.createElement("scoreShareBtn",this.qe);this.cq=new L.F.Zb(b,g,k,k,"gameFacebookBtn","gameFacebookIcon");this.cq.pb(function(){a.FN()})}},KI:function(){this.qn=this.createElement("scoreText",this.qe);
this.gk=this.createElement("scoreShareText",this.qe);this.gk.innerHTML=L.a.v.P("FINAL_SCORE_SHARE");L.a.addClass(this.qn,"mediumText");L.a.addClass(this.gk,"smallText");L.zd?(L.a.addClass(this.qn,"facebookScoreOffline"),L.a.addClass(this.gk,"facebookShareOffline")):(L.a.addClass(this.qn,"facebookScore"),L.a.addClass(this.gk,"facebookShare"))},reset:function(){this._super();this.Ya.Vb();this.Ya.la().style.opacity=0;this.Ya.la().style.visibility="hidden";this.qe.style.opacity=0;this.qe.style.visibility=
"hidden"},yr:function(){this.kN();this.Ja?(this.Ya.la().style.opacity=1,this.qe.style.opacity=1):(this.ky(this.Ya.la()),this.ky(this.qe));L.zd||this.cq.rc();this.Ya.rc()},ky:function(a){(new Gf).tween({from:{opacity:0},to:{opacity:1},duration:500,step:function(){a.style.opacity=this.opacity},easing:"easeOutSine"})},kN:function(){var a=L.a.va();this.qn.innerHTML=L.a.v.Ub("TOTAL",[L.a.wy(a.xk())])},FN:function(){if(!L.zd){var a=L.a.va(),b=encodeURIComponent("contrejour.webs.pm"),c=encodeURIComponent("http://contrejour.webs.pm/img/icon144x144.png"),
d=encodeURIComponent("http://www.contrejour.ie/complete.html"),a=encodeURIComponent(L.a.v.Ub("FACEBOOK_SCORE_SHARE_MESSAGE",[L.a.wy(a.xk())])),b="https://www.facebook.com/dialog/feed?app_id=427821790613350&link="+b+"&picture="+c+"&name="+encodeURIComponent("Contre Jour")+"&caption="+a+"&description="+encodeURIComponent("Contre Jour is now on the web with a beautiful multi-touch world for IE10 users. Play it now!")+"&display=popup&redirect_uri="+d;Df.open(b,"_blank","width=580,height=400,menubar=0")}}});
L.F.zE=Hf;L.F.kD=If;var Jf=Box2D,Kf=q,Lf=Class.extend({init:function(a,b){this.ia=a;this.Qh=b}});Lf.Ky=function(a,b,c){b=Math.max(Math.ceil(a/b),c);return new Lf(b,a/b)};Lf.nj=function(a,b,c,d){c=Lf.Ky(Jf.Common.Math.b2Math.SubtractVV(b,a).Length(),c,d);return new Mf(c.ia,c.Qh,a,b)};
var Mf=Lf.extend({init:function(a,b,c,d){this._super(a,b);this.JA=Jf.Common.Math.b2Math.SubtractVV(d,c);this.JA.Multiply(1/this.ia);this.start=c;this.end=d},Iy:function(a){var b=this.start.Copy(),c=this.JA.Copy();c.Multiply(a);return Jf.Common.Math.b2Math.AddVV(b,c)}});Kf.a.Ro=Lf;
var Nf=q,Of=Box2D.Common.Math.b2Vec2,Pf=Class.extend({init:function(a,b,c){this.start=a;this.qd=b;this.end=c;this.rp=-1;this.precision=1E-10},vJ:function(a,b){return 0!==a?a:b},length:function(){-1===this.rp&&(this.rp=this.nK(1));return this.rp},fK:function(a){var b=1-a;return new Of(this.start.x*b*b+2*this.qd.x*a*b+this.end.x*a*a,this.start.y*b*b+2*this.qd.y*a*b+this.end.y*a*a)},nK:function(a){var b=this.qd.x-this.start.x,c=this.qd.y-this.start.y,d=this.end.x-this.qd.x-b,e=this.end.y-this.qd.y-c,
h=4*(b*b+c*c),b=8*(b*d+c*e),d=4*(d*d+e*e);if(0===d){if(0===b)return a*=Math.sqrt(h);a=2/3*(b*a+h)*Math.sqrt(b*a+h)/b;h=2/3*h*Math.sqrt(h)/b;return a-h}var n=Math.sqrt(d*a*a+b*a+h),e=Math.sqrt(h),c=Math.sqrt(d);a=(0.5*b+d*a)/c+n<this.precision?0.25*(2*d*a+b)*n/d:0.25*(2*d*a+b)*n/d+0.5*Math.log((0.5*b+d*a)/c+n)/c*(h-0.25*b*b/d);h=0.5*b/c+e<this.precision?0.25*b*e/d:0.25*b*e/d+0.5*Math.log(0.5*b/c+e)/c*(h-0.25*b*b/d);return a-h},sK:function(a,b){a=Math.abs(a);var c=b,d=[],e=this.length();if(c>e)return d;
for(var c=0>c?Nf.a.e.en(c,a)+a:Nf.a.e.en(c,a),h=this.qd.x-this.start.x,n=this.qd.y-this.start.y,p=this.end.x-this.qd.x-h,r=this.end.y-this.qd.y-n,v=4*(h*h+n*n),h=8*(h*p+n*r),p=4*(p*p+r*r),E,G,r=c/e,n=v-0.25*h*h/p,ea=0.25*h*Math.sqrt(v)/p,Ua=0.5*h/Math.sqrt(p)+Math.sqrt(v),Aa=Math.sqrt(v),ab=Math.sqrt(p),ib;c<=e;){var Nb=20;if(0==p)if(0==h){do E=Aa*r,G=this.uJ(Math.sqrt(Math.abs(p*r*r+h*r+v)),this.precision),r-=(E-c)/G;while(Math.abs(E-c)>this.precision&&Nb--)}else{do E=2/3*((h*r+v)*Math.sqrt(Math.abs(h*
r+v))-v*Aa)/h,G=this.uJ(Math.sqrt(Math.abs(p*r*r+h*r+v)),this.precision),r-=(E-c)/G;while(Math.abs(E-c)>this.precision&&Nb--)}else{do G=Math.sqrt(Math.abs(p*r*r+h*r+v)),E=(0.5*h+p*r)/ab+G,ib=0.25*(2*p*r+h)*G/p,E=E<this.precision?ib:ib+0.5*Math.log((0.5*h+p*r)/ab+G)/ab*n,ib=Ua<this.precision?ea:ea+0.5*Math.log(0.5*h/ab+Aa)/ab*n,E-=ib,G=this.vJ(G,this.precision),r-=(E-c)/G;while(Math.abs(E-c)>this.precision&&Nb--)}d.push(r);c+=a}return d}});Nf.a.qD=Pf;
var Qf=q,Rf=Qf.b.bb.extend({init:function(){this._super(j,j);this.$Q=Qf.b.De;this.opacity=1;this.Fe=this.Ma=this.Va=this.frame=0;this.visible=g;this.transform.ds(this.transform)}});Qf.b.tw=Rf;
var Sf=q,Tf=Sf.b.bb.extend({init:function(a,b,c,d,e){this._super(a,b,d,e);this.r=[];this.V=new Sf.a.I(c);this.Zd=[];this.paused=k;this.alpha=1;this.kJ=g},update:function(a){if(!this.paused){for(var b=[],c=j,d=0;d<this.r.length;d++)c=this.r[d],this.ue(c,a),c.visible||(b.push(d),this.Zd.push(c));for(d=b.length-1;0<=d;d--)this.r.splice(b[d],1)}},ue:aa(),h:function(a){if(!this.d||!this.d.ic||!this.kJ)for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,
this.V.h(a.$,b.transform)},Wn:function(){return this.V.pd.frames},Jd:function(){return this.Kf(Math.floor(Math.random()*this.V.pd.frames))},Xo:function(a){for(var b=0;b<a;b++)this.Jd()},Kf:function(a){var b=this.Ox();this.r.push(b);b.frame=a;return b},Vk:function(){if(0<this.Zd.length){var a=this.Zd[this.Zd.length-1];this.vB(a);return a}return this.Jd()},dR:function(a){a=this.r.indexOf(a);0<=a&&this.r.splice(a,1)},vB:function(a){a.visible||(this.r.push(a),this.Zd.splice(this.Zd.length-1,1),a.visible=
g,this.FA(a))},rN:function(a,b){for(var c=0;c<this.r.length;c++)this.r[c].transform.p(a,b)},FA:aa(),Wk:function(a){var b=this.Jd();b.kc(a);return b},Ox:function(){return new Sf.b.tw(this)},IN:function(){for(;0<this.Zd.length;)this.vB(this.Zd[this.Zd.length-1])},zK:function(){for(var a=0;a<this.r.length;a++)this.r[a].visible=k},Bd:ba("alpha")}),Uf=Tf.extend({h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a.C,b.transform)}}),
Vf=Tf.extend({init:function(a,b,c,d,e){this._super(a,b,c,d,e);this.sc=this.ob=0},Fy:function(a){return a*this.sc},Kf:function(a){a=this._super(a);this.sc=2*(1/this.r.length)*Math.PI;return a},fs:function(a){if(this.ob!==a){this.ob=a;var b=this.r.length,c,d,e;for(c=0;c<b;c++)d=this.Fy(c),e=this.r[c],e.transform.rotation=-d+90*Math.PI/180,Sf.a.g.qb(a,-d,e.transform.position)}},h:function(a){if(this.visible)for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=
b.frame,this.V.h(a,b.transform)}}),Wf=Tf.extend({init:function(a,b,c,d,e){this._super(a,b,c,d,e);this.SA=0},IK:function(){this.SA++},TI:function(){this.SA--}});Sf.b.De=Tf;Sf.b.mt=Uf;Sf.b.aE=Vf;Sf.b.nE=Wf;
var Xf=q,Yf=Box2D.Common.Math.b2Vec2,bg=Xf.b.bb.extend({init:function(a,b,c,d,e){this._super(c,b,d,a);this.body.SetUserData(this);this.K=new ag(c,b,e?e:Xf.a.i.vi,d);this.K.Mc=0;this.K.ta=0;this.ny=k},update:function(a){this.K.update(a)},h:function(a){this.K.h(a.C)},fa:function(a){this.visible=a;this.K.visible=a},An:function(){this.K.Mc=0;this.K.ta=1},am:function(){this.K.ta=0},dd:function(a){if(a&&!this.ny){var b=a.GetUserData();if(b&&b.fm()){a=this.d.entities.elements;for(var c=0;c<a.length;c++)a[c]instanceof
Xf.b.SnotBodyClip&&a[c].bn();this.d.Kd&&this.d.Kd.Yh();this.ny=g;var d=this;Xf.a.w(Xf.a.j.o,function(){d.kh(b)},0)}}},kh:function(a){if(a){var b=this.body.GetPosition();a.Ll(b,0.3,g,"close");a.dk(0,0.5);this.am()}}}),cg=bg.extend({init:function(a,b,c,d,e){this._super(a,b,c,d,e);this.d.rh=this}});bg.ow=5;
var ag=Xf.b.De.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.visible=k;this.ia=[];this.ta=this.Mc=1;this.xb=0.05;b=b=j;for(a=0;a<bg.ow;a++)b=this.Jd(),b=new dg(this.d,b,j,d.position,2*Math.PI/bg.ow*a),this.ia.push(b)},update:function(a){for(var b=0;b<this.ia.length;b++)this.ia[b].update(a);this._super(a);Xf.a.e.Ud(this.Mc,this.ta)||(this.Mc=Xf.a.e.ba(this.Mc,this.ta,30*this.xb*a.B));this.visible=0<this.Mc},ue:function(a,b){this._super(a,b);a.p(this.Mc,this.Mc)},h:function(a){if(this.visible)for(var b=
0;b<this.r.length;b++){var c=this.r[b];this.V.alpha=c.opacity;this.V.h(a,c.transform,"lighter")}},jR:function(a){for(var b=0;b<this.ia.length;b++)this.ia[b].Ig=a}}),dg=Xf.b.bb.extend({init:function(a,b,c,d,e){this.d=a;this.parent=this.target=c;this.za=d.Copy();this.clip=b;this.Ig=Xf.a.e.u(30,50);this.sc=Xf.a.e.u(0.12,0.2);this.direction=e;this.clip.kc(d);this.Vy=k;this.vg=new Yf},update:function(a){a=Math.min(a.B,1/30);var b=this.Y(),b=Xf.a.g.Aa(b,this.clip.Ea()),b=Math.atan2(b.y,b.x),b=Xf.a.e.Cd(b,
this.direction-Math.PI);this.direction=Xf.a.e.ba(this.direction,b,30*this.sc*a);Xf.a.g.qb(this.Ig*a,this.direction,this.vg);this.clip.kc(Xf.a.g.cc(this.clip.Ea(),this.vg))},Y:function(){return this.target?this.target.el():this.za}}),eg=dg.extend({init:function(a,b,c,d,e){this._super(a,b,c,d,e);this.Rn=Xf.a.e.u(1,2);this.Ni=k;this.QH=0.7;this.opacity=1},update:function(a){this._super(a);this.Ni&&(this.Rn-=a.B,a=Xf.a.g.Aa(this.clip.Ea(),this.Y()).Length(),this.clip.opacity=50>a?0.02*a:1,0>=this.Rn&&
a<=eg.QE?(this.remove(),0<this.clip.opacity&&this.target.Ai()):0>=this.Rn&&(this.sc+=0.0050,this.Ig+=1))},Fx:function(){this.Ni=g;this.Ig=Xf.a.e.u(150,250);this.sc=Xf.a.e.u(0.05,0.1);this.target=this.d.OJ();this.QH=1.2},remove:function(){this.Vy=g;this.clip.visible=k}});eg.QE=10;
var fg=Xf.b.bb.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.ia=[];this.Ni=k;this.body.SetUserData(this);a=this.target=j;for(b=0;b<fg.gt;b++)a=new eg(this.d,this.d.Eb.Jd(),this,Xf.a.H.Sg(this.body.GetPosition()),2*Math.PI/fg.gt*b),this.ia.push(a);this.yp=new Xf.a.Yb},update:function(a){for(var b=[],c=j,d=0;d<this.ia.length;d++)c=this.ia[d],c.update(a),c.Vy&&b.push(d);for(d=b.length-1;0<=d;d--)this.ia.splice(b[d],1);this._super(a)},dd:function(a){a=a.GetUserData();if(!this.Ni&&a&&a.fm()){this.Ni=
g;this.d.q.score.stars++;Xf.a.A.aa(Xf.a.J.random(Xf.a.J.YH),50);this.yp.yb();for(a=0;a<this.ia.length;a++)this.ia[a].Fx()}}});fg.gt=5;fg.qP="EnergyCollectedEvent";Xf.b.EndLevelBodyClip=cg;Xf.b.BG=bg;Xf.b.uw=ag;Xf.b.EnergyBodyClip=fg;Xf.b.ht=eg;
var gg=q,hg=0,ig=[gg.a.J.n.ok,gg.a.J.n.vC],jg=Box2D.Common.Math.b2Vec2,kg=gg.b.BG.extend({init:function(a,b,c,d){var e=(a.color||"0").toString();this._super(a,b,c,d,!c.Ra()&&"0"===e?gg.a.i.iw:gg.a.i.kw);this.body&&this.body.SetUserData(this);this.K.Mc=kg.Ao;this.K.ta=kg.Ao;this.K.xb=0.2;this.visible=g;this.xj=a.limitSpeed;this.lp=new lg(c,this.body,gg.a.i.jw,d,this);this.lp.visible=g;this.Ig=gg.a.e.u(20,35);this.pk=[];this.ho=new gg.a.Yb;(this.di=this.d.rK(e))?this.di.di=this:this.d.IM(this,e);this.qA=
new jg},update:function(a){this._super(a);this.lp.update(a)},h:function(a){a=a.C;this.K.h(a);this.lp.h(a)},dd:function(a,b){if(!b.GetFixtureA().IsSensor()||!b.GetFixtureB().IsSensor()){var c=a.GetUserData();if(0>this.wC(c)&&c.sp()){this.pk.push(c);gg.a.A.aa(ig[hg],50);hg=(hg+1)%ig.length;c.Af=k;c.ok(this);var d=a.GetLinearVelocity().Length(),d=6.67<d?6.67*kg.xi/d:kg.xi,d=Math.max(d,0.01);c.dk(0,d);var e=this;gg.a.w(gg.a.j.o,function(){e.move(c)},d)}}},Km:function(a){a=a.GetUserData();a=this.wC(a);
0<=a&&this.pk.splice(a,1)},wC:function(a){for(var b=0;b<this.pk.length;b++)if(a===this.pk[b])return b;return-1},nO:function(a){this.pk.push(a)},move:function(a){this.di.nO(a);a.body.SetPosition(this.di.body.GetPosition());a.Af=g;this.xj&&(gg.a.g.xp(a.body.GetLinearVelocity(),kg.ME,this.qA),a.body.SetLinearVelocity(this.qA));this.UC();this.di.UC();a.Rw();var b=Math.min(kg.xi,10*(kg.xi/a.body.GetLinearVelocity().Length()));a.dk(1,b)},UC:function(){var a=this;a.K.ta=kg.RE;gg.a.w(gg.a.j.o,function(){a.K.ta=
kg.Ao},kg.xi);a.ho.yb()}});kg.xi=0.1;kg.ME=23.33;kg.Ao=1.2;kg.RE=0.2;var lg=gg.b.De.extend({init:function(a,b,c,d,e){this._super(a,b,c,d);this.K=e;this.LA=5;for(a=0;a<this.LA;a++)this.Jd()},update:function(a){this._super(a);for(a=0;a<this.LA;a++){var b=this.K.K.r[a],c=this.r[a];c.transform.position=b.transform.position;c.transform.scale=b.transform.scale}},h:function(a){if(this.d.aP)for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.PH,this.V.frame=b.frame,this.V.h(a,b.transform)}});
gg.b.TeleportBodyClip=kg;var M=q;function mg(a,b){this.value=a;this.DM=b}var ng=Box2D.Common.Math.b2Vec2;mg.prototype.Vd=function(){return this.value+M.a.e.mb(-1,1,Math.random())*this.DM};
var og=M.b.De.extend({init:function(a,b,c,d){this._super(a,b,c,j,d);this.speed=new mg(0,0);this.angle=new mg(0,0);this.Yd=new mg(0,0);this.ve=new mg(0,0);this.Fe=new mg(0,0);this.ed=new mg(1,0);this.Jg=new mg(1,0);this.JQ=new ng;this.dh=new ng(-Infinity,Infinity);this.gi=new ng(Infinity,-Infinity)},Lc:function(a){var b=this.speed.Vd(),c=this.angle.Vd();a.Va=-Math.cos(c)*b;a.Ma=Math.sin(c)*b;a.opacity=this.Jg.Vd();a.Fe=this.Fe.Vd();b=this.ed.Vd();a.p(b,b);a.s(this.Yd.Vd(),this.ve.Vd())},Fp:function(a){for(;this.r.length<
a;){var b=new ng(this.Yd.Vd(),this.ve.Vd());this.Wk(b)}},sI:function(a){for(;this.r.length<a;){var b=new ng(M.a.e.u(this.dh.x,this.gi.x),M.a.e.u(this.dh.y,this.gi.y));this.Wk(b)}},Ox:function(){var a=new M.b.tw(this);this.Lc(a);return a},ue:function(a,b){a.Pw(a.Va*b.B,a.Ma*b.B);a.BH(a.Fe);var c=a.transform.position.x,d=a.transform.position.y;(c>this.gi.x||d<this.gi.y||c<this.dh.x||d>this.dh.y)&&this.Lc(a)},FA:function(a){this.Lc(a)}}),pg=og.extend({init:function(a,b,c){this._super(a,b,c||M.a.i.Du);
this.ua(M.a.Wa.rG);this.Yd=new mg(a.width/2,a.width/2);this.ve=new mg(0,0);this.speed=new mg(-1,0);this.angle=new mg(M.a.e.Z(-70),M.a.e.Z(15));this.Fe=new mg(0,0.1);this.ed=new mg(1,0.6);this.dh=new ng(0,a.height+20);this.gi=new ng(a.width+20,0);this.ik=20},Lc:function(a){this._super(a);var b=this.ik*a.transform.scale.x;a.Va*=b;a.Ma*=b}}),qg=pg.extend({init:function(a,b){this._super(a,b);this.ed=new mg(0.5,0.2);this.Jg=new mg(0.5,0.2)}}),rg=pg.extend({init:function(a,b){this._super(a,b,M.a.i.$v);
this.ua(M.a.Wa.QG);this.Fe=new mg(0,0);this.ed=new mg(1.75,0.75);this.ik=13}}),sg=rg.extend({init:function(a,b){this._super(a,b);this.ed=new mg(1,0.4);this.Jg=new mg(0.99609375,0)}}),tg=og.extend({init:function(a,b){this._super(a,b,M.a.i.Ko);this.ua(M.a.Wa.iE);this.angle=new mg(M.a.e.Z(270),0);this.speed=new mg(-40,-20);this.Fe=new mg(0,0);this.ed=new mg(1,0.3);this.Jg=new mg(0.784,0.196)},ue:function(a,b){this._super(a,b);var c=-b.B/2;a.Qw(c,c);0>=a.transform.scale.x&&(a.visible=k)}}),ug=M.b.De.extend({init:function(a,
b){this._super(a,b,M.a.i.Xt);this.ua(M.a.Wa.ED);this.Zo=M.a.e.u(0.0015,0.0025)},ue:function(a,b){this._super(b);var c=3*b.B*Math.min(a.opacity,0.3);a.Pw(a.Va*c,a.Ma*c);a.opacity-=this.Zo;0>=a.opacity&&(a.visible=k)},h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a.C,b.transform)},yH:function(a,b,c,d){var e=this.Vk();e.visible=g;b.Multiply(30);b.y+=25;e.kc(b);b=M.a.e.u(0.5,1.5);e.p(b,b);e.opacity=M.a.e.u(0.1*d,0.2*d);e.Va=
a.x*this.ja*M.a.e.u(0.2,0.4);e.Ma=-Math.min(M.a.e.u(5,20)*c,40)}}),vg=og.extend({init:function(a,b){this._super(a,b,M.a.i.Lk);this.speed=new mg(-250,80);this.ed=new mg(2,1);this.Ih=1;this.Ph=0;this.cN=g;this.xb=0},Lc:function(a){this._super(a);a.opacity=0.033;a.tC=this},ue:function(a,b){if(a.visible){this._super(a,b);var c=this.Ph*b.B;a.tC?(a.opacity=M.a.e.ba(a.opacity,this.Ih,0.25*this.Ih),a.opacity>=this.Ih&&(a.tC=j)):a.opacity-=c;c=a.transform.scale.x+this.xb*b.B;a.p(c,c);if(0>=a.opacity||0>this.xb&&
(2>a.transform.scale.x||0.588<a.opacity))a.visible=k,this.Lc(a)}},h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a,b.transform)}}),wg=og.extend({init:function(a,b){this._super(a,b,M.a.i.Ko);this.ua(M.a.Wa.hD);this.Yd=new mg(a.width/2,a.width/2);this.ve=new mg(a.height,0);this.speed=new mg(-0.5,0);this.angle=new mg(M.a.e.Z(90),M.a.e.Z(15));this.Fe=new mg(0,0);this.ed=new mg(1.3,1);this.dh=new ng(0,a.height);this.gi=new ng(a.width,
0)},Lc:function(a){this._super(a);a.opacity=0.157+0.078*a.transform.scale.x;var b=20*a.transform.scale.x;a.Va*=b;a.Ma*=b}});M.b.Na=mg;M.b.uo=og;M.b.rD=pg;M.b.mH=qg;M.b.$G=rg;M.b.oH=sg;M.b.oE=tg;M.b.Dw=vg;M.b.sD=wg;M.b.GD=ug;var xg=Box2D,N=q;function yg(a,b,c){this.QD=0.2;this.kt=0.3;this.angle=0;this.sc=b;this.JH=c;this.bc=4;this.position=new zg(a,0);this.kB=new zg;this.length=a;this.Uk=0}
var zg=xg.Common.Math.b2Vec2,Ag=xg.Dynamics.b2Body,Fb=N.b.Nk.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.ua(N.a.Wa.vo);this.d.X=this;this.body.SetUserData(this);this.body.SetSleepingAllowed(k);N.a.g.cs(this.body,Fb.nt);this.body.SetType(Ag.b2_staticBody);N.a.g.iN(this.body);this.vx=g;this.MM=this.df=this.nz=k;this.hq=j;this.Ml=k;this.jj=0;this.SM=k;this.Xa=25/30;this.Pj=new zg;this.Sf=0;this.ta=new zg;this.Tn=Fb.vw;this.km=0;this.Hg=k;this.Bn=0;this.Yl=k;this.Bf=0;this.Af=g;this.ss=k;
this.Mb=[];this.d.Ra()?a=new N.b.po(this.d,this.body,new N.a.Q(29,166,224,1)):(a=new Bg(this.d.tb()?Fb.Cw:"black"),a.dp=this.transform.position);a.ua(N.a.Wa.dH);this.Mb.push(a);this.d.entities.add(a);this.XH=new N.a.I(N.a.i.Lo);this.Lb=new Cg(this);this.cm=new Dg(this);this.k=new N.b.qt(c,this.body);this.K=new Eg(this.d,this.body,N.a.i.vi,this.transform);this.K.Mc=0;this.K.ta=0;this.K.xb=0.1;this.K.ua(8);this.d.entities.add(this.K);this.d.Xk(new N.b.Ok(this,5));this.ag=this.On=new N.a.Yb;this.fa(k);
this.nA=new zg;this.jC=new zg},update:function(a){this._super(a);this.Ml&&(N.a.g.nc(this.body.GetPosition(),this.hq,this.jj,this.jC),this.body.SetPosition(this.jC),this._super(a),N.a.g.Nf(this.hq,this.body.GetPosition())&&(this.Ml=k,this.my()));this.cm.update(a);if(this.Nm=this.rz())this.uj=a.now;this.body.SetAngularDamping(0.3<a.now-this.uj?0.5:0);this.yO(a);this.OC(a);var b=0<this.Bf?Fb.IE:Fb.JE,c=this.body.GetLinearVelocity(),d=Math.atan2(c.y,c.x),e=this.ss?0:c.Length();e>b&&(e=b,N.a.g.qb(b,d,
this.nA),this.body.SetLinearVelocity(this.nA));this.k.FB(this.body.GetLinearVelocity());this.k.update(a);if(this.d.Ra())for(b=this.Mb.length-1;0<b;b--)d=this.Mb[b],1>=d.length()&&this.d.entities.remove(this.Mb.pop());else b=this.Mb[0],b.dp=this.transform.position,b.pg=this.Nm,b.uB(d),b.speed=e,b.RC=this.Hg?0.2:1;this.Pj.x=c.x;this.Pj.y=c.y;this.BO(e);this.body.GetType()===Ag.b2_dynamicBody&&(Math.abs(this.transform.scale.y-1)<Fb.wt&&!this.body.GetJointList())&&(this.xO(a,e),this.AO(),this.iI())},
Ms:function(){this.transform.rotation=this.body.GetAngle()},OC:function(a){this.Lb.update(a)},h:function(a){this.Lb.h(a);this.XH.h(a.C,this.transform);this.cm.h(a);this.k.h(a)},bf:l(g),fm:l(g),il:l(g),sp:l(g),ok:function(a){this.oO(a.body.GetPosition());this.On.yb()},oO:function(a){if(this.d.Ra()){var b=this.Mb[0];b.body=j;b.hN(g);N.a.g.M(a,b.target);b.ua(-1);this.d.entities.mq=g}},Rw:function(){this.d.Ra()&&!this.SM&&(this.Mb.unshift(new N.b.po(this.d,this.body,new N.a.Q(29,166,224,1))),this.Mb[0].ua(9),
this.d.entities.add(this.Mb[0]))},yg:function(){return this.transform.position},ey:function(a,b,c,d,e){this.body.SetActive(k);this.dk(d,e);this.Ll(a,b,k)},hy:function(){N.a.A.aa(N.a.J.n.Vx,70);this.Ll(this.body.GetPosition(),1,k);new N.b.pt(this.d,this.body,this)},Al:function(){var a=this;N.a.w(N.a.j.o,function(){a.d.q.Ag()},1)},xO:function(a,b){if(b<Fb.$s){this.Sf+=Fb.iD;this.Sf=N.a.e.Cd(this.Sf,0);var c=Math.cos(this.Sf),d=c*Fb.wt;this.Tn-=a.B;this.ta.x=1+d;this.ta.y=1+0.5*d;this.Hg&&this.k.jy&&
(c=Math.floor(0.5*this.k.ha.Wn()*(1+c)),this.k.ha.Dg(Math.floor(N.a.e.ba(this.k.ha.sb(),c,1))),this.Bn+=a.B,12==c&&this.Sf>Math.PI&&1.5<=this.Bn?(this.Bn=0,(this.Yl=0.6<Math.random())&&N.a.A.aa(N.a.J.n.ux,27)):23==c&&(this.Sf<Math.PI&&this.Yl)&&(this.Yl=k,N.a.A.aa(N.a.J.random(N.a.J.SN),50)))}else this.ta.x=this.ta.y=1,this.Tn=Fb.vw;c=N.a.e.ba(this.transform.scale.x,this.ta.x,0.0020);d=N.a.e.ba(this.transform.scale.y,this.ta.y,0.0020);this.p(c,d);this.k.p(c,d);this.cm.p(c,d)},AO:function(){!this.Hg&&
0>this.Tn&&(this.k.ll(),this.Hg=g)},BO:function(a){this.Hg&&a>Fb.$s&&(this.k.Kj(),this.Hg=k)},yO:function(a){var b=this.body.GetLinearVelocity(),c=N.a.g.Ia(b,this.Pj),d=100*(Math.min(c/Fb.wo/3,1)/8),e=100>a.now-this.uj;!this.Ml&&(c>=0.25*Fb.wo&&!this.ss)&&(c=k,a.now-this.km>Fb.ot&&(e&&Math.abs(b.y)<Math.abs(this.Pj.y))&&(c=g,N.a.A.aa(N.a.J.n.Uq,d),this.km=a.now),Math.abs(b.x-this.Pj.x)>=Fb.wo&&1>=b.x&&(!c&&(e&&a.now-this.km>Fb.ot)&&(N.a.A.aa(N.a.J.n.Uq,d),this.km=a.now),this.k.tJ()))},gn:function(){var a=
this,b=a.transform.initial.scale;N.a.A.aa(N.a.J.n.ip,50);this.k.yf();a=this;N.a.w(N.a.j.o,function(){a.d.rh.An();a.d.entities.remove(a.K)},1.6,"portal appear");a.K.ta=1;N.a.w(N.a.j.o,function(){a.body.SetActive(g);N.a.$a(N.a.j.o,function(){a.body.SetType(Ag.b2_dynamicBody);N.a.w(N.a.j.o,function(){a.K.ta=0},0.2)},function(c,d){var e=d/c;a.p(b.x-e*b.x,b.y-e*b.y);a.visible||a.fa(g)},0.3)},0.2)},Rx:l(1),p:function(a,b){this.transform.p(a,b);this.k.transform.p(a,b);this.cm.p(a,b);for(var c=0;c<this.Mb.length;c++)this.Mb[c].transform.p(a,
b)},fa:function(a){this.visible=a;for(var b=0;b<this.Mb.length;b++)this.Mb[b].visible=a;this.k.visible=a},rz:function(){for(var a=this.body.GetContactList();a;){if(a.contact.IsTouching()&&a.other.GetType()!=Ag.b2_dynamicBody&&!N.a.g.isSensor(a.contact))return g;a=a.next}return k},Ll:function(a,b,c,d){if(!this.MM){this.Af=k;this.Ml=g;this.df=c;this.jj=b;this.hq=a.Copy();this.body.SetType(Ag.b2_staticBody);this.body.SetLinearVelocity(new zg(0,0));N.a.g.ci(this.body,g);var e=this;this.k.ha.mk();this.k.kb=
k;this.d.Kd&&(this.d.Kd.df=c);this.df&&d&&this.k.Qc(d,g,function(){e.k.visible=k});this.AJ();this.df&&!this.UK&&this.d.YC(this.Ea(),Fg,Gg);N.a.A.aa(N.a.J.n.end,50)}},AJ:function(){if(this.d.Ra())for(var a=0;a<this.Mb.length;a++)N.a.hb(N.a.j.o,this.Mb[a],0.3,0)},iI:function(){var a=this,b=this.body.GetPosition();b.x>this.d.hl-this.Xa&&this.body.SetPosition(new zg(this.d.hl-this.Xa,b.y));b.x<this.Xa&&this.body.SetPosition(new zg(this.Xa,b.y));b.y<this.Xa&&this.body.SetPosition(new zg(b.x,this.Xa));
30*b.y>this.d.height+50&&!(0<this.Bf)&&!this.GH&&(this.GH=g,N.a.A.aa(N.a.J.n.Sx,100),N.a.w(N.a.j.o,function(){a.d.q.Ag()},1.2))},Ai:function(){this.k.Ai()},el:function(){return this.Ea()},AB:ba("ss"),iK:ca("Xa"),bk:function(a){this.k.we=a;this.k.zk=0.7},my:function(){this.df&&this.d.kh()}});Fb.ot=500;Fb.vw=7;Fb.iD=0.02;Fb.wt=0.04;Fb.$s=0.3;Fb.wo=4;Fb.JE=2E3/30;Fb.IE=1E3/30;Fb.Jf=0.1;Fb.Cw="#8c8c8c";Fb.nt=-2;var Gg=0.8,Fg=1.2;
function Dg(a){this.X=a;this.ZA=new zg;this.transform=new N.a.Ga;this.ga=new N.a.I(N.a.i.Ju);this.ga.alpha=0.5;this.update=function(){var a=this.X.transform.position;this.ZA.Set(a.x/this.X.ja,a.y/this.X.ja);var c=N.a.g.Zw(this.ZA,this.X.d.q.hL);this.transform.s(a.x,a.y);this.transform.Ua(c)};this.h=function(a){this.ga.h(a.C,this.transform)};this.p=function(a,c){this.transform.p(a,c)}}
function Cg(a){this.X=a;this.transform=new N.a.Ga;this.ga=new N.a.I(N.a.i.Hu);this.Rc=new zg;this.update=function(a){N.a.g.M(this.X.Ea(),this.transform.position);for(var c=k,d=this.X.body.GetContactList(),e=0,h=0,n,p;d;){N.a.g.M(N.a.g.Ty(d.contact),this.Rc);n=d.other.GetUserData();p=this.X.body.GetPosition();if(n&&d.contact.IsTouching()&&!d.contact.GetFixtureA().IsSensor()&&!d.contact.GetFixtureB().IsSensor()&&p.y-this.Rc.y<0.7*-this.X.Xa&&(d.other.GetType()===Ag.b2_staticBody||d.other.GetType()===
Ag.b2_kinematicBody))c=g,n=this.Rc.x-p.x,e+=n,h++;d=d.next}c&&(n=30*(e/h),this.Rc.x=n,this.Rc.y=this.X.transform.position.y,N.a.g.nc(this.transform.position,this.Rc,Math.min(1,Math.abs(n/10)),this.transform.position));this.PC(c,a)};this.PC=function(a,c){this.ga.alpha=N.a.e.ba(this.ga.alpha,a?1:0,600*c.B/255)};this.h=function(a){this.ga.h(a.C,this.transform)}}
var Eg=N.b.uw.extend({h:function(a){this._super(a.C)}}),Bg=N.b.bb.extend({init:function(a){this._super();this.color=a;this.visible=g;this.pg=k;this.speed=0;this.borderWidth=2;this.Px=0;this.$l=23;this.RC=1;this.T=new yg(Bg.NE,0.02,0);this.fA=new yg(Bg.OE,0.019,Math.PI/2);this.end=new yg(Bg.KD,0.018,Math.PI);this.UA=[this.T,this.fA,this.end];this.Ei=new N.a.H.pc(new zg,new zg);this.U=new zg;this.Cj=new N.a.H.pc(new zg,new zg);this.Fj=new N.a.H.pc(new zg,new zg);this.Zi=new N.a.H.pc(new zg,new zg)},
update:function(a){var b=Math.min(a.B,0.033);a=this.Px;this.pg&&(a=N.a.e.Cd(a,Bg.qo-Math.PI),a=N.a.e.Bb(a,Bg.qo-Bg.Xs,Bg.qo+Bg.Xs));a=N.a.e.Cd(a,this.T.angle-Math.PI);for(var b=30*b*this.RC,c,d,e=0;e<this.UA.length;e++)d=this.UA[e],c=Math.min(2*(Math.abs(d.angle-a)/Math.PI),0.5),c=d.sc*this.speed*c*b,d.angle=N.a.e.ba(d.angle,a,c),d.angle=N.a.e.Bb(d.angle,this.T.angle-Bg.rw,this.T.angle+Bg.rw),d.update(0.5*this.speed*b,this.pg,b)},h:function(a){if(this.visible){var b=this.dp,c=this.T.Ea(),d=this.fA.Ea();
N.a.H.gb(this.Ei,Bg.Ck,this.T.Ea(),Bg.Ck,2*this.$l);N.a.g.lb(c,d,this.U);N.a.H.gb(this.Cj,c,d,this.U,0.5*this.$l);N.a.H.gb(this.Fj,this.U,d,this.U,0.5*this.$l);N.a.H.gb(this.Zi,d,d,this.U,this.$l/3);a=a.C;a.save();a.fillStyle=this.color;a.beginPath();c=this.end.Ea();a.translate(b.x,b.y);a.rotate(this.transform.rotation);a.scale(this.transform.scale.x,this.transform.scale.y);a.moveTo(this.Ei.first.x,this.Ei.first.y);a.quadraticCurveTo(this.Cj.first.x,this.Cj.first.y,this.Fj.first.x,this.Fj.first.y);
a.quadraticCurveTo(this.Zi.first.x,this.Zi.first.y,c.x,c.y);a.quadraticCurveTo(this.Zi.D.x,this.Zi.D.y,this.Fj.D.x,this.Fj.D.y);a.quadraticCurveTo(this.Cj.D.x,this.Cj.D.y,this.Ei.D.x,this.Ei.D.y);a.closePath();a.fill();a.restore()}},uB:function(a){this.Px=a+Math.PI}});Bg.qo=1.5*Math.PI;Bg.Xs=3*Math.PI/8;Bg.NE=30;Bg.OE=50;Bg.KD=70;Bg.rw=Math.PI/8;Bg.Ck=new zg;
yg.prototype.update=function(a,b,c){var d=N.a.e.Bb(a,0.5,1.1)*this.length;this.position.x=N.a.e.ba(this.position.x,d,c);this.position.y=this.bc*Math.cos(this.Uk+this.JH);this.Uk=b?this.Uk+Math.max(this.kt*a,this.QD*c):this.Uk+this.kt*c};yg.prototype.Ea=function(){N.a.g.rotate(this.position,this.angle,this.kB);return this.kB};N.b.HeroBodyClip=Fb;N.b.rE=Bg;N.b.qE=Eg;
var Hg=q,Ig=Hg.b.bb.extend({init:function(a,b,c){a.entities.add(this);this.hk=1;this._super(a,b);this.X=c;c.k.gd=c;c.k.kb=k;this.EL=40;this.In=this.GB=0;Hg.a.w(Hg.a.j.Wo,function(){c.body.SetActive(k)},0,"Hero Explosion, pin the hero in place")},update:function(){if(this.GB<this.EL){var a;a=0<this.hk?Hg.a.e.u(0.02,0.04)*this.hk:Hg.a.e.u(0.016,0.02)*this.hk;this.In+=1;2<this.In&&(this.In=0,this.hk*=-1);this.X.p(this.X.transform.scale.x+a,this.X.transform.scale.y+a);this.GB++}else this.X.fa(k),this.Fb=
new Hg.b.it(this.d,this.X.Ea()),this.Fb.Yd=new Hg.b.Na(this.X.Ea().x,5),this.Fb.ve=new Hg.b.Na(this.X.Ea().y,5),this.Fb.Fp(14),this.Fb.ua(Hg.a.Wa.vo),this.d.entities.remove(this),this.d.entities.add(this.Fb),this.X.Al()}});Hg.b.pt=Ig;var Jg=q,Kg=Box2D.Common.Math.b2Vec2,Lg=Jg.a.g,Mg=Lg.Ka,Ng=24*Mg,Og=0*Mg,Pg=6*Mg;new Kg;
var Qg=Class.extend({init:function(a){this.visible=g;this.W=a;this.Xp=new Jg.b.Rk(Jg.a.i.It);this.start=new Kg;this.T=new Kg;this.end=new Kg;this.jk=new Jg.a.H.pc(new Kg,new Kg);this.Ej=new Jg.a.H.pc(new Kg,new Kg);this.aj=new Jg.a.H.pc(new Kg,new Kg);this.alpha=1;this.rotation=0},update:function(){this.NO();var a=Lg.Aa(this.W.end.GetPosition(),this.W.start.GetPosition());a.Multiply(1/Mg);this.Xp.transform.sN(a);a=-Lg.$w(this.W.T.GetPosition(),this.W.end.GetPosition());this.Xp.Ua(-a)},NO:function(){this.start.x=
this.start.y=0;Lg.Nd(this.W.T.GetPosition(),this.W.start.GetPosition(),this.T);Lg.Nd(this.W.end.GetPosition(),this.W.start.GetPosition(),this.end);Jg.a.H.gb(this.jk,this.start,this.start,this.T,Ng);this.jk.first.Multiply(1/Mg);this.jk.D.Multiply(1/Mg);Jg.a.H.gb(this.Ej,this.T,this.start,this.end,Og);this.Ej.first.Multiply(1/Mg);this.Ej.D.Multiply(1/Mg);Jg.a.H.gb(this.aj,this.end,this.T,this.end,Pg);this.aj.first.Multiply(1/Mg);this.aj.D.Multiply(1/Mg)},h:function(a){if(this.visible&&0!==this.alpha){a=
a.C;a.fillStyle=a.strokeStyle="black";a.lineWidth=2;var b=a.globalAlpha;1!==this.alpha&&(a.globalAlpha*=this.alpha);0!==this.rotation&&a.rotate(this.rotation);var c=this.jk.first,d=this.Ej.first,e=this.aj.first,h=this.jk.D,n=this.Ej.D,p=this.aj.D;a.beginPath();a.moveTo(c.x,c.y);a.quadraticCurveTo(d.x,d.y,e.x,e.y);a.lineTo(p.x,p.y);a.quadraticCurveTo(n.x,n.y,h.x,h.y);a.lineTo(c.x,c.y);a.closePath();a.stroke();a.fill();this.Xp.h(a);1!==this.alpha&&(a.globalAlpha=b);0!==this.rotation&&a.rotate(-this.rotation)}}});
Jg.b.pD=Qg;
var Rg=Box2D,Sg=q,Tg=Rg.Common.Math.b2Vec2,Ug=Rg.Dynamics.b2Body,Vg=Sg.a.g,Wg=Vg.Ka,Xg=30*Wg,Yg=18*Wg,Zg=34*Wg,$g=Xg+Yg,ah=2*($g/3),bh=4*Wg,ch=7*Wg,dh=7*Wg,eh=Math.PI/3,fh=1.5*Math.PI,gh=new Tg,hh=Class.extend({init:function(a,b){this.d=a;this.Od=b;this.T=this.start=this.end=j;this.mA=new Tg;this.qr=new Tg;this.Sa=k;this.visible=g;this.fi=new Tg(0,$g);this.Mn=new Tg;this.$i=new Tg;this.Dj=new Tg;this.uj=this.Fd=0;this.pg=k;this.Y=new Tg;this.tm=this.Wp=this.Cm=j;this.ts=k;this.VN=0;this.xs=new Sg.b.pD(this);
this.Gl=new Sg.b.nd(-ch,ch,ch/5);this.Am=new Sg.b.nd(-dh,dh,ch/5);this.Am.progress=this.Gl.progress+Math.PI/2;this.bc=1;this.rk=0;this.FC=-1;this.Ln=$g;this.NI()},h:function(a){this.visible&&this.xs.h(a)},sB:function(a){if(this.Sa!==a)if(this.Sa=a)a=Rg.Common.Math.b2Mat22.FromAngle(this.start.GetAngle()),this.start.SetTransform(new Rg.Common.Math.b2Transform(this.Od.body.GetPosition(),a)),this.tm=Vg.Td(this.Od.body,this.start,this.start.GetPosition(),k),this.start.SetType(Ug.b2_dynamicBody),this.end.SetType(Ug.b2_dynamicBody),
this.Ln=ah;else{var b=this;Sg.a.w(Sg.a.j.o,function(){b.XI()},0);this.start.SetType(Ug.b2_kinematicBody);this.end.SetType(Ug.b2_kinematicBody);this.Ln=$g/3}},XI:function(){this.tm&&(this.d.b2World.DestroyJoint(this.tm),this.tm=j)},Ad:function(a){this.ka!==a&&(this.ka=a,this.Dn(),this.ka&&Sg.a.A.aa(Sg.a.J.n.pm,50))},xB:function(a){var b=Rg.Common.Math.b2Mat22.FromAngle(this.start.GetAngle());this.start.SetTransform(new Rg.Common.Math.b2Transform(a,b));b=Rg.Common.Math.b2Mat22.FromAngle(this.T.GetAngle());
this.T.SetTransform(new Rg.Common.Math.b2Transform(a,b));b=Rg.Common.Math.b2Mat22.FromAngle(this.end.GetAngle());this.end.SetTransform(new Rg.Common.Math.b2Transform(a,b))},Dn:function(){this.T&&(this.FC=this.d.totalTime,this.ka||(this.ts=g,this.bc=0),this.T.SetType(Ug.b2_dynamicBody),this.ka||this.end.SetType(Ug.b2_dynamicBody),this.T.SetLinearVelocity(gh),this.end.SetLinearVelocity(gh))},update:function(a){var b=a.B;this.Nm()&&(this.uj=this.d.totalTime);this.WO(b);this.KO(b);if(!this.Sa){this.pg=
0.3>this.d.totalTime-this.uj;this.start.SetLinearVelocity(this.Od.body.GetLinearVelocity());var c=this.Od.body.GetAngle(),c=Rg.Common.Math.b2Mat22.FromAngle(c);this.start.SetTransform(new Rg.Common.Math.b2Transform(this.Od.body.GetPosition(),c));this.ts?this.RO(b):this.ka?this.EO(b):this.VO(b)}this.xs.rotation=-this.Od.transform.rotation;this.xs.update(a)},KO:function(){this.Cm&&(this.Cm.SetLength(Sg.a.e.ba(this.Cm.GetLength(),this.Ln*Xg/$g,0.05)),this.Wp.SetLength(Sg.a.e.ba(this.Wp.GetLength(),this.Ln*
Yg/$g,0.05)))},oJ:function(){this.ts=k;this.end.SetType(Ug.b2_kinematicBody);Vg.M(Vg.Aa(this.T.GetPosition(),this.start.GetPosition()),this.Mn);Vg.M(Vg.Aa(this.end.GetPosition(),this.start.GetPosition()),this.fi);this.bc=0;this.VN=this.d.totalTime},RO:function(a){var b=Vg.Aa(this.start.GetPosition(),this.end.GetPosition());0.2<b.Length()?(b.Multiply(1/a),Vg.nc(this.end.GetLinearVelocity(),b,1.5,Vg.Pc),this.end.SetLinearVelocity(Vg.Pc)):this.oJ()},EO:function(a){var b=Vg.Aa(this.Y,this.end.GetPosition()),
c=2*Math.min(this.d.totalTime-this.FC,0.25);b.Multiply(c/a);this.end.SetLinearVelocity(b)},VO:function(){this.end.SetPositionAndAngle(Vg.cc(Vg.cc(this.start.GetPosition(),this.fi),this.$i),0);this.T.SetPositionAndAngle(Vg.cc(Vg.cc(this.start.GetPosition(),this.Mn),this.Dj),0)},WO:function(a){var b=this.start.GetLinearVelocity().Length();this.rk=Sg.a.e.ba(this.rk,Math.min(2.5*b,15),0.1);this.Am.update(a*(1+this.rk));this.Gl.update(a*(1+this.rk));this.bc=Sg.a.e.ba(this.bc,1-this.rk/20,0.01);this.Am.bc=
this.bc;this.Gl.bc=this.bc;this.Fd=0.2<b?Vg.Mf(this.start.GetLinearVelocity())+Math.PI:fh;this.Fd=Sg.a.e.Cd(this.Fd,-fh);this.pg&&(this.Fd=Sg.a.e.Bb(this.Fd,fh-eh,fh+eh));var c=Zg+($g-Zg)*Math.min(b/3,1);Vg.qb(c,this.Fd,this.mA);Vg.M(this.fi,this.qr);this.qr.Multiply(Xg/$g);a=Math.max(1.25*b*a,0.01);Vg.nc(this.fi,this.mA,a,this.fi);Vg.nc(this.Mn,this.qr,a,this.Mn);a=Vg.Mf(this.fi);this.Dj.x=0;this.Dj.y=this.Am.value;Vg.rotate(this.Dj,a,this.Dj);this.$i.x=0;this.$i.y=this.Gl.value;Vg.rotate(this.$i,
a,this.$i)},Nm:function(){for(var a=this.Od.body.GetContactList();a;){if(a.contact.IsTouching()&&a.other.GetType()!==Ug.b2_dynamicBody&&!a.contact.GetFixtureA().IsSensor()&&!a.contact.GetFixtureB().IsSensor()&&a.other.GetPosition().y<this.Od.body.GetPosition().y)return g;a=a.next}return k},NI:function(){var a=new Tg;Vg.M(this.Od.body.GetPosition(),a);this.start=this.Si(a);a.y+=Xg/3;this.T=this.Si(a);a.y+=Yg/3;this.end=this.Si(a);this.Cm=Vg.Cp(this.start,this.T,4,1);this.Wp=Vg.Cp(this.T,this.end,4,
1)},Si:function(a){a=Vg.Bp(this.d.b2World,bh,a,0.3,k);a.SetType(Ug.b2_kinematicBody);Vg.ci(a,g);return a}});Sg.b.oD=hh;var ih=q,jh=ih.a.g;new Box2D.Common.Math.b2Vec2;
var kh=ih.b.Nk.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.Xe=2*Math.PI/20;this.ao=4*this.Xe;this.Yc()},Yc:function(){this.hp=new ih.b.Rk(ih.a.i.Tv);this.qB(this.width());this.Ye=this.Mx();this.sa=[];this.Dp()},Mx:function(){var a=new ih.b.aE(this.d,j,this.yK());a.Xo(20);a.fs(13);return a},qB:function(a){a/=this.hp.Za.Za.width;this.hp.p(a,a)},update:function(a){this._super(a);for(var b=ih.a.e.Bb(10*this.body.GetAngularVelocity(),-65,65),c=b=0,d=this.sa.length;c<d;c++)this.sa[c].update(a,
b)},AR:function(){var a,b;a=0;for(b=this.sa.length;a<b;a++)this.sa[a].Pi=0;for(a=this.body.GetContactList();a;)a.contact.IsTouching()&&(a.other.GetUserData()&&!ih.a.g.isSensor(a.contact))&&(b=ih.a.g.Ty(a.contact),b=jh.Mf(this.body.GetLocalPoint(b)),b=ih.a.e.Cd(b,0),this.tH(b)),a=a.next},tH:function(a){var b,c;for(b=0;3>b;b++)c=Math.floor((a-b*this.Xe)/this.Xe),this.Gw(a,c),c=Math.floor((a+(b+1)*this.Xe)/this.Xe),this.Gw(a,c)},Gw:function(a,b){b=ih.a.e.KL(b,20);var c=this.sa[b];a=ih.a.e.Cd(a,c.af-
Math.PI);c.Pi=1.3*(this.ao-Math.abs(a-c.af))*ih.a.e.xh(a-c.af)},Dp:function(){var a,b;for(a=0;20>a;a++)b=this.Ye.r[a],b=new ih.b.JG(b),b.mN(this.Ye.Fy(a)),this.sa.push(b)},h:function(a){var b=a.C;b.save();ih.a.e.zb(b,this.transform);this.hp.h(b);this.Ye.h(b);b.restore();this._super(a)}});ih.b.$D=kh;
var lh=Box2D,O=q,mh=lh.Common.Math.b2Vec2,nh=lh.Dynamics.b2Body,oh=O.a.g,ph=oh.Ka,qh=30*ph,rh=150*ph,sh=40*ph,th=30*ph,uh=30*ph,vh=170*ph,wh=30*ph,xh=70*ph,yh=100*ph,zh=O.b.HeroBodyClip.nt,Ah=130*ph,Bh=new mh,Ch=O.b.$D.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.Af=g;oh.cs(this.body,zh);oh.pN(b);this.W=new O.b.oD(c,this);this.body.SetSleepingAllowed(k);this.yj=0;this.d.Kd=this;this.be=new O.a.Yb;a=new lh.Collision.Shapes.b2CircleShape(qh);this.body.CreateFixture2(a,0).SetSensor(g);this.body.SetUserData(this);
this.JM=0;this.Pd=this.Mx();this.Pd.rotation=O.a.e.As(this.Pd.sc)/2;this.Pd.fa(k);this.d.Xk(new O.b.Ok(this,2));this.ag=new O.a.Yb;this.ar=new O.b.Rk(O.a.i.Ht);this.ar.p(1.05,1.05);this.Sa=k;this.sm=j;this.bo=0;this.al=j;this.Xr=this.jL=this.Bf=0;this.k=new O.b.qt(c);this.Dd=this.body.GetPosition().Copy();this.Y=new mh;this.Kq=new mh;this.Jq=new mh;this.Gd=new mh;this.touch=j;this.K=new O.b.qE(this.d,this.body,O.a.i.vi,this.transform);this.K.ua(8);this.d.entities.add(this.K);this.Kc=k;this.jj=this.Zk=
0;this.df=this.Hj=k;this.Tr=this.dB=g;this.gn();this.zh=0},h:function(a){this._super(a);var b=a.C;b.save();O.a.e.zb(b,this.transform);this.Pd.h(b);this.ar.h(b);this.W.h(a);0!==this.transform.rotation&&b.rotate(-this.transform.rotation);this.k.h(a);b.restore()},sp:function(){return this.vx()},vx:ca("Af"),iQ:l(k),iK:ca("Xa"),AB:aa(),il:function(){return!this.Sa},ey:function(a,b,c,d,e){this.Yh();this.ag.yb();oh.M(a,this.Y);this.jj=b;this.Hj=g;this.body.SetType(nh.b2_staticBody);this.body.SetActive(k);
this.body.SetLinearVelocity(new mh(0,0));O.a.g.ci(this.body,g);this.dk(d,e)},fa:function(a){this._super(a);this.k.fa(a);this.ar.fa(a)},hy:function(){this.gy();this.Yh();this.Kc=g;this.ag.yb();this.W.visible=k;new O.b.pt(this.d,this.body,this)},Al:function(){this.hn(1)},Rx:l(0.7),hn:function(a){if(!this.df&&this.dB){this.dB=k;var b=this;O.a.w(O.a.j.o,function(){b.d.q.Ag()},a||0)}},gn:function(){if(this.Tr){this.Tr=g;var a=this;O.a.w(O.a.j.o,function(){a.lJ()},1);this.ua(O.a.Wa.vo-1);this.k.yf();this.fa(g);
this.Hj=k;this.Zk=0;this.W.visible=g;this.Kc=k;this.K.Mc=0;this.K.ta=0;this.K.xb=0.1;this.p(0,0);this.body.SetPositionAndAngle(this.Dd,0);this.body.SetLinearVelocity(Bh);this.body.SetType(nh.b2_staticBody);this.W.xB(this.body.GetPosition());var b=a.transform.initial.scale;O.a.w(O.a.j.o,function(){a.K.ta=1;O.a.w(O.a.j.o,function(){a.body.SetActive(g);O.a.$a(O.a.j.o,function(){a.body.SetType(nh.b2_dynamicBody);O.a.w(O.a.j.o,function(){a.K.ta=0},0.2)},function(c,d){var e=d/c;a.p(b.x-e*b.x,b.y-e*b.y);
a.visible||a.fa(g)},0.7)},0.2)},0.2)}},lJ:function(){this.Tr=g},ok:function(){this.Yh();this.ag.yb()},Rw:function(){this.W.xB(this.body.GetPosition());this.W.Dn()},GetPosition:function(){return this.Sa?this._super():this.W.end.GetPosition()},VI:function(){this.al&&!this.Sa&&(this.body.DestroyFixture(this.al),this.al=j)},rI:function(){if(this.Sa){var a=new lh.Collision.Shapes.b2CircleShape(th);this.al=this.body.CreateFixture2(a,0);oh.cs(this.body,zh)}},Dc:function(){return this.Sa?2:0},ae:function(a,
b){return b&&0<a&&!this.W.ka?k:g},hg:function(){return!this.Sa},bf:l(g),Yh:function(){if(this.Sa){O.a.A.aa(O.a.J.random(O.a.J.Lz),50);this.d.X.On.removeListener(this,this.xA);this.k.ak(g);this.W.Ad(k);this.W.sB(k);var a=this;O.a.w(O.a.j.o,function(){a.WI()},0);this.Sa=k;this.Af=g;O.a.w(O.a.j.o,function(){a.EM()},0.2);this.JM=this.d.totalTime;this.yj=0.5}},WI:function(){this.sm&&(this.VI(),this.d.b2World.DestroyJoint(this.sm),this.sm=j)},EM:function(){this.Sa||(this.body.SetLinearDamping(0),this.body.SetAngularDamping(0.1))},
xa:function(a){this._super(a);if(this.Kc)return k;if(this.Sa&&this.HC(a,this.body.GetPosition(),wh))this.W.Dn(),this.Yh();else if(!this.Sa&&0===this.yj)return this.zO(a);return k},ib:function(a){this.W.ka&&oh.M(a,this.touch)},HC:function(a,b,c){this.Gd.x=a.x/30;this.Gd.y=a.y/30;return O.a.g.Ia(this.Gd,b)<c},zO:function(a){return this.HC(a,this.W.end.GetPosition(),sh)?(this.touch||(this.touch=new mh),oh.M(a,this.touch),this.W.Ad(g),g):k},Qa:function(a){this._super(a);this.Kc||this.gy()},gy:function(){this.touch&&
(this.W.Ad(k),this.touch=j)},JO:function(a){if(this.Sa||this.Kc)this.zh=0;else{var b=this.d.X.body,c=oh.Aa(b.GetPosition(),this.body.GetPosition()),d=c.Length();1>d?(this.zh+=a.B,1.5<=this.zh&&(a=new mh(c.x*40*((d-1)/1),0),this.body.ApplyForce(a,this.body.GetWorldCenter()),a.Multiply(-1),b.ApplyForce(a,b.GetWorldCenter()),this.zh=0)):this.zh=0}},update:function(a){this.Hj&&(oh.nc(this.body.GetPosition(),this.Y,this.jj,oh.Pc),this.body.SetPosition(oh.Pc));this.JO(a);this._super(a);this.Sa||(this.Zk=
oh.vz(this.body)?0:this.Zk+a,this.body.SetAngularDamping(1<this.Zk?1:0.1),0<this.yj&&(this.yj=Math.max(0,this.yj-a.B)));this.W.update(a);if(this.Sa){var b=this.body.GetPosition(),c=this.d.X.body.GetPosition();this.k.we=oh.$w(b,c);this.k.Fg(oh.Ia(b,c)/Ah)}else this.k.FB(this.body.GetLinearVelocity());this.k.update(a);this.touch&&oh.M(this.qK(),this.W.Y);!this.Kc&&this.Sa&&(a=28+2*(this.d.X.Bf+this.Bf),b=xh,c=this.d.hl,this.body.GetPosition().x>c-yh&&(b*=2),c=this.body.GetLinearVelocity().Copy(),c.y=
Math.min(4.2,c.y),this.body.GetPosition().y<b&&(a-=44*(1-this.body.GetPosition().y/b),1<this.body.GetLinearVelocity().y&&(c.y=O.a.e.ba(c.y,1,1))),this.body.SetLinearVelocity(c),this.bo=O.a.e.ba(this.bo,Math.max(a,22/3),2),this.body.ApplyForce(new mh(0,-this.bo*this.body.GetMass()),this.body.GetWorldCenter()));this.Kc||this.HO();this.FO();30*this.body.GetPosition().y>this.d.height+50&&this.hn()},Ms:function(){this.transform.rotation=this.body.GetAngle()},HO:function(){this.Ye.fs(O.a.e.ba(this.Ye.ob,
this.Sa?26:13,0.5));this.Pd.fs(this.Ye.ob);this.Pd.fa(13<this.Pd.ob);this.Xr=(this.Pd.ob-13)/13;var a=0.7+0.35*this.Xr;this.k.p(a,a);this.qB(2*this.Ye.ob+4)},FO:function(){var a=1.25*(1-this.alpha);this.Pd.Bd(this.Xr*(1-a));this.Ye.Bd(1-a)},kL:function(){O.a.A.aa(O.a.J.random(O.a.J.Iz),50);this.Sa=g;this.Af=k;this.jL=this.d.totalTime;this.W.sB(g);this.k.ak(k);this.k.Fg(0.3);var a=this.d.X;this.W.end.SetPosition(a.body.GetPosition());this.sm=oh.Td(this.W.end,a.body,a.body.GetPosition());this.Qa(this.touch);
this.body.SetLinearDamping(1);this.body.SetAngularDamping(1);this.bo=0;var b=this;O.a.w(O.a.j.o,function(){b.rI()},0.2);this.ag.yb();a.On.addListener(this,this.xA);this.be.yb()},xA:function(){this.Yh();this.W.Dn()},qK:function(){this.Gd.x=this.touch.x/30;this.Gd.y=this.touch.y/30;oh.er(this.Gd,this.body.GetPosition(),rh,this.Gd);var a=this.d.X.body.GetPosition();oh.Ia(this.Gd,a)<uh&&oh.Ia(a,this.body.GetPosition())<vh&&(oh.M(a,this.Gd),this.kL());return this.Gd},yK:function(){return O.a.i.Gt},HQ:l(20),
IQ:l(13),width:l(30)});O.b.BaloonBodyClip=Ch;
var Dh=q,Eh=Box2D.Common.Math.b2Vec2,Fh=Dh.b.uo.extend({init:function(a,b,c){this._super(a,j,c?c:Dh.a.i.Lk);this.Ph=1.17;this.xb=6;this.Jg=new Dh.b.Na(0.863,0.137);this.speed=new Dh.b.Na(140,20);this.mM=new Dh.b.Na(2,1);this.angle=new Dh.b.Na(0,Dh.a.e.Z(3600));this.transform.s(b.x,b.y);this.ap=new Eh},Lc:function(a){this._super(a);Dh.a.g.qb(Math.sqrt(a.Va*a.Va+a.Ma*a.Ma),Math.atan2(a.transform.position.y-this.transform.position.y,a.transform.position.x-this.transform.position.x),this.ap);a.Va=this.ap.x;
a.Ma=this.ap.y},ue:function(a,b){if(a.visible&&(this._super(a,b),a.opacity-=this.Ph*b.B,a.Qw(this.xb*b.B,this.xb*b.B),0>=a.opacity||0>a.transform.scale.x))a.visible=k},h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a.C,b.transform)}});Dh.b.it=Fh;var Gh=q;function Hh(a){this.gA=Gh.a.e.u(-a,0);this.hf=Gh.a.e.u(0,a);this.Me=this.hf-this.gA;this.Us=Gh.a.e.u(-0.7,0.7)}
function Ih(a){this.step=a;this.Mp=this.gQ=0;this.WC=this.Jy();this.Ss=this.Jy()}Hh.prototype.yy=function(a){return this.gA+this.Me*a};Ih.prototype.update=function(){this.Ss+=Math.random()*Ih.bD;this.WC=Math.cos(this.Ss);this.Mp+=this.step};Ih.prototype.Sy=function(a){return(Math.sin(this.Mp+a)+1)/2*this.WC};Ih.prototype.Jy=function(){return Gh.a.e.u(-1,1)};Ih.bD=0.01;Gh.a.pH=Hh;Gh.a.qH=Ih;var Jh=Class,P=q;function Kh(a,b){this.$=a;this.offsetX=b}
function Lh(a){this.Wr=new P.b.nd(-15,15,P.a.e.u(0.0050,0.01));this.Wr.progress=P.a.e.u(0,2*Math.PI);this.vl=this.Pi=this.Iq=this.af=0;this.$=a}
var Mh=Box2D.Common.Math.b2Vec2,Nh=2.5*0.0174532925,Oh=-40/30,Ph=40/30,Rh=Jh.extend({init:function(a,b){this.d=a;this.yc=b;this.se=k;this.tr=this.Hs=this.Ng=this.Fs=0;this.Ts=this.sa=this.Og=j;this.rs=[];this.td=[];this.YN=-P.a.e.u(-Math.PI/12,Math.PI/12);this.ps=0;this.create()},create:function(){var a=Math.min(this.wq(),this.d.sa.Wn()-1);this.sa=this.d.sa.Kf(a);this.sa.kc(P.a.H.Sg(this.yc.Tl()));a=P.a.e.u(0.7*0.65,0.65);this.sa.p(a,a);this.Ts=new P.a.pH(this.VC);this.LI();this.yI()},qs:0.5,VC:Math.PI/
6,ao:Math.PI/6,LI:function(){for(var a=0,a=j,b=0,c=new Mh(0,0),b=j,d=0;2>d;d++)a=Math.min(this.TB(),this.d.sa.Wn()-1),a=this.d.sa.Kf(a),b=P.a.e.u(0.6*this.qs,this.qs),a.p(b,b),b=this.My(d),c.x=b,c.y=1,c.Add(this.sa.Ea()),a.kc(c),this.rs.push(new Kh(a,b))},yI:function(){for(var a=j,a=j,b=0;1>b;b++)a=new Mh(P.a.e.u(-this.yc.width,this.yc.width),P.a.e.u(Oh,-2)),a.Add(this.yc.body.GetPosition()),a.Multiply(30),a=this.d.td.Wk(a),this.td.push(new Qh(this.d,this.yc,a,this))},update:function(a){this.se||
this.tr++;this.IO(a);this.GO(a);for(var b=0;b<this.td.length;b++)this.td[b].update(a)},IO:function(a){var b=this.Ts.yy(this.d.Ak.Sy(this.Ts.Us))+this.YN,c=b;5<=this.tr&&(this.Fs=0,this.Og=j);if(this.Og!=j){var d=this.Ng-this.Hs,e=2*Ph;0>=d/this.Hs&&Math.abs(d)<e?(this.Fs=P.a.e.xh(d)*Math.min(Math.abs(d/Ph),1),d=-Math.min(d/(1.5*Ph),1)*this.ao,b-=1.5*d,c-=2*d):(this.Og=j,this.Fs=0)}a=30*a.B;d=this.UB();e=this.Xe();this.ps=P.a.e.ba(this.ps,c,d*a);this.sa.Ua(P.a.e.ba(this.sa.transform.rotation,b,e*a));
this.se=k},GO:function(){this.sa.kc(this.yc.item.Tl());var a,b;a=0;for(b=this.rs.length;a<b;a++)this.QC(this.rs[a],a)},QC:function(a){var b;b=this.yc.Gy();b.x+=a.offsetX;b=this.yc.body.GetWorldPointCachedVector(b);b.x*=30;b.y*=30;a.$.kc(b);a.$.Ua(this.ps)},Jj:function(a,b){this.xf(a);if(!this.Og||b!==this.Og&&Math.abs(a)<Math.abs(this.Ng))this.Hs=P.a.e.xh(a)*Ph,this.Og=b;this.Og===b&&(this.Ng=a,this.tr=0);this.se=g},xf:function(a){P.a.e.Ud(a,0)&&(a=0.5<Math.random()?1:-1);for(var b=0;b<this.td.length;b++)this.td[b].dN(-P.a.e.xh(a))},
wq:function(){return Math.floor(8*Math.random())},TB:function(){return Math.floor(5*Math.random())+8},My:function(){return P.a.e.u(-this.yc.width,this.yc.width)},UB:function(){return this.se?0.06981317:0.0174532925},Xe:function(){return this.se?Nh:0.0174532925}}),Qh=Jh.extend({init:function(a,b,c,d){this.d=a;this.Ze=b;this.$=c;a=P.a.e.u(0.8,1.2);this.$.p(a,a);this.za=this.$.Ea().Copy();this.MK=d.sa.transform.position.y;this.eN=P.a.e.u(-10,-30);this.nB=P.a.e.u(-30,-50);this.pn=this.Xj=0;this.$o=P.a.e.u(-2*
Math.PI,2*Math.PI);this.FH=P.a.e.u(0.0050,0.05);this.ws=0;this.Hn=P.a.e.u(0.25,0.75);this.Us=P.a.e.u(-0.5,0.5);this.FK=P.a.e.u(10,20);this.Rs=P.a.e.u(-2*Math.PI,2*Math.PI);this.dP=P.a.e.u(0.01,0.02);this.cP=P.a.e.u(-5,20);this.ER=P.a.e.u(1,2);this.sa=d.sa;this.SK=1/this.nB;this.Y=new Mh;this.iC=new Mh},update:function(a){var b=this.sa.transform.position.y,c=this.$.Ea();this.$.opacity=(Math.cos(this.$o)+1)/2;this.Y.x=this.za.x+this.FK*this.d.Ak.Sy(this.Us);this.Y.y=this.za.y+this.cP*Math.sin(this.Rs)+
(b-this.MK);0!=this.Xj&&(this.Y.x+=this.Xj*this.eN,this.Y.y+=this.nB,this.Hn=Math.abs(c.y-this.Y.y)*this.SK,this.pn-=a.B,0>=this.pn&&(this.Xj=0));this.ws=Math.min(Math.abs((this.Y.x-c.x)/(this.Y.y-c.y)*this.Hn),1);P.a.g.nc(c,this.Y,this.ws*this.ws+this.Hn*this.Hn,this.iC);this.$.kc(this.iC);this.$o+=this.FH;this.Rs+=this.dP},dN:function(a){0===this.Xj&&(this.Xj=a);this.pn=P.a.e.u(0.5,2.5)}});
Lh.prototype.update=function(a,b){this.Wr.update(a.B);this.vl=Math.abs(this.vl)>Math.abs(this.Pi)?P.a.e.ba(this.vl,this.Pi,0.05):this.Pi;var c=P.a.e.Z(this.Iq+b+this.Wr.value+P.a.e.As(this.vl)),d=Math.min(Math.abs(this.$.transform.rotation-c)/P.a.e.Z(7),P.a.e.Z(3));this.$.transform.rotation=P.a.e.ba(this.$.transform.rotation,c,d)};Lh.prototype.mN=function(a){this.af=a;this.Iq=-P.a.e.As(a)+90;this.$.transform.rotation=P.a.e.Z(this.Iq)};P.b.so=Rh;P.b.rP=Qh;P.b.JG=Lh;
var Sh=q,Th=Sh.b.so.extend({init:function(a,b){this._super(a,b)},qs:0.7,VC:Math.PI/8,ao:Math.PI/12,wq:function(){return Math.floor(3*Math.random())},TB:function(){return this.wq()},My:function(a){return 0===a?-this.yc.width/2:this.yc.width/2},UB:function(){return this._super()/2},Xe:function(){return this._super()/2},QC:function(a,b){this._super(a,b);var c=this.yc.item,d=!c.wa.L.We&&0===b,c=!c.next.L.We&&1===b;if(d||c)c=a.$.Ea(),a.$.s(c.x+(4*d?1:-1),c.y+4),a.$.p(0.5,0.5)}});Sh.b.nH=Th;var Q=q;
function Uh(a,b,c){this.progress=Math.random()*Math.PI;this.value=0;c?(this.step=c,this.de=a,this.kf=b):(this.de=0,this.kf=1,this.step=Q.a.e.u(a,b));this.bc=1;this.update(0)}
var Vh=Q.b.bb.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.body&&this.body.SetUserData(this);this.Ba=new Q.a.I(this.uq())},h:function(a){this.d.ic||this.Ba.h(a.$,this.transform)}}),Wh=Vh.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.Lb=j;a=this.oj();if("McStoneView3"===a||"McStoneView1"===a)this.Lb=new Q.a.I(Q.a.i.ew)},update:function(){this.Lb&&(this.Lb.alpha=1-this.d.dr)},h:function(a){this.d.ic||(this.Ba.h(a.$,this.transform),this.Lb&&this.Lb.h(a.$,this.transform))}}),Xh=
Vh.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.ua(Q.a.Wa.Ys);switch(this.oj()){case "McEggView0":this.Ba=new Q.a.I(Q.a.i.Yt);break;case "McEggView1":this.Ba=new Q.a.I(Q.a.i.Zt);break;case "McEggView2":this.Ba=new Q.a.I(Q.a.i.$t);break;case "McEggView3":this.Ba=new Q.a.I(Q.a.i.au);break;case "McEggBridgeView":this.Ba=new Q.a.I(Q.a.i.Go);break;case "McKaktusView0":this.Ba=new Q.a.I(Q.a.i.Ou);break;case "McKaktusView1":this.Ba=new Q.a.I(Q.a.i.Pu);break;case "McKaktusView2":this.Ba=new Q.a.I(Q.a.i.Qu);
break;case "McKaktusView3":this.Ba=new Q.a.I(Q.a.i.Ru);break;case "McKaktusView4":this.Ba=new Q.a.I(Q.a.i.Su);break;default:!Q.Uc&&"undefined"!==typeof console&&console.log("missing kaktus type:"+this.oj())}}}),Yh=Vh.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.ua(Q.a.Wa.Ys);this.Ba=new Q.a.I(Q.a.i.Go)}}),Zh=Vh.extend({init:function(a,b,c,d){this._super(a,b,c,d)},h:function(a){this.Ba.h(a.C,this.transform)}}).extend({init:function(a,b,c,d){this._super(a,b,c,d);b=a.alphaStep;a=a.maximumAlpha;
this.ya=new Uh(b,b);this.ya.kf=this.ya.de=a},update:function(a){this.ya.update(a.B);this.Ba.alpha=this.ya.value}});Uh.prototype.update=function(a){this.progress+=30*this.step*a;this.value=this.Qy(this.de,this.kf,this.progress)};Uh.prototype.Qy=function(a,b,c){return Q.a.e.mb(a,b,(1+Math.cos(c))/2*this.bc)};Uh.prototype.YK=function(){return Math.abs(this.progress%(2*Math.PI))<this.step};Q.b.bH=Vh;Q.b.StoneBodyClip=Wh;Q.b.KaktusBodyClip=Xh;Q.b.KaktusForeground=Yh;Q.b.AlphaForeground=Zh;Q.b.nd=Uh;
var $h=window,R=q,ai=Box2D.Common.Math.b2Vec2,bi=R.b.bb.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.Ba=new R.a.I(this.uq());this.name=a.clipType;this.Wd=this.cg=g;this.dg=this.visible=k;this.labels=[];this.Nw(a.textData);for(b=0;a["textData"+b];)this.Nw(a["textData"+b]),b++},update:function(){if(this.d.oc&&this.cg){this.cg=k;var a=this;R.a.w(R.a.j.o,function(){a.fadeIn(0.5)},2)}},h:function(a){if(this.visible){a=a.C;a.save();R.a.e.zb(a,this.transform);for(var b=0;b<this.labels.length;b++)this.labels[b].h(a);
this.Ba.fc(a,0,0,0,1,1);a.restore()}},Nw:function(a){var b=a.textSize,c=a.textPosition,d=a.fontSize,e=a.textAlign,h=d/2;R.a.v.Bh()||(h*=0.76);d=new R.a.$b(R.a.v.P(a.text),h,d/1.25);d.bi(e);"right"===e?c.x+=b.x/2:"left"===e&&(c.x-=b.x/2);d.transform.s(c.x,-c.y);if(a=a.color)b=new R.a.Q(0,0,0,1),b.tf=a>>16&255,b.Ue=a>>8&255,b.He=a&255,d.color=b.toString();this.labels.push(d)},le:function(a){for(var b=0;b<this.labels.length;b++)this.labels[b].alpha=a;this.Ba.alpha=a},fadeIn:function(a){if(!this.dg){var b=
this;b.visible=g;b.le(0);R.a.$a(R.a.j.o,function(){b.le(1);b.Wd&&R.a.w(R.a.j.o,function(){b.fadeOut(0.5)},5)},function(a,d){b.le(1-d/a)},a,this.name+" Hint Fade In")}},fadeOut:function(a){var b=this;this.dg||(this.dg=g,R.a.$a(R.a.j.o,function(){b.visible=k;b.le(0)},function(a,d){b.le(d/a)},a,this.name+" Hint Fade Out"))}}),ci=bi.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.Wd=this.VB=k;this.Ac=[]},update:function(a){this._super(a);this.VB||(this.VB=g,this.oK())},oK:function(){var a=this.transform.position.Copy();
a.Multiply(1/30);this.Ac=R.a.g.Wh(this.d.b2World,a,R.b.SnotBodyClip);for(a=0;a<this.Ac.length;a++)this.Ac[a].be.addListener(this,this.Oh)},Oh:function(){this.fadeOut(0.5);for(var a=0;a<this.Ac.length;a++)this.Ac[a].be.removeListener(this,this.Oh)}}),di=ci.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.used=this.cg=k},Oh:function(){if(!this.used){this.used=g;this.fadeIn(0.5);for(var a,b=0;b<this.Ac.length;b++)a=this.Ac[b],a.be.removeListener(this,this.Oh),a.cn.addListener(this,this.Pm)}},
Pm:function(){this.fadeOut(0.5);for(var a=0;a<this.Ac.length;a++)this.Ac[a].cn.removeListener(this,this.Pm)}}),ei=bi.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.Oz=this.Wd=k;this.wj=[]},update:function(a){this._super(a);this.Oz||(this.Oz=g,this.YJ())},YJ:function(){var a=this.transform.position.Copy();a.Multiply(1/30);this.wj=R.a.g.Wh(this.d.b2World,a,R.b.EnergyBodyClip);for(a=0;a<this.wj.length;a++)this.wj[a].yp.addListener(this,this.wA)},wA:function(){this.fadeOut(0.5);for(var a=0;a<
this.wj.length;a++)this.wj[a].yp.removeListener(this,this.wA)}}),fi=bi.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.Wd=k;a=this.transform.position.Copy();a.Multiply(1/30);this.K=R.a.g.Wh(this.d.b2World,a,R.b.TeleportBodyClip);this.K=this.K[0];this.K.ho.addListener(this,this.Om);this.cg=g},Om:function(){this.K.ho.removeListener(this,this.Om);this.fadeOut(0.5)}}),gi=fi.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.cg=k;this.Wd=g},Om:function(){this.K.ho.removeListener(this,this.Om);
this.fadeIn(0.5)}}),hi=bi.extend({init:function(a,b,c,d){this._super(a,b,c,d);!$h.navigator.msMaxTouchPoints&&!Modernizr.touch&&(this.Ba=new R.a.I(R.a.i.Gu),this.labels[0].CB(R.a.v.P("SLIDE_MOUSE")));this.Wd=k;this.za=new ai;this.iz=k;this.jf=60},update:function(a){this._super(a);!this.iz&&this.d.X?(this.za=this.d.X.transform.position.Copy(),this.iz=g):!this.dg&&Math.abs(this.d.X.transform.position.x-this.za.x)>this.jf&&this.fadeOut(0.5)}}),ii=bi.extend({init:function(a,b,c,d){this._super(a,b,c,d);
this.Ba=new R.a.I(R.a.i.Nv);a=this.transform.position.Copy();a.Multiply(1/30);this.dn=R.a.g.Wh(this.d.b2World,a,R.b.DragableBodyClip);this.dn=this.dn[0];this.dn.Qp.addListener(this,this.Mm)},Mm:function(){this.dn.Qp.removeListener(this,this.Mm);this.fadeOut(0.5)}}),ji=bi.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.cg=this.Wd=k;this.te=j;this.se=k},update:function(a){this._super(a);this.te||this.vK()},vK:function(){var a=this.transform.position.Copy();a.Multiply(1/30);this.te=R.a.g.Wh(this.d.b2World,
a,R.b.TrampolinePartBodyClip);for(a=0;a<this.te.length;a++)if(this.te[a].parent){this.te=this.te[a].parent;this.te.ay.addListener(this,this.Mm);this.te.Xy.addListener(this,this.$L);break}},Mm:function(){this.se&&(this.dg||this.fadeOut(0.5))},$L:function(){!this.te.ka&&!this.se&&(this.se=g,this.fadeIn(0.5))}}),ki=bi.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.Wd=this.cg=k;this.Sq=0;a=this.transform.position.Copy();a.Multiply(1/30);this.Ac=R.a.g.Wh(this.d.b2World,a,R.b.SnotBodyClip);for(a=
0;a<this.Ac.length;a++)this.Ac[a].be.addListener(this,this.Oh),this.Ac[a].cn.addListener(this,this.Pm)},Oh:function(){this.Sq++;2===this.Sq&&this.fadeIn(0.5)},Pm:function(){this.Sq--;this.visible&&!this.dg&&(this.fadeOut(0.5),this.dg=k)}}),li=bi.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.Wd=k;(this.Kd=this.d.Kd)&&this.Kd.be.addListener(this,this.zA)},zA:function(){this.Kd.be.removeListener(this,this.zA);this.fadeOut(0.5)}});R.b.FadeHint=bi;R.b.SnotLinkHint=ci;R.b.SnotReleaseHint=di;
R.b.LightsHint=ei;R.b.PortalHint=fi;R.b.Portal2Hint=gi;R.b.MoveCharHint=hi;R.b.RelsHint=ii;R.b.SlingshotHint=ji;R.b.MultitouchHint=ki;R.b.AmieHint=li;
var mi=Box2D,ni=q,oi=mi.Common.Math.b2Vec2,pi=mi.Dynamics.b2Body,qi=ni.b.bb.extend({init:function(a,b,c,d){this._super(c,b,d,a);this.body.SetType(pi.b2_kinematicBody);this.Tq=k;this.jg=j;this.offset=new oi;this.Ba=new ni.a.I(this.uq())},update:function(a){this._super(a);this.Tq||this.join();this.Tq&&this.body.SetPosition(ni.a.g.cc(this.jg.GetPosition(),this.offset))},h:function(a){this.d.ic||this.Ba.h(a.$,this.transform)},join:function(){this.body.SetType(pi.b2_dynamicBody);this.Tq=g;this.jg=this.d.Ze;
for(var a,b=this.body.GetFixtureList();b;b=b.GetNext())if(b.GetType()===mi.Collision.Shapes.b2Shape.e_circleShape){a=b.GetShape();break}a=this.body.GetWorldPointCachedVector(a.GetLocalPosition());a=ni.a.g.Qj(this.d.b2World,a,qi.Xa);for(var c=0;c<a.length;c++)if(b=a[c].GetBody(),b!==this.body){this.jg=b;break}ni.a.g.Td(this.body,this.jg,this.body.GetWorldCenter(),k);this.offset=mi.Common.Math.b2Math.SubtractVV(this.body.GetPosition(),this.jg.GetPosition());this.body.SetSleepingAllowed(k)}});
qi.Xa=2.5/30;ni.b.StickyBodyClip=qi;var ri=Box2D,si=Modernizr,S=q;function ti(a){this.QN=1.5;this.Se=0.8;this.d=a;this.Hd=new ui(0.5*a.width,0.3*a.height);this.eA=[S.a.v.P("MUSIC_BY"),S.a.v.P("GRAPHICS_BY"),S.a.v.P("DIRECTED_BY")];this.WM=[S.a.v.P("DAVID_LEON"),S.a.v.P("MIHAI_MAKSYM"),S.a.v.P("BY_MAKSYM_HRYNIV")];this.labels=[];var b=this;S.a.w(S.a.j.o,function(){b.TA()},3)}
var ui=ri.Common.Math.b2Vec2,vi=ri.Dynamics.b2Body,wi=S.b.StickyBodyClip.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.wf=[];this.Nl=this.ox=k;this.hc=new S.a.rb(S.a.i.Eu);this.hc.Sc();this.hc.speed=0;this.d.dl=this;this.d.vc?this.pM():this.Nl=g},update:function(a){this._super(a);this.d.vc&&!this.ox&&(this.ox=g,this.d.AK());if(this.Nl)-1<this.hc.speed&&(this.hc.speed-=a.B/20*this.hc.sb),this.hc.update(a);else{for(var b=0;b<this.wf.length;b++)this.wf[b].update(a);this.lg.update(a);this.zg.update(a)}},
h:function(a){this.kz&&this.kz.h(a);if(this.Nl)this.d.ic||this.hc.h(a.$,this.transform);else{if(!this.d.ic){for(var b=0;b<this.wf.length;b++)this.wf[b].h(a.$,this.transform);this.Bq.h(a.$,this.transform);this.Xd.h(a.$,this.transform);this.Cq.h(a.$,this.transform)}this.lg.h(a.C,this.transform);this.zg.h(a.C,this.Or)}},pM:function(){var a=this;this.Wb=this.d.q.Wb;S.a.removeClass(this.Wb.la(),"noShow");si.csstransitions?this.Wb.la().style.opacity=1:(new Tweenable).tween({from:{opacity:0},to:{opacity:1},
duration:300,step:function(){a.Wb.la().style.opacity=this.opacity},easing:"easeOutSine"});this.Wb.rc();this.d.me(k);this.d.rB(g);this.kz=new ti(this.d);this.cC=new S.a.rb(S.a.i.dw);this.cC.Sc();this.Zl=new S.a.rb(S.a.i.Qv);this.Zl.Sc();this.Zl.jc=k;this.om=new S.a.rb(S.a.i.Vu);this.om.Sc();this.om.speed=0.5;this.Fz=new S.a.rb(S.a.i.Wu);this.Fz.Sc();this.Xd=new S.a.rb(S.a.i.Sv);this.Xd.Sc();this.Xd.ga.alpha=150/255;this.Bq=new S.a.rb(S.a.i.Pv);this.Bq.Sc();this.Cq=new S.a.rb(S.a.i.Rv);this.Cq.Sc();
this.lg=new S.a.rb(S.a.i.Xu);this.lg.Sc();this.lg.vb=79;this.wf=[this.cC,this.Zl,this.om,this.Fz];this.zg=new S.a.rb(S.a.i.Mv);this.Or=new S.a.Ga;this.Or.s(this.transform.position.x-80,this.transform.position.y+1);this.zg.Nh=k;this.zg.speed=0.7;this.yJ()},yJ:function(){var a=this;S.a.hb(S.a.j.o,a.Xd.ga,2.5,50/255,function(){S.a.hb(S.a.j.o,a.Xd.ga,2.5,100/255,function(){S.a.hb(S.a.j.o,a.Xd.ga,2.5,30/255,function(){S.a.hb(S.a.j.o,a.Xd.ga,2.5,80/255,function(){S.a.hb(S.a.j.o,a.Xd.ga,2.5,0,function(){a.xK()})})})})})},
Ai:function(){1>this.hc.sb?this.hc.speed=0.3:30>this.hc.sb&&(this.hc.speed+=0.3);this.hc.play()},el:function(){return this.Ea()},xK:function(){this.Cq.jc=k;this.Bq.jc=k;this.Xd.jc=k;this.Zl.jc=g;for(var a=this,b=0;b<this.wf.length;b++)this.wf[b].play(this.wf[b]===this.om?function(){a.bM()}:j);this.lg.play()},bM:function(){this.lg.ck();var a=this;this.lg.play(function(){a.cM()})},cM:function(){var a=this;S.a.w(S.a.j.o,function(){a.zg.play(function(){a.eM()})},0.75)},eM:function(){var a=this,b=a.d.X;
b.body.SetType(vi.b2_dynamicBody);S.a.g.ci(b.body,g);var c=this.Or.position.Copy();c.Multiply(1/this.ja);b.body.SetPosition(c);b.k.kb=k;b.fa(g);b.body.ApplyImpulse(new ui(0,-2),b.body.GetWorldCenter());b.body.SetFixedRotation(g);S.a.w(S.a.j.o,function(){S.a.g.ci(b.body,k);a.zg.vf=g;a.zg.play()},0.5);S.a.w(S.a.j.o,function(){a.xm()},2.5);S.a.A.aa(S.a.J.n.ip,50)},xm:function(){var a=this;a.d.X.k.ak(k);a.d.X.bk(S.a.e.Z(-45));S.a.w(S.a.j.o,function(){a.vL()},1.5);S.a.w(S.a.j.o,function(){a.d.KN()},1)},
vL:function(){var a=this,b=a.d.X;this.Nl=g;b.bk(S.a.e.Z(225));S.a.w(S.a.j.o,function(){b.body.SetFixedRotation(k);b.k.ak(g);b.k.kb=g;b.k.yf();a.d.rB(k);a.d.me(g)},1.5);this.Wb.Vb();si.csstransitions?this.Wb.la().style.opacity=0:(new Tweenable).tween({from:{opacity:1},to:{opacity:0},duration:300,step:function(){a.Wb.la().style.opacity=this.opacity},easing:"easeOutSine"})}});m=ti.prototype;
m.h=function(a){a.C.save();a.C.translate(this.Hd.x,this.Hd.y);S.a.v.Bh()&&this.em&&0<this.em.alpha&&this.em.fc(a.C,0,0,0,1,1);this.wm&&0<this.wm.alpha&&this.wm.fc(a.C,0,0,0,1,1);for(var b,c=0;c<this.labels.length;c++)b=this.labels[c],b.h(a.C);a.C.restore()};m.TA=function(){if(0<this.eA.length){this.LN(this.eA.pop(),this.WM.pop());var a=this;S.a.w(S.a.j.o,function(){a.TA()},4)}else this.oM()};
m.oM=function(){this.em=new S.a.I(S.a.i.Mu);var a=new S.a.$b(S.a.v.P("INSPIRED_BY"),20,30);a.transform.s(-40,0);a.color="rgb(0,0,0)";this.hj(a);S.a.v.Bh()&&this.hj(this.em);this.labels.push(a);var b=this;S.a.w(S.a.j.o,function(){b.qM()},7)};m.qM=function(){this.wm=new S.a.I(S.a.i.Nu);this.hj(this.wm,6)};
m.LN=function(a,b){var c=new S.a.$b(a,20,30);c.transform.s(-10,0);c.bi("right");c.color="rgb(150,150,150)";this.hj(c);var d=new S.a.$b(b,20,30);d.transform.s(10,0);d.bi("left");d.color="rgb(150,150,150)";this.hj(d);this.labels.push(c);this.labels.push(d)};m.hj=function(a,b){a.alpha=0.01;var c=b?b:this.QN,d=this;S.a.$a(S.a.j.o,function(){S.a.w(S.a.j.o,function(){S.a.$a(S.a.j.o,function(){a.alpha=0},function(b,c){a.alpha=c/b},d.Se)},c)},function(b,c){a.alpha=1-c/b},d.Se)};S.b.RoseBodyClip=wi;
S.b.IntroPlayer=ti;var xi=Box2D,T=q;
function yi(a,b){this.d=a;this.success=b;this.zs=g;this.wr=0;this.jA=150;this.FL=600;this.aA=10;this.start=k;this.Hd=new zi(this.d.width/2,this.FL);this.labels=[];this.qk=document.createElement("canvas");this.Mg=this.qk.getContext("2d");this.qk.id="textCanvas";this.qk.width=this.d.width;this.qk.height=this.d.height;this.d.eb.C.canvas.parentElement.insertBefore(this.qk,this.d.eb.C.canvas.nextSibling);var c=new T.a.$b(this.success?T.a.v.P("YOU_DID_IT"):T.a.v.P("YOU_TRIED_HARD"),12,24);c.transform.s(85,
70);c.color=Ai;this.labels.push(c);c=new T.a.$b(T.a.v.P("CREDITS"),11,16);c.transform.s(85,180);c.color=Ai;this.labels.push(c);this.Yf=new zi(85,210);this.Fc("GRAPHIC_ARTISTS","MIHAI_TYMOSHENKO");this.Fc(j,"ANDRIY_SHVUREV");this.Fc("COMPOSER","DAVID_LEON");this.Fc("SFX_BY","IHOR_PRYSHLIAK");this.Fc("PRODUCER","TOM_KINNINBUGRH");this.Fc("IDEA","ANTON_MYKHAYLETS");this.Fc("EVERYTHING_ELSE","MAKSYM_HRYNIV");this.Fc("HTML5_VERSION_SPONSOR","HTML5_SPONSOR");this.Fc("HTML5_VERSION_DEV","CLARITY");this.Fc(j,
"CLARITY_NAMES_1");this.Fc(j,"CLARITY_NAMES_2");this.Fc(j,"CLARITY_NAMES_3");c=new T.a.$b(T.a.v.P("STARS"),11,24);c.transform.position=this.Yf.Copy();c.color=Ai;this.labels.push(c);this.th=0;var d=this;T.a.$a(T.a.j.o,j,function(a,b){d.th=T.a.e.mb(0,0.5,1-b/a);d.start=g},Bi)}
var zi=xi.Common.Math.b2Vec2,Ci=xi.Dynamics.b2Body,Ai="rgba(255,255,255, 1)",Bi=2,Di=T.b.EndLevelBodyClip.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.ua(T.a.Wa.LD);this.$h=new T.b.nd(0.2,0.2);this.$h.de=-0.2;this.$h.kf=0.2;this.px=k},update:function(a){this._super(a);this.px&&(this.$h.update(a.B),this.K.ta=this.$h.value+1.7)},kh:function(a){var b=this.body.GetPosition();this.K.ta=1.7;this.K.xb=0.1;this.$h.progress=T.a.e.Vg();this.$h.update(0);a.Ll(b,0.3,g);var c=this;T.a.w(T.a.j.o,function(){c.am()},
8)},am:function(){this.px=k;this.K.ta=0}}),Fi=T.b.HeroBodyClip.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.UK=g;this.k.kb=k;this.userData=T.a.va();this.Db=[];this.Yp=200;this.HB=0;this.Jn=this.Aq=k;this.Lj=j},update:function(a){this._super(a);this.hB||(this.hB=this.d.la(Ei));this.Lj&&this.Lj.update(a);for(var b=0;b<this.Db.length;b++)this.Db[b].update(a);this.Aq&&!this.Jn&&(a=this.body.GetLinearVelocity(),a.x=Math.min(a.x,-0.05),this.body.SetLinearVelocity(a));if(this.Aq&&!this.Jn&&10>
Math.abs(this.HB-this.Ea().x-254)&&0.1>Math.abs(this.body.GetLinearVelocity().x)){this.body.SetType(Ci.b2_staticBody);this.body.SetLinearVelocity(new zi);this.body.SetAngularVelocity(0);this.Hg=this.Jn=g;this.k.ak(k);T.a.A.aa(T.a.J.n.NA,70);var c=this;T.a.w(T.a.j.o,function(){c.xm()},0.2);this.userData.kn()?T.a.w(T.a.j.o,function(){c.TN()},2):T.a.w(T.a.j.o,function(){c.AL()},1.5)}},OC:function(a){this.Jn?this.Lb.PC(g,a):this._super(a)},h:function(a){this._super(a);this.Lj&&this.Lj.h(a)},my:function(){if(this.df){var a=
this;T.a.pA(T.a.j.o,this,8,4,50,function(){a.CH()});this.d.q.Yj(k);this.d.me(k);this.BI();this.jO=new T.F.kD(this.d.q);this.jO.show();this.d.NM();this.d.YC(new zi(550,480),1.4,10);T.a.w(T.a.j.o,function(){T.a.A.aa(T.a.J.n.OA,70)},7)}},BI:function(){for(var a=this,b=0.33*T.a.va().Xn(),c,d=1;d<b;d++)c=Math.sin(d/b*T.a.e.Vg()),c*=8,T.a.w(T.a.j.o,function(){a.AI()},c)},AI:function(){var a=this.d.Eb.Jd(),a=new T.b.ht(this.d,a,this,this.Ea(),T.a.e.u(0,2*Math.PI));a.Fx();a.Ig=Math.min(this.Yp,600);this.Yp+=
10;this.Db.push(a)},CH:function(){this.body.SetType(Ci.b2_dynamicBody);T.a.g.ci(this.body,k);this.HB=this.Ea().x;this.Aq=g;this.k.kb=k},xm:function(){this.bk(T.a.e.Z(-135))},TN:function(){this.k.Fg(0);this.k.Qc("smile",g);this.NB()},AL:function(){this.hB.gJ();var a=this;T.a.w(T.a.j.o,function(){a.uL()},1)},uL:function(){var a=this;this.bk(T.a.e.Z(135));T.a.w(T.a.j.o,function(){a.yL()},1.5)},yL:function(){var a=this;this.xm();T.a.w(T.a.j.o,function(){a.SH()},2)},SH:function(){this.bk(T.a.e.Z(90));
T.a.A.aa(T.a.J.n.mB,70);var a=this.k.ha.Wc.closeSlow;a.ck(18);a.Nh=k;a.loop=k;a.cd=k;this.k.Qc("closeSlow",g,function(){a.Gb=g});var b=this;T.a.$a(T.a.j.o,j,function(a,d){b.Mb[0].transform.rotation=T.a.e.mb(0,T.a.e.Z(70),1-d/a)},1.7);this.NB()},NB:function(){var a=this;T.a.w(T.a.j.o,function(){a.Lj=new yi(a.d,a.userData.kn())},1)}}),Ei=T.b.StickyBodyClip.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.d.dl=this;this.Fi=this.transform.position.Copy();this.Fi.x+=28;this.Fi.y-=78;this.cl=new zi;
this.Nn=new T.a.rb(T.a.i.hw);this.Kb=new T.a.rb(T.a.i.bu);this.Kb.Sc();this.Qf=new T.a.rb(T.a.i.cu);this.Qf.Sc();this.Vr=this.Ul=this.gC=k;this.startTime=0;this.userData=T.a.va();this.nn=this.userData.kn();this.kn||(this.Kb.ck(0.55*this.Kb.vb),this.Qf.ck(0.55*this.Qf.vb));this.zm=this.nn?4:8/2.7;this.Ic=this.Le=0;this.ol=new T.b.nd(0.05,0.05);this.ol.de=-0.1;this.ol.kf=0},update:function(a){this._super(a);if(0<this.startTime){var b=T.a.e.Bb((this.d.totalTime-this.startTime)/this.zm,0,1),b=T.a.e.hJ(b,
this.Kb.vb),b=this.Ul?this.Kb.vb-b:b;this.Kb.Dg(b);this.Qf.Dg(b);this.Kb.sb===this.Kb.vb&&(!this.nn&&!this.Ul?(this.Ul=g,this.startTime=this.d.totalTime):this.nn&&!this.Vr&&(this.Vr=g))}this.Ul?this.Ic-=0.0020:(this.Vr?this.Le=0.05:(8<Math.abs(this.Kb.sb-this.Kb.vb)&&(this.Le-=5E-4),this.Le=T.a.e.Bb(this.Le,-0.05,0.035)),this.Ic=T.a.e.Bb(this.Ic+this.Le,0,1));this.ol.update(a.B);this.Kb.update(a);this.Qf.update(a);this.Qf.ga.alpha=T.a.e.Bb(1-this.Ic-this.ol.value,0,0.98);this.Nn.update(a)},h:function(a){this.d.ic||
(this.Kb.h(a.$,this.transform),this.Qf.h(a.$,this.transform));this.Nn.h(a.C,this.transform)},Ai:function(){if(!this.gC){this.gC=g;var a=this;T.a.w(T.a.j.o,function(){a.startTime=a.d.totalTime},this.nn?5:6)}this.Le=Math.max(8>Math.abs(this.Kb.sb-this.Kb.vb)?0.03:0.01,this.Le+0.0030)},el:function(){this.cl.x=this.cl.y=-20*this.Kb.sb/this.Kb.vb;this.cl.Add(this.Fi);return this.cl},gJ:function(){this.Nn.speed=0.7;this.Nn.play()}});m=yi.prototype;
m.update=function(a){this.start&&this.Hd.y>this.jA&&(this.Hd.y-=15*a.B);this.Hd.y<=this.jA&&(this.wr+=a.B);5<this.wr&&this.xN()};m.h=function(a){a=a.C;a.save();a.fillStyle="rgba(0, 0, 0,"+this.th+")";a.fillRect(0,25,this.d.width,this.d.height);a.restore();if(this.Mg){this.Mg.save();this.Mg.clearRect(0,0,this.d.width,this.d.height);T.a.e.zb(this.Mg,this.d.transform);this.Mg.translate(this.Hd.x,this.Hd.y);for(var b=0;b<this.labels.length;b++)a=this.labels[b],a.h(this.Mg);this.Mg.restore()}};
m.Fc=function(a,b){if(a){var c=new T.a.$b(T.a.v.P(a),11,16);c.transform.s(this.Yf.x-this.aA,this.Yf.y);c.color=Ai;c.bi("right");this.labels.push(c)}b&&(c=new T.a.$b(T.a.v.P(b),11,16),c.transform.s(this.Yf.x+this.aA,this.Yf.y),c.color=Ai,c.bi("left"),this.labels.push(c));this.YL()};m.YL=function(){this.Yf.y+=23};
m.xN=function(){if(k!=this.zs)for(var a=(this.zs=k)?1:0,b=this,c=0;c<this.labels.length;c++)T.a.hb(T.a.j.o,this.labels[c],Bi,a,0!==c?f:function(){for(var a=0;a<b.labels.length;a++)b.labels[a].visible=k})};T.b.EndLastLevelBodyClip=Di;T.b.EndHeroBodyClip=Fi;T.b.EndRoseBodyClip=Ei;var Gi=window,Hi=q;function Ii(a){Ji=a}var Ji,Ki=k,Li=f,Mi=1,Ni=0;
function Oi(){Ji.save();Ji.clearRect(0,0,Ji.canvas.width,Ji.canvas.height);Ji.fillStyle="rgba(0, 0, 0,"+Mi+")";Ji.fillRect(0,0,Ji.canvas.width,Ji.canvas.height);Ji.restore()}m=Ii.prototype;m.update=function(){Mi=Hi.a.e.ba(Mi,Ni,0.08);Mi=1<Mi?1:0>Mi?0:Mi;Oi();if(Mi===Ni&&(0===Mi&&(Ji.canvas.style.visibility="hidden"),this.jd(k),Li))try{Li()}catch(a){Gi.console&&Gi.console.log("Failed Action Post Transition. "+a)}};m.jd=function(a){a&&!Ki?(Hi.a.Cb.jd(this),Ki=g):!a&&Ki&&(Hi.a.Cb.oh(this),Ki=k)};
m.gs=function(){Ji.canvas.style.visibility="visible";Mi=1;Oi()};m.fadeIn=function(a){Ji.canvas.style.visibility="visible";Mi=1;Li=a;Ni=0;this.jd(g)};m.fadeOut=function(a){Ji.canvas.style.visibility="visible";Mi=0;Li=a;Ni=1;this.jd(g)};Hi.a.DE=Ii;var Pi=window,Qi=document,Ri=Box2D,U=q;
function Si(a,b,c){this.q=c;this.Gx=k;this.totalTime=0;this.tl=11;this.RI=1;this.ic=g;this.hz=Qi.getElementById("loading");this.rf=[];this.entities=new U.a.dt;this.entities.Hw=0;this.entities.add=function(a){a.Jw=this.Hw;this.Hw++;a.Bk||(a.Bk=0);a.zIndex||(a.zIndex=0);this.Lf.push(a)};this.entities.ZI(function(a){a instanceof U.b.bb&&a.Oe()});this.entities.UN(function(a,b){var c=a.Bk-b.Bk;0===c&&(c=a.zIndex-b.zIndex,0===c&&(c=a.Jw-b.Jw));return c});this.eb=a;this.b2World=U.a.g.QI();this.Ze=this.b2World.GetBodyList();
this.height=this.width=0;this.KK();this.rh=this.X=this.Ak=this.td=this.sa=this.Tp=this.xq=this.ep=j;this.io=this.bP=this.aP=g;this.Rh=[];this.hd=[];this.Vh=0;this.xC=[];this.hr=k;this.vc=g;this.dl=j;this.oc=g;this.kj=this.Nq=k;this.dr=1;this.Th=[new U.b.ZD(this),new U.b.zG(this),new U.b.Xg(this),new U.b.zw(this),new U.b.lH(this),new U.b.uD(this),new U.b.AG(this),new U.b.tD(this),new U.b.XD(this,"hint"),new U.b.mD(this)];this.transform=new U.a.Ga;this.hm=k}var Ti=Ri.Common.Math.b2Vec2;m=Si.prototype;
m.la=function(a){for(var b=0;b<this.entities.elements.length;b++)if(this.entities.elements[b]instanceof a)return this.entities.elements[b];return j};m.kl=function(){this.entities.clear();this.rh=this.X=j;this.Rh=[];this.hd=[];this.Vh=0;var a=this.eb.C;a.clearRect(0,0,a.canvas.width,a.canvas.height);a=this.eb.$;a.clearRect(0,0,a.canvas.width,a.canvas.height);a=this.eb.background;a.clearRect(0,0,a.canvas.width,a.canvas.height)};m.mL=function(a,b){if(this.Qz()){var c=U.a.gL(a);this.Sz(c,b)}};
m.Hh=function(a,b){if(this.Qz()){var c=this;U.a.fL.load(a,function(a){c.Sz(a,b)})}};m.Qz=function(){if(this.hr)return k;this.hr=g;this.Uz(g);this.width=this.q.canvas.width;this.hl=this.width/30;this.height=this.q.canvas.height;this.Rf=this.height/30;return g};
m.Sz=function(a,b){function c(){e.eb.background.clearRect(0,0,e.q.jp.width,e.q.jp.height);e.vM(v);e.HI();for(var c,d=0;d<a.items.length;d++){c=a.items[d].children;for(var h=0;h<c.length;h++)e.ie(c[h])}U.a.g.zI(e.Ze,new Ti(e.hl,e.Rf));U.a.oa.cp(e.Ze);U.a.w(U.a.j.ea,function(){e.hr=k;e.Uz(k);b&&b()},0.3)}for(var d=[],e=this,h,n=k,p=new PxLoader({appVersion:U.version}),r=a.items.length-1;0<=r;r--)h=a.items[r].children[0].config,h=!e.Ra()?h.viewType:h.blackViewType?h.blackViewType:h.viewType,"McHeroView"===
h?(U.a.tc.images.McHeroView=U.a.tc.images[U.a.i.Lo],U.a.tc.aq.push("McHeroView")):h!==f&&(n|=U.a.tc.YA(p,h,"img/"+h+"-hd.png"),d.push(h+"-hd"));for(var v=a.levelProperties.backgrounds,r=0;r<v.length;r++){h=v[r];var E=h.type,n=n|U.a.tc.YA(p,E,"img/"+E+"-hd"+(h.config.jpg?".jpg":".png"));d.push(E+"-hd")}U.a.Up.load(d,function(){n?(p.addCompletionListener(c),p.start()):c()})};
m.vM=function(a){for(var b=this.eb.background,c=[],d=k,e,h=0;h<a.length;h++){e=a[h];var n=new U.a.Ga;n.s(e.position.x,this.height-e.position.y);n.Ua(U.a.e.Z(e.rotation||0));var p=e.initialScale;n.p(e.scale.x/p,e.scale.y/p);var p=e.config.type,r;if(p)try{p in U.b?(r=new U.b[p](e,this,n),c.push(r),d=g):Pi.console&&Pi.console.log(p+" not in cj.elem namespace")}catch(v){Pi.console&&Pi.console.log(p+" "+v)}else r=new U.b.nD(e,this,n),c.push(r)}if(d){c[0].img.h(b,c[0].transform);for(h=1;h<c.length;h++)this.entities.add(c[h])}else for(h=
0;h<c.length;h++)c[h].img.h(b,c[h].transform)};m.ie=function(a){for(var b,c=0;c<this.Th.length;c++)if(b=this.Th[c],b.match(a)){b=b.ie(a);b!=j&&this.wM(b,a);break}};
m.wM=function(a,b){var c=b.config,d=c.iPhoneClipType||c.clipType,e=new U.a.Ga,h=c.scale.x,n=c.scale.y;if(c.flipX===g||"true"===c.flipX)h*=-1;if(c.flipY===g||"true"===c.flipY)n*=-1;var p=c.z;e.p(h,n);e.s(30*b.position.x,this.height-30*b.position.y);e.Ua(U.a.e.Z(c.rotation||0));h=f;d?d in U.b?h=new U.b[d](c,a,this,e):Pi.console&&Pi.console.log(d+" not in cj.elem namespace"):h=new U.b.bH(c,a,this,e);h!==f&&h!==j&&("plasticine"===c.type&&this.rf.push(h),p&&0!==p&&h.ua(p),h.zIndex=c.zIndex,this.entities.add(h))};
m.Uz=function(a){a?U.a.removeClass(this.hz,"hide"):U.a.addClass(this.hz,"hide")};m.kh=function(){this.Gx=g;this.q.kh()};m.Ra=function(){return this.q.theme===U.a.ac.si};m.XK=function(){return this.q.theme===U.a.ac.Fk};m.tb=function(){return this.q.theme===U.a.ac.Tk};m.ig=function(){return this.q.theme===U.a.ac.Sk};m.update=function(a){this.totalTime+=a.B;this.Ak&&this.Ak.update(a);U.a.g.$O(this.b2World,a.B);for(var b=0;b<this.entities.elements.length;b++)this.entities.elements[b].update(a);this.entities.update()};
m.h=function(){var a=this.eb.C;a.clearRect(0,0,a.canvas.width,a.canvas.height);this.tl+=1;this.tl>this.RI&&(this.eb.$.clearRect(0,0,this.q.Dr.width,this.q.Dr.height),this.ic=k);if(this.hm){var a=j,b;for(b in this.eb)this.eb.hasOwnProperty(b)&&(a=this.eb[b],a.save(),U.a.e.zb(a,this.transform));for(a=0;a<this.rf.length;a++)this.rf[a].S.save(),U.a.e.zb(this.rf[a].S,this.transform)}for(var c=0;c<this.entities.elements.length;c++)a=this.entities.elements[c],a.visible&&a.h(this.eb);this.ic||(this.ic=g,
this.tl=0);if(this.hm){for(b in this.eb)this.eb.hasOwnProperty(b)&&(a=this.eb[b],a.restore());for(a=0;a<this.rf.length;a++)this.rf[a].S.restore()}};m.NM=function(){for(var a=0;a<this.rf.length;a++)this.rf[a].hn()};m.zH=function(a){this.Rh.push(a)};m.Xk=function(a){this.Vh+=a.value;this.hd.push(a);for(var b=0;b<this.Rh.length;b++)this.Rh[b].WA(a.Uh)};m.KM=function(a){var b=this.hd.indexOf(a);if(!(0>b)){this.Vh-=a.value;this.hd.splice(b,1);for(b=0;b<this.Rh.length;b++)this.Rh[b].XA(a.Uh)}};
m.jK=function(){if(0>=this.hd.length)return j;for(var a=U.a.e.u(0,this.Vh),b=0,c=0,d=j;a>b;)d=this.hd[c],b+=d.value,c++;return this.hd[c-1].Uh};m.tK=function(a){for(var b,c=0;c<this.hd.length;c++)if(b=this.hd[c].Uh,b.Dh()&&b.touch.id===a.id)return b};m.IM=function(a,b){this.xC[b]=a};m.rK=function(a){return this.xC[a]};m.OJ=function(){return this.dl?this.dl:this.X};
m.HI=function(){this.ep=this.Ra()?new U.b.sD(this):this.XK()?new U.b.$G(this):this.tb()?new U.b.oH(this):this.ig()?new U.b.mH(this):new U.b.rD(this);this.ep.sI(25);this.entities.add(this.ep);this.xq=new U.b.oE(this);this.entities.add(this.xq);this.Tp=new U.b.GD(this);this.entities.add(this.Tp);this.sa=new U.b.nE(this,j,U.a.i.lw);this.sa.ua(U.a.Wa.bE);this.entities.add(this.sa);this.td=new U.b.De(this,j,U.a.i.Fu);this.td.ua(U.a.Wa.RD);this.entities.add(this.td);this.Eb=new U.b.mt(this,j,U.a.i.Ug);
this.Eb.ua(U.a.Wa.ND);this.entities.add(this.Eb);this.Ak=new U.a.qH(this.tb()?0.02:0.03)};m.AK=function(){this.rh.fa(k);this.Eb.fa(k);this.Eb.alpha=0};m.KN=function(){this.rh.fa(g);this.rh.An();this.Eb.fa(g);U.a.hb(U.a.j.o,this.Eb,2,1)};m.p=function(a){this.transform.p(a,a)};m.s=function(a,b){this.transform.s(a,b)};m.YC=function(a,b,c){this.hm=g;var d=new Ti;d.x=this.width/2-a.x*b;d.y=this.height/2-a.y*b;d.x=U.a.e.Bb(0,this.width,d.x);d.y=U.a.e.Bb(0,this.height,d.y);U.a.XL(U.a.j.o,this,c,d,b)};
m.me=function(a){!this.Nq&&this.oc!=a&&((this.oc=a)||this.q.yk.kI())};m.rB=function(a){this.Nq!=a&&(this.Nq=a)};m.Rl=function(a){this.q.yk.Rl(a)};m.xa=function(a){if(this.oc){this.Xk(new U.b.Ok(new U.b.kH(a),5));for(var b=this.Dy(a),c=j,d=0;d<b.length;d++)if(c=b[d],c.xa(a)){a.addListener(c);break}}};
m.ib=function(a){if(this.oc){for(var b=this.Dy(a),c=a.Ib?a.Ib.Dc():-Infinity,d=j,e=0;e<b.length;e++)if(d=b[e],!a.Ib&&d.xa(a))a.addListener(d);else if(d.hg()&&d.Dc()>c&&d.xa(a)){a.Qa();a.addListener(d);break}a.ib()}};m.Qa=function(a){if(this.oc){for(var b=j,c=0;c<this.hd.length;c++)b=this.hd[c],b.Uh.Dh()&&b.Uh.touch===a&&this.KM(b);a.Qa()}};
m.Dy=function(a){var b,c=new Ti(a.x/30,a.y/30);b=U.a.g.Qj(this.b2World,c,a.ob);0<b.length&&b.sort(function(a,b){var d=b.GetBody().GetUserData().Dc()-a.GetBody().GetUserData().Dc();if(0===d)var d=U.a.g.Aa(c,a.GetBody().GetPosition()).LengthSquared(),e=U.a.g.Aa(c,b.GetBody().GetPosition()).LengthSquared(),d=d-e;return d});a=[];var d=[],e=k,h,n,p;p=0;for(n=b.length;p<n;p++)if(h=b[p].GetBody().GetUserData())a.push(h),"PlasticinePartBodyClip"===h.name&&(e=g);p=0;for(n=a.length;p<n;p++)b=a[p],b.ae(d.length,
e)&&d.push(b);return d};
m.KK=function(){var a=new Ri.Dynamics.b2ContactListener;a.BeginContact=function(a){var c=a.GetFixtureA().GetBody().GetUserData(),d=a.GetFixtureB().GetBody().GetUserData();c&&c.dd(a.GetFixtureB().GetBody(),a);d&&d.dd(a.GetFixtureA().GetBody(),a)};a.EndContact=function(a){var c=a.GetFixtureA().GetBody().GetUserData(),d=a.GetFixtureB().GetBody().GetUserData();c&&c.Km(a.GetFixtureB().GetBody(),a);d&&d.Km(a.GetFixtureA().GetBody(),a)};a.PreSolve=function(a){if(a.IsTouching()){var c=a.GetFixtureA().GetBody().GetUserData(),
d=a.GetFixtureB().GetBody().GetUserData();c&&c.Jm(a.GetFixtureB().GetBody(),a);d&&d.Jm(a.GetFixtureA().GetBody(),a)}};a.PostSolve=function(a){if(a.IsTouching()){var c=a.GetFixtureA().GetBody().GetUserData(),d=a.GetFixtureB().GetBody().GetUserData();c&&a.GetFixtureB().GetBody();d&&a.GetFixtureA().GetBody()}};this.b2World.SetContactListener(a)};U.b.Ew=Si;var Ui=Class,V=q;
function Vi(a){this.q=a;this.S=a.eb.C;this.transform=new V.a.Ga;this.transform.s(this.S.canvas.width/2,this.S.canvas.height/2);this.ik=this.Dm=0;this.Xi=g;this.Xl=this.Lr=this.bd=k;this.oc=g;this.Rd=[];this.Ui=a.Pa;this.un(a.Pa);this.$n=k;this.jm=0;this.Um=new W;this.gj=new V.a.Q(0,0,0,0);this.Ta=new Wi;this.Ta.transform.s(140,160);this.userData=V.a.va();this.II();this.ec=[];this.iy=[];this.mh(0);this.mh(1);this.mh(2);this.mh(3);this.mh(4);this.mh(5);this.qI();this.iq();this.an();this.ce=new V.a.jH;
this.$f=j}var W=Box2D.Common.Math.b2Vec2,Xi=2*Math.PI/6,Yi=new V.a.Q(0,0,0,0),Zi=new V.a.Q(0,0,0,1),$i=new W;m=Vi.prototype;m.update=function(a){for(var b=0;b<this.ec.length;b++)this.ec[b].update(a);!this.$n&&this.fb!=this.Y&&(a=Math.max(Math.abs(this.fb-this.Y)*this.ik,this.Dm),this.fb=V.a.e.ba(this.fb,this.Y,a),this.Xi=g);this.an();this.Xh()};
m.h=function(){this.S.clearRect(0,0,this.S.canvas.width,this.S.canvas.height);this.Cg.clearRect(0,0,this.Cg.canvas.width,this.Cg.canvas.height);for(var a,b=0;b<this.ah.length;b++)a=this.ah[b],0<a.alpha&&a.eJ(this.S,this.S.canvas.width,this.S.canvas.height);if(this.Lr){this.S.save();V.a.e.zb(this.S,this.transform);for(b=0;b<this.ec.length;b++)this.ec[b].h(this.S);this.S.restore();this.Ta.h(this.S)}this.S.fillStyle=this.gj.AC();this.S.fillRect(0,0,this.S.canvas.width,this.S.canvas.height);this.bg.h(this.Cg);
this.Df.h(this.Cg)};m.addListener=function(a){this.Rd.push(a)};m.removeListener=function(a){a=this.Rd.indexOf(a);0<=a&&this.Rd.splice(a,1)};
m.mh=function(a){var b,c=this.userData.Xn()>=this.userData.dC(a);if(c)switch(a){case 0:b=new aj(this,a);break;case 1:b=new bj(this,a);break;case 2:b=new dj(this,a);break;case 3:b=new ej(this,a);break;case 4:b=new fj(this,a);break;case 5:b=new gj(this,a);break;default:return}else b=4===a?new hj(this,j,a,k):new ij(this,j,a);this.ec.push(b);c&&(a>this.userData.unlockedChapters&&5>a)&&(4===a?this.EI(b):this.xI(b))};
m.xI=function(a){this.Xl=g;this.me(k);this.un(a.index-1);this.iq();var b=this;V.a.w(V.a.j.ea,function(){b.Zr(a.index)},0.7);this.Iw(a,new ij(this,a,a.index))};m.Iw=function(a,b){b.nk=a;b.bq.addListener(this,this.BA);this.iy[a.index]=b;a.alpha=0;a.ma.push(b);a.sh=b};m.EI=function(a){var b=V.a.va();if(!b.openedMultiTouch){this.Xl=g;this.un(a.index-1);this.iq();var c=this;V.a.w(V.a.j.ea,function(){c.Zr(a.index)},0.7);b.openedMultiTouch=g;V.a.Ee(b)}this.Iw(a,new hj(this,a,a.index,g))};
m.BA=function(a){this.iy[a].bq.removeListener(this,this.BA);this.me(g);this.userData.unlockedChapters=Math.max(this.userData.unlockedChapters,a);V.a.Ee(this.userData)};m.II=function(){this.Cg=document.getElementById("scoreCanvas").getContext("2d");this.bg=new X(V.a.i.Ho);this.bg.transform.s(30,this.Cg.canvas.height-24);this.Df=new V.a.$b("",12,12);this.Df.transform.s(52,this.Cg.canvas.height-16);this.Df.bi("left");this.Df.color="rgb(150,150,150)";this.aB()};
m.aB=function(){var a=V.a.v.Ub("STARS_AND_SCORE",[(this.bd?this.userData.RJ(this.Ui):this.userData.Xn()).toString(),this.bd?30:150,this.bd?this.userData.QJ(this.Ui):this.userData.xk()]);this.Df.CB(a)};m.PB=function(){this.aB();V.a.hb(V.a.j.ea,this.Df,0.3,1,j);V.a.hb(V.a.j.ea,this.bg,0.3,1,j)};m.az=function(){V.a.hb(V.a.j.ea,this.Df,0.3,0,j);V.a.hb(V.a.j.ea,this.bg,0.3,0,j)};
m.OB=function(){var a=this;a.bd=k;this.PB();a.Lr=g;a.Ta.visible=g;var b=a.transform.scale.x;V.a.$a(V.a.j.ea,j,function(c,d){var e=1-d/c,h=V.a.e.ba(b,1,e);V.a.H.Sd(Zi,Yi,e,a.gj);a.transform.p(h,h)},0.3);V.a.hb(V.a.j.ea,this.Ta,0.3,1,j);V.a.A.Mr(V.a.J.Tc.lf)};
m.DK=function(){this.bd=g;this.az();var a=this,b=a.transform.scale.x;V.a.$a(V.a.j.ea,function(){a.q.LL(a.Ui);a.q.gI(a.Ui);a.LB()},function(c,d){var e=1-d/c,h=V.a.e.ba(b,5,e);V.a.H.Sd(Yi,Zi,e,a.gj);a.transform.p(h,h)},0.3);V.a.hb(V.a.j.ea,this.Ta,0.3,0,function(){a.Ta.visible=g})};m.LB=function(a){this.bd=g;this.PB();this.Lr=k;this.q.jr.show(a);var b=this;V.a.$a(V.a.j.ea,j,function(a,d){V.a.H.Sd(Zi,Yi,1-d/a,b.gj)},0.3)};
m.CK=function(){this.az();var a=this;V.a.$a(V.a.j.ea,function(){a.OB()},function(b,c){V.a.H.Sd(Yi,Zi,1-c/b,a.gj)},0.3)};m.me=function(a){this.oc!=a&&(this.oc=a)};m.xa=function(a){if(this.oc){this.ce.x=a.x-this.transform.position.x;this.ce.y=a.y-this.transform.position.y;for(var b=0;b<this.Rd.length;b++)this.Rd[b].xa(this.ce);!this.bd&&(!this.$f&&this.oc)&&(this.$f=a,this.Um.x=a.x,this.Um.y=a.y,this.$n=g)}};
m.ib=function(a){if(this.oc){this.ce.x=a.x-this.transform.position.x;this.ce.y=a.y-this.transform.position.y;for(var b=0;b<this.Rd.length;b++)this.Rd[b].ib(this.ce);!this.bd&&(this.$f===a&&this.oc)&&(a=new W(a.x,a.y),b=a.x-this.Um.x,0<Math.abs(b)&&(this.jm=b,b=1.8*(this.jm/this.S.canvas.width),this.fb+=b,this.Xi=g,this.ik=b,V.a.g.M(a,this.Um)))}};
m.Qa=function(a){if(this.oc){this.ce.x=a.x-this.transform.position.x;this.ce.y=a.y-this.transform.position.y;for(var b=0;b<this.Rd.length;b++)this.Rd[b].Qa(this.ce);a===this.$f&&(this.$f=j,this.bd||(0<this.jm&&this.fb>this.Hf*Xi?this.Hf++:0>this.jm&&this.fb<this.Hf*Xi&&this.Hf--,this.Pr(),this.Dm=Math.max(Math.abs(this.Y-this.fb)/20,0.02),this.Xi=g,this.$n=k))}};m.Xh=function(){if(!this.bd)for(var a,b,c=0;c<this.ec.length;c++)a=this.ec[c],b=this.fb+a.offset,a.transform.s(340*Math.sin(b),0)};
m.un=function(a){this.Hf=-a;this.Pr();this.Dm=0.09};m.an=function(){if(this.Xi){var a=-this.fb/Xi,b=Math.floor(a),c=b%6;0>c&&(c+=6);this.fN(c,(c+1)%6,a-b);this.Ta.lN(a);this.xJ(a);for(var d,b=0;b<this.ec.length;b++)a=this.ec[b],c=this.fb+a.offset,c=(Math.cos(c)+1)/2,d=0.7+(1.3-0.7)*c*c,a.transform.scale.x=d,a.transform.scale.y=d,a.$j(c);this.ec.sort(function(a,b){return a.depth-b.depth});this.Xi=k}};m.Pr=function(){this.Y=this.Hf*Xi};m.iq=function(){this.fb=this.Y};
m.aN=function(a){var b=this.ec[this.ec.length-1].index;a=a.index;var c=b-a;0===b&&a===this.ec.length-1?c=1:b===this.ec.length-1&&0===a&&(c=-1);1>=c&&-1<=c&&(this.Hf+=c,this.Pr(),this.Dm=0.09,this.$f=j,this.$n=k)};
m.qI=function(){this.mi={ix:{Wf:"black",backgroundImage:new V.a.I(V.a.i.Bo),qf:new V.a.Q(50,50,50,0.25),ys:new V.a.Q(225,225,225,1),Ne:new V.a.Q(75,75,75,1),ni:$("#gameBorderBlack"),qi:$("#menuHeaderBlack"),pi:$("#menuFooterBlack")},blue:{Wf:"blue",backgroundImage:new V.a.I(V.a.i.Ik),qf:new V.a.Q(0,37,63,0.5),ys:new V.a.Q(66,97,123,1),Ne:new V.a.Q(22,45,63,1),ni:$("#gameBorderBlue"),qi:$("#menuHeaderBlue"),pi:$("#menuFooterBlue")},fP:{Wf:"white",backgroundImage:new V.a.I(V.a.i.Co),qf:new V.a.Q(0,
0,0,0.5),ys:new V.a.Q(196,196,196,1),Ne:new V.a.Q(75,75,75,1),ni:$("#gameBorderWhite"),qi:$("#menuHeaderWhite"),pi:$("#menuFooterWhite")},zM:{Wf:"purple",backgroundImage:new V.a.I(V.a.i.Eo),qf:new V.a.Q(63,39,63,0.5),ys:new V.a.Q(35,20,31,1),Ne:new V.a.Q(50,40,50,1),ni:$("#gameBorderPurple"),qi:$("#menuHeaderPurple"),pi:$("#menuFooterPurple")}};this.If=[this.mi.ix,this.mi.blue,this.mi.fP,this.mi.zM,this.mi.ix,this.mi.blue];this.ah=[new V.a.I(V.a.i.Bo),new V.a.I(V.a.i.Ik),new V.a.I(V.a.i.Co),new V.a.I(V.a.i.Eo),
new V.a.I(V.a.i.Mt),new V.a.I(V.a.i.Ik)];this.ty=[new V.a.Q(150,150,150,1),new V.a.Q(66,97,123,1),new V.a.Q(150,150,150,1),new V.a.Q(110,90,110,1),new V.a.Q(150,150,150,1),new V.a.Q(66,97,123,1)];this.Az=0;this.qf=new V.a.Q(0,0,0,0.25);this.jq=new V.a.Q(150,150,150,1);this.Ne=new V.a.Q(85,85,85,1);this.Zp=k;for(var a=0;a<this.ah.length;a++)this.ah[a].alpha=0};
m.xJ=function(a){a=0>a?6+a%6:a%6;var b=a<this.Az,c=b?Math.ceil(a)%6:Math.floor(a),d=b?Math.floor(a):Math.ceil(a)%6;if(!(0>c||0>d||c>this.If.length-1||d>this.If.length-1)){if(c!=d){var e=b?1-(a-d):a-c,b=b?a-d:1-(a-c);0.9<e&&(e=1,b=0,$("#shareLinks").removeClass(this.If[c].Wf),$("#shareLinks").addClass(this.If[d].Wf),$("#container").removeClass(this.If[c].Wf),$("#container").addClass(this.If[d].Wf));c=this.If[c];d=this.If[d];c.ni.css({opacity:b});d.ni.css({opacity:e});c.qi.css({opacity:b});d.qi.css({opacity:e});
c.pi.css({opacity:b});d.pi.css({opacity:e});this.Zp&&(V.a.H.Sd(c.qf,d.qf,e,this.qf),document.getElementById("backgroundOverlay").style.background=this.qf.AC());V.a.H.Sd(c.Ne,d.Ne,e,this.Ne);$(".disabledIcon").css({"background-color":this.Ne});$("#sharePanelHitArea span").css({color:this.jq})}this.Az=a;this.Zp=!this.Zp}};
m.fN=function(a,b,c){var d=this.ah[a];d.alpha=1-c;d=this.ah[b];d.alpha=c;this.q.mf.rn(a,b,c);this.q.nf.rn(a,b,c);this.q.GL.rn(a,b,c);V.a.H.Sd(this.ty[a],this.ty[b],c,this.jq);this.Df.color=this.jq.toString()};m.Zr=function(a){a-1===-this.Hf&&this.un(a)};m.kl=function(){this.S.clearRect(0,0,this.S.canvas.width,this.S.canvas.height)};
var kj=Ui.extend({init:function(a,b){this.Id=a;this.transform=new V.a.Ga;this.alpha=1;this.index=b;this.depth=-1;this.offset=2*b*Math.PI/6;this.visible=g;this.Ob=[];this.yl=[];this.ma=[];this.sh=j;this.N=[];this.Yc();this.Lx()},update:function(a){if(0.5<this.depth)for(var b=0;b<this.ma.length;b++)this.ma[b].update(a)},h:function(a){a.save();V.a.e.zb(a,this.transform);a.globalAlpha=this.alpha;for(var b,c=0;c<this.N.length;c++)b=this.N[c],(this.visible||b.HK)&&b.h(a);this.sh&&this.sh.h(a);this.Qb.h(a);
a.restore()},Lx:function(){this.Ke=new jj(this,180);this.Ke.ob=40;this.Ke.Yx=g;this.Ke.Mi.addListener(this,this.sO);this.Id.addListener(this.Ke)},Yc:function(){this.background=new X(V.a.i.Mo);this.Qb=new X(V.a.i.Jk);this.N.push(this.background)},$j:function(a){this.depth!=a&&(this.depth=a,this.an())},an:function(){this.Qb.alpha=V.a.e.Bb((1-this.depth)/0.2,0,1);var a=V.a.e.Bb((this.depth-0.7)/0.3,0,1);this.background.alpha=V.a.e.Bb(3*a,0,1);for(var b=0;b<this.Ob.length;b++)this.Ob[b].Bd(a);for(b=0;b<
this.yl.length;b++)this.yl[b].depth=this.depth;this.visible=0<a},sO:function(){if(!this.Id.bd&&0.1<this.depth&&(!this.sh||!this.sh.visible))0.99<this.depth?this.Ar():this.Id.aN(this)},Ar:function(){this.Id.Ui=this.index;V.a.A.aa(V.a.J.n.click,80);this.Id.DK()},Ea:function(){return this.transform.position},s:function(a,b){this.transform.s(a,b)},p:function(a,b){this.transform.p(a,b)}}),ij=kj.extend({init:function(a,b,c){this.parent=b;this.mz=1===c;this._super(a,c);this.nk=j;this.Kc=k;this.bq=new V.a.Yb},
update:function(a){this._super(a);this.nk&&this.$j(this.nk.depth)},h:function(a){this._super(a);this.Fb&&(a.save(),V.a.e.zb(a,this.transform),this.Fb.h(a),a.restore())},Yc:function(){this.Qb=this.background=j;1==this.index?(this.background=new X(V.a.i.Dv),this.Qb=new X(V.a.i.Jk)):2==this.index?(this.background=new X(V.a.i.rv),this.Qb=new X(V.a.i.Do)):3==this.index?(this.background=new X(V.a.i.Lv),this.Qb=new X(V.a.i.Fo)):(this.background=new X(V.a.i.Mo),this.Qb=new X(V.a.i.Jk));this.Lg=new lj(this.index,
this.mz);this.Lg.transform.s(-74,-28);this.N.push(this.background);this.N.push(this.Lg)},$j:function(a){this._super(a);this.Lg&&this.Lg.sn(0.9<a);!this.Kc&&(this.nk&&1===a)&&this.EA()},EA:function(){this.fC()},fC:function(){var a=this;a.Kc=g;V.a.pA(V.a.j.ea,this,0.7,5,20,function(){a.Al()})},Al:function(){this.Id.Xl=k;var a=this;V.a.hb(V.a.j.ea,this,0.35,0);V.a.hb(V.a.j.ea,a.nk,0.3,1,j);V.a.w(V.a.j.ea,function(){a.bq.yb(a.index);a.parent.ma.pop();a.parent.sh=j},1);this.Fb=new mj(new W,V.a.i.Jt);this.Fb.transform.rotation=
V.a.e.Z(-90);this.Fb.xb=-0.5;this.Fb.Yd=new V.b.Na(0,20);this.Fb.ve=new V.b.Na(0,20);this.Fb.speed=new V.b.Na(220,60);this.Fb.mM=new V.b.Na(1,0.5);this.Fb.Fp(75);this.ma.push(this.Fb)},Ar:aa()}),hj=ij.extend({init:function(a,b,c,d){this.JC=d;this._super(a,b,c)},Lx:function(){this.JC?(this.Ke=new nj([this.hi,this.ii,this.ji],50),this.Ke.Mi.addListener(this,this.zJ),this.Id.addListener(this.Ke)):this._super()},Yc:function(){this.background=new X(V.a.i.Cv);this.N.push(this.background);this.Qb=new X(V.a.i.Pt);
this.JC?this.OI():this.CI()},EA:aa(),zJ:function(){var a=this;this.Kc=g;this.Id.me(k);this.Id.$f=j;this.Id.removeListener(this.Ke);this.Aj.sn(k);V.a.hb(V.a.j.ea,a.hi,0.5,0,function(){V.a.hb(V.a.j.ea,a.ii,0.5,0,function(){V.a.hb(V.a.j.ea,a.ji,0.5,0,function(){a.fC()})})})},CI:function(){this.Lg=new lj(this.index,this.mz);this.Lg.transform.s(-74,-28);this.N.push(this.Lg)},OI:function(){this.Aj=new oj;this.Aj.transform.s(70,15);this.N.push(this.Aj);this.hi=new pj(new W(-75,-90),V.a.i.Ug,0.15,0.24);this.hi.Bd(0);
this.Ob.push(this.hi);this.ma.push(this.hi);this.N.push(this.hi);this.ii=new pj(new W(-5,-115),V.a.i.Ug,0.15,0.24);this.ii.Bd(0);this.Ob.push(this.ii);this.ma.push(this.ii);this.N.push(this.ii);this.ji=new pj(new W(65,-90),V.a.i.Ug,0.15,0.24);this.ji.Bd(0);this.Ob.push(this.ji);this.ma.push(this.ji);this.N.push(this.ji)},$j:function(a){this._super(a);this.Aj&&!this.Kc&&this.Aj.sn(0.9<a)}}),aj=kj.extend({Yc:function(){this.Xf(new W(70,-60),30,0.8/1.5);this.Xf(new W(83,-44),80,0.6/1.5);this.Xf(new W(74,
59),130,0.4/1.5);this.Xf(new W(54,72),180,0.5/1.5);this.Xf(new W(-83,35),-90,0.5/1.5);this.Yo(new W(-92,-8),1,2,4,0);this.Yo(new W(-90,-23),0.85,3,3,Math.PI/3);this.Yo(new W(-88,-37),0.65,4,2,2*(Math.PI/3));this.background=new X(V.a.i.av);this.C=new X(V.a.i.fv);this.iB=new qj(V.a.i.Ev,0.196,0.608,3);this.YM=new X(V.a.i.Ov);this.k=new rj;this.Qb=new X(V.a.i.Kt);this.Qb.transform.p(1.1,1.1);this.N.push(this.background);this.ma.push(this.iB);this.N.push(this.iB);this.N.push(this.YM);this.ma.push(this.k);
this.N.push(this.k);this.N.push(this.C)},Yo:function(a,b,c,d,e){var h=new V.a.Ga;h.s(a.x,a.y);h.p(b,b);a=new sj(V.a.i.Yu,h,c,d,e);this.ma.push(a);this.N.push(a)},Xf:function(a,b,c){var d=new tj(26);d.transform.s(a.x,a.y);d.transform.rotation=V.a.e.Z(b);d.transform.p(c,c);this.yl.push(d);this.ma.push(d);this.N.push(d)}}),bj=kj.extend({Yc:function(){this.background=new X(V.a.i.gv);this.Qb=new X(V.a.i.Lt);this.Ri(V.a.i.No,V.a.e.Z(-45),new W(-69,-26),0.8);this.Ri(V.a.i.No,V.a.e.Z(150),new W(26,73),0.7);
this.N.push(this.background);this.Eb=new pj(new W(-67,53),V.a.i.Ug,0.15,0.24);this.Ob.push(this.Eb);this.ma.push(this.Eb);this.N.push(this.Eb);this.Hp();this.Ri(V.a.i.Kk,V.a.e.Z(50),new W(70,-35),0.9);this.Ri(V.a.i.Kk,V.a.e.Z(190),new W(-14,74),0.9);this.Ri(V.a.i.Kk,V.a.e.Z(-90),new W(-78,3),0.8);this.zc=new uj;this.Ob.push(this.zc);this.ma.push(this.zc);this.N.push(this.zc)},update:function(a){this._super(a);a=0.75<this.zc.zc.transform.scale.x;var b=this.N.indexOf(this.zc);a&&b!==this.N.length-1?
(this.N.splice(b,1),this.N.push(this.zc)):!a&&0!==b&&(this.N.splice(b,1),this.N.unshift(this.zc))},Ri:function(a,b,c,d){var e=new V.a.Ga;e.s(c.x,c.y);e.Ua(b);e.p(d,d);a=new vj(a,e);a.bA.addListener(this,this.fM);this.ma.push(a);this.N.push(a)},Hp:function(){this.md=new wj;this.md.V=new V.a.I(V.a.i.Lk,V.a.ac.si);this.md.Fp(20);this.md.zK();this.md.Ph=70/255;this.md.xb=1;this.md.Ih=180/255;this.md.ed=new V.b.Na(1.2,0.3);this.Ob.push(this.md);this.ma.push(this.md);this.N.push(this.md)},fM:function(a){if(V.a.e.Ud(this.depth,
1)){var b=this.md.Vk(),c=new W(0,-43);c.Multiply(a.transform.scale.x);V.a.g.rotate(c,a.transform.rotation,c);c.x+=a.transform.position.x;c.y+=a.transform.position.y;b.kc(c);V.a.g.qb(-15,a.transform.rotation+Math.PI/2,c);b.Va=c.x;b.Ma=c.y}}}),fj=kj.extend({Yc:function(){this.Qb=new X(V.a.i.Nt);this.background=new X(V.a.i.hv);this.N.push(this.background);this.rl(V.a.i.nv,new W(-11,41),0,1,-0.35);this.rl(V.a.i.mv,new W(-15,-6),0,1,0.25);this.rl(V.a.i.lv,new W(30,-18),0,1,-0.4);this.rl(V.a.i.ov,new W(53,
40),0,1,0.7);this.Eb=new pj(new W(4,4),V.a.i.kv,0.04,0.13);this.Ob.push(this.Eb);this.ma.push(this.Eb);this.N.push(this.Eb);this.Di=new qj(V.a.i.iv,0.4,1,3);this.ma.push(this.Di);this.N.push(this.Di);this.C=new X(V.a.i.jv);this.N.push(this.C);this.Cn=new xj(V.a.i.pv,new W(-105,20),new W(60,-105),20);this.Cn.Xo(30);this.Ob.push(this.Cn);this.ma.push(this.Cn);this.N.push(this.Cn)},rl:function(a,b,c,d,e){var h=new V.a.Ga;h.s(b.x,b.y);h.Ua(c);h.p(d,d);a=new yj(a,h,e);this.ma.push(a);this.N.push(a)}}),
dj=kj.extend({Yc:function(){this.Qb=new X(V.a.i.Do);this.background=new X(V.a.i.qv);this.N.push(this.background)},update:function(a){this._super(a)}}),ej=kj.extend({Yc:function(){var a=new V.a.Ga;a.Ua(60);var b=new V.a.Ga;b.Ua(30);this.Qb=new X(V.a.i.Fo);this.background=new X(V.a.i.Iv);this.cx=new yj(V.a.i.Jv,a,1);this.dx=new yj(V.a.i.Kv,b,-0.75);this.N.push(this.cx);this.N.push(this.dx);this.N.push(this.background);this.ma.push(this.cx);this.ma.push(this.dx)},update:function(a){this._super(a)}}),
gj=kj.extend({Yc:function(){this.Qb=new X(V.a.i.Ot);this.Xm=new qj(V.a.i.tv,0.2,1,3.5);this.Xm.transform.s(22,-52);this.Ob.push(this.Xm);this.ma.push(this.Xm);this.N.push(this.Xm);this.ms=new zj(V.a.i.yv,0,Math.PI);this.ms.transform.s(5,-85);this.N.push(this.ms);this.Xf(new W(-63,-63),-55,1);this.Di=new qj(V.a.i.sv,0.5,0.9,4);this.ma.push(this.Di);this.N.push(this.Di);this.ml=new Aj;this.ml.Xo(8);this.Ob.push(this.ml);this.ma.push(this.ml);this.N.push(this.ml);this.background=new X(V.a.i.uv);this.N.push(this.background);
this.Ym=new qj(V.a.i.Bv,0.7,1,0.5);this.Ym.transform.s(45,-47);this.Ob.push(this.Ym);this.ma.push(this.Ym);this.N.push(this.Ym);this.Zm=new qj(V.a.i.wv,0,1,2.5);this.Zm.transform.s(10,-25);this.Ob.push(this.Zm);this.ma.push(this.Zm);this.N.push(this.Zm);this.$m=new qj(V.a.i.Av,0.5,1,1);this.$m.transform.s(-56,-32);this.Ob.push(this.$m);this.ma.push(this.$m);this.N.push(this.$m);this.C=new X(V.a.i.vv);this.C.transform.s(33,60);this.N.push(this.C)},$j:function(a){this._super(a);this.ms.sn(0.9<a)},Xf:function(a,
b,c){var d=new Bj(36);d.transform.s(a.x,a.y);d.transform.rotation=V.a.e.Z(b);d.transform.p(c,c);this.yl.push(d);this.ma.push(d);this.N.push(d)},Ar:function(){V.a.xc("http://view.atdmt.com/action/SMG_MRTINX_SITE_CJ_BHS");V.a.xc("http://ace.adoftheyear.com/p13100/tagger_v02.php?project=p13100&tag=1a&channel=[sid=US_ContreJour_Tag_2_1b|cid=1002|]");V.a.sg("hp_5_behindscenes");V.a.A.aa(V.a.J.n.click,80);window.open(V.a.v.P("BEHIND_THE_SCENES_LINK"));window.focus()}}),X=Ui.extend({init:function(a){this.Za=
new V.a.I(a);this.transform=new V.a.Ga;this.th=this.alpha=1;this.visible=g},update:aa(),h:function(a){this.visible&&(this.Za.alpha=this.alpha*this.th,this.Za.h(a,this.transform))},Bd:ba("alpha"),s:function(a,b){this.transform.s(a,b)},p:function(a,b){this.transform.p(a,b)},Ua:function(a){this.transform.rotation=a},fa:ba("visible")}),qj=X.extend({init:function(a,b,c,d){this._super(a);this.th=b;this.Se=0;this.dq=b;this.fadeTo=c;this.zm=d},update:function(a){this.Se+=a.B;this.Se>=this.zm&&(this.Se=0,
a=this.fadeTo,this.fadeTo=this.dq,this.dq=a);this.th=V.a.e.mb(this.dq,this.fadeTo,this.Se/this.zm)}}),yj=X.extend({init:function(a,b,c){this._super(a);this.transform=b;this.speed=c},update:function(a){this.transform.rotation+=this.speed*a.B}}),sj=yj.extend({init:function(a,b,c,d,e){this._super(a,b,c);this.ya=new V.b.nd(0,0);this.ya.de=-d;this.ya.SQ=d;this.ya.step=0.2;this.ya.progress=e;this.OK=this.transform.position.x;this.scale=1},update:function(a){this._super(a);this.ya.update(a.B);this.transform.position.x=
this.OK+this.ya.value}}),vj=X.extend({init:function(a,b){this._super(a);this.ya=new V.b.nd(0.06,0.1);this.ya.de=0.95;this.ya.kf=1.04;this.Lq=b.scale.x;this.transform=b;this.bA=new V.a.Yb},update:function(a){this.ya.update(a.B);this.transform.scale.x=this.ya.value*this.Lq;this.transform.scale.y=(2-this.ya.value)*this.Lq;this.ya.YK()&&this.bA.yb(this)}}),zj=X.extend({init:function(a,b,c){this._super(a);this.HK=g;this.open=k;this.transform.rotation=c;this.transform.p(0,0);this.ZM=b;this.$M=c},sn:function(a){if(this.open!==
a){var b=this;this.DA(a);var c=(this.open=a)?1:0,d=this.open?this.ZM:this.$M,e=this.transform.scale.x,h=this.transform.rotation;V.a.$a(V.a.j.ea,j,function(a,p){var r=1-p/a,v=V.a.e.mb(e,c,r),r=V.a.e.mb(h,d,r);b.transform.p(v,v);b.transform.rotation=r},0.3)}},DA:aa(),h:function(a){this.visible&&(a.save(),this.Za.alpha=this.alpha,V.a.e.zb(a,this.transform),this.Za.fc(a,0,0,0,1,1),a.restore())}}),lj=zj.extend({init:function(a,b){this._super(b?V.a.i.Hv:V.a.i.Gv,0,-V.a.e.Vg());this.bg=new X(V.a.i.Ho);this.bg.transform.s(100,
-46);this.vs=new V.a.$b(V.a.va().dC(a).toString(),16,16);this.vs.transform.s(60,-38);this.vs.color=b?"rgb(66, 97, 123)":"rgb(150,150,150)";this.Vz=new X(b?V.a.i.Uu:V.a.i.Tu);this.Vz.transform.s(24,-46)},h:function(a){this.visible&&(a.save(),this.Za.alpha=this.alpha,V.a.e.zb(a,this.transform),this.Za.fc(a,0,0,0,1,1),this.bg.h(a),this.vs.h(a),this.Vz.h(a),a.restore())}}),oj=zj.extend({init:function(){this._super(V.a.i.Ku,0,-Math.PI);this.text=new V.a.$b(V.a.v.P("WORLD_PICKER_MULTI_TOUCH"),V.a.v.VJ(11),
22);this.text.color="rgb(150,150,150)";this.text.transform.s(-70,80)},h:function(a){this.visible&&(a.save(),this.Za.alpha=this.alpha,V.a.e.zb(a,this.transform),this.Za.fc(a,0,0,0,1,1),this.text.h(a),a.restore())},DA:function(a){var b=0;a&&(b=1);V.a.hb(V.a.j.ea,this.text,0.2,b)}}),Cj=V.b.De.extend({init:function(a,b,c,d){this._super(a,b,c,d)},h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a,b.transform)}}),Aj=V.b.uo.extend({init:function(){this._super(j,
j,V.a.i.xv,j);this.speed=new V.b.Na(30,5);this.angle=new V.b.Na(V.a.e.Z(125),V.a.e.Z(15));this.ed=new V.b.Na(0.6,0.2);this.Jg=new V.b.Na(0.8,0.2);this.Zo=1.4E-4},ue:function(a,b){this._super(a,b);a.opacity-=this.Zo*a.Va;0>=a.opacity&&this.Lc(a)},h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a,b.transform)},Lc:function(a){this._super(a);a.s(10,-25);a.Ua(Math.atan2(a.Ma,a.Va))}}),xj=V.b.uo.extend({init:function(a,b,c,d){this._super(j,
j,a,j);this.speed=new V.b.Na(25,8);this.angle=new V.b.Na(-Math.PI/2,0);this.ed=new V.b.Na(0.6,0.3);this.Jg=new V.b.Na(0,0);this.bc=d;this.DH=0.04;this.EH=0.02;this.hA=b.Copy();this.cA=c.Copy();this.Xx=V.a.g.Vj(V.a.g.Aa(this.cA,this.hA)).Copy();this.Xx.Normalize();this.br=new W;this.vg=new W},ue:function(a,b){this._super(a,b);a.opacity=a.oz?a.opacity+this.DH*a.transform.scale.x:a.opacity-this.EH*a.transform.scale.x;0.784<a.opacity&&(a.oz=k);0>=a.opacity&&this.Lc(a)},Lc:function(a){this._super(a);var b=
Math.random();V.a.g.dc(this.hA,this.cA,b,this.br);b=Math.cos(Math.PI*(b-0.5))*this.bc;V.a.g.M(this.Xx,this.vg);this.vg.Multiply(b);a.s(this.br.x+this.vg.x,this.br.y+this.vg.y);a.oz=g},h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a,b.transform)}}),wj=V.b.Dw.extend({init:function(){this._super(j,j)},h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a,
b.transform)}}),mj=V.b.it.extend({init:function(a,b){this._super(j,a,b)},h:function(a){for(var b=j,c=0;c<this.r.length;c++)b=this.r[c],this.V.alpha=b.opacity*this.alpha,this.V.frame=b.frame,this.V.h(a,b.transform)}}),pj=Ui.extend({init:function(a,b,c,d){this.transform=new V.a.Ga;this.transform.s(a.x,a.y);this.Kn=new Cj(j,j,b,j);this.ia=[];this.alpha=1;for(var e=0;5>e;e++)b=this.Kn.Jd(a),this.ia.push(new V.b.ht(this,b,j,a,2*Math.PI/5*e)),this.ia[e].sc=V.a.e.u(c,d);this.Kn.rN(0.55,0.55)},update:function(a){for(var b=
0;b<this.ia.length;b++)this.ia[b].update(a)},h:function(a){this.Kn.Bd(this.alpha);this.Kn.h(a)},Bd:ba("alpha")}),uj=Ui.extend({init:function(){this.transform=new V.a.Ga;this.zc=new X(V.a.i.Wv);this.ya=new V.b.nd(0.06,0.065);this.ya.de=-150;this.ya.kf=150;this.IA=0},update:function(a){this.ya.update(a.B);this.zc.transform.s(this.ya.value,0);var b=this.ya.Qy(0.5,1,this.ya.progress-Math.PI/2);this.zc.transform.p(b,b);this.zc.alpha=this.IA*b;this.transform.rotation+=V.a.e.Z(20*a.B)},h:function(a){a.save();
V.a.e.zb(a,this.transform);this.zc.h(a);a.restore()},Bd:ba("IA")}),rj=V.b.Po.extend({init:function(a,b){this._super(j,j,a?a:V.a.i.cv,b?b:V.a.i.bv);this.transform.s(10,10);this.transform.p(0.9,0.9);this.visible=g;this.hf=Math.PI/12;this.speed=new W;this.Lp=new W;this.Xa=25;this.Re=0.4;this.Qk=0.5;this.Hk=3;this.Gk=10;this.Wm=3;this.Vm=8;this.yf()},update:function(a){this._super(a);V.a.g.M(this.speed,this.Lp);this.Lp.Multiply(a.B);this.pe.Add(this.Lp)},h:function(a){this.visible&&(this.da.s(this.transform.position.x+
this.nb.x*this.Re,this.transform.position.y+this.nb.y*this.Re),this.da.p(this.transform.scale.x,this.transform.scale.y),this.ha.Vc()?this.ha.h(a,this.da):this.Ci.h(a,this.da),this.da.s(this.transform.position.x+this.nb.x,this.transform.position.y+this.nb.y),this.da.p(this.transform.scale.x,this.transform.scale.y),this.gc.Vc()?this.gc.h(a,this.da):this.fj.h(a,this.da))},zf:function(){this.Ha(V.a.i.dv,"blink",g,k,k);this.Ha(V.a.i.ev,"blinkonce",g,k,k)},Li:function(){this._super();var a=V.a.e.u(-10,
10),b=V.a.e.u(-this.hf,this.hf)-Math.PI/4;V.a.g.qb(a,b,this.pe);a=2*Math.random();V.a.g.qb(a,b,this.speed);this.gd=this},yg:function(){return V.a.g.cc(this.transform.position,this.pe)}}),Dj=rj.extend({init:function(){this._super(V.a.i.$u,V.a.i.Zu);this.transform.s(0,0);this.transform.p(1,1);this.Wm=2;this.Vm=4;this.hf=Math.PI;this.Xa=7},zf:function(){this.Ha(V.a.i.Io,"blink",g,k,k);this.Ha(V.a.i.Jo,"blinkonce",g,k,k)}}),Ej=rj.extend({init:function(){this._super(V.a.i.St,V.a.i.Rt);this.transform.s(0,
0);this.transform.p(1,1);this.Wm=2;this.Vm=4;this.hf=Math.PI;this.Xa=7},zf:function(){this.Ha(V.a.i.Tt,"blink",g,k,k);this.Ha(V.a.i.Ut,"blinkonce",g,k,k)},Li:function(){this._super();var a=V.a.e.u(-10,10),b=V.a.e.u(-this.hf,this.hf)-Math.PI/4;V.a.g.qb(a,b,this.pe);a=2*Math.random();V.a.g.qb(a,b,this.speed);this.gd=this}}),tj=Ui.extend({init:function(){this.Zx=40;this.Hl=new W(0,-80);this.Bm=new W(0,-30);this.T=this.Bm.Copy();this.end=this.Hl.Copy();this.O=[];for(var a=0;3>a;a++)this.O.push(new V.a.H.pc);
this.transform=new V.a.Ga;this.depth=0;this.head=new X(V.a.i.Fv);this.k=new Dj;this.endOffset=new W;this.Gf=new W;this.as()},update:function(a){this.as();this.head.transform.s(this.end.x,this.end.y);this.k.transform.s(this.end.x,this.end.y);this.k.update(a);this.od()},h:function(a){a.save();V.a.e.zb(a,this.transform);V.a.H.ph(a,this.O,"black");this.head.h(a);this.k.h(a);a.restore()},as:function(){if(V.a.e.Ud(1,this.depth)){V.a.g.qb(this.k.zk*this.Zx,this.k.we,this.endOffset);V.a.g.Md(this.Hl,this.endOffset,
this.Gf);var a=V.a.g.Ia(this.Gf,this.end);V.a.g.nc(this.T,this.Bm,1,this.T);V.a.g.nc(this.end,this.Gf,Math.min(1,a/5),this.end)}else 0.6<this.depth?(V.a.g.M(tj.Zz,this.Gf),V.a.g.nc(this.T,tj.$z,10,this.T),V.a.g.nc(this.end,this.Gf,10,this.end)):(V.a.g.M(tj.$z,this.T),V.a.g.M(tj.Zz,this.Gf),V.a.g.M(this.Gf,this.end))},od:function(){V.a.H.gb(this.O[0],$i,$i,this.T,13);V.a.H.gb(this.O[1],this.T,$i,this.T,6.5);V.a.H.gb(this.O[2],this.end,this.T,this.end,26)}});tj.$z=new W(-5,5);tj.Zz=new W(-10,10);
var Bj=tj.extend({init:function(a){this._super(a);this.Zx=20;this.Hl=new W(0,-55);this.Bm=new W(0,-25);this.T=this.Bm.Copy();this.end=this.Hl.Copy();this.Gf=this.end.Copy();this.head=new X(V.a.i.zv);this.k=new Ej;this.k.transform.p(1.2,1.2);this.head.transform.p(0.6,0.6);this.as();this.od();this.color=new V.a.Q(0,102,131,1);this.color=this.color.toString()},od:function(){V.a.H.gb(this.O[0],$i,$i,this.T,24);V.a.H.gb(this.O[1],this.T,$i,this.T,12);V.a.H.gb(this.O[2],this.end,this.T,this.end,36)},h:function(a){a.save();
V.a.e.zb(a,this.transform);V.a.H.ph(a,this.O,this.color);this.head.h(a);this.k.h(a);a.restore()}}),Wi=Ui.extend({init:function(){this.width=1300;this.visible=g;this.alpha=1;this.transform=new V.a.Ga;this.Jp=0;this.Ta=[];this.Ta.push(this.lh("CHAPTER1","rgba(228,228,228,1)"));this.Ta.push(this.lh("CHAPTER2","rgba(132,215,255,1)"));this.Ta.push(this.lh("CHAPTER4","rgba(216,216,216,1)"));this.Ta.push(this.lh("CHAPTER5","rgba(135,216,253,1)"));this.Ta.push(this.lh("CHAPTER3","rgba(135,216,253,1)"));this.Ta.push(this.lh("BEHIND_SCENES",
"rgb(132, 215, 255)"))},lh:function(a,b){var c=new V.a.$b(V.a.v.P(a),30,45,V.a.v.P("FONT_CHAPTER")||"handofsean");c.color=b;c.shadowColor="rgba(0, 0, 0, .75)";c.Lb=g;c.bold=k;c.qy=0.7;return c},lN:function(a){for(var b=this.Ta.length,c=0;c<b;c++)this.Ta[c].visible=k;this.Jp=a;a=this.Jp%b;0>a&&(a+=b);var d=Math.floor(a),c=(d+1)%b;a=this.Jp%1;0>a&&(a+=1);this.Ta[(c+1)%b].visible=k;b=this.Ta[d];c=this.Ta[c];b&&(b.transform.s(-a*this.width,0),b.visible=g);c&&(c.transform.s((1-a)*this.width,0),c.visible=
!V.a.e.Ud(a,0))},h:function(a){if(this.visible){a.save();V.a.e.zb(a,this.transform);for(var b=0;b<this.Ta.length;b++)this.Ta[b].alpha=this.alpha,this.Ta[b].h(a);a.restore()}}}),jj=Ui.extend({init:function(){this.ob=20;this.enabled=g;this.Mi=new V.a.Yb;this.kk=[];this.Es=0;this.ki=new W},xa:function(a){this.kk[a.id]=new W(a.x,a.y);this.Es++},ib:function(a){this.kk[a.id]&&this.sz(a)&&this.bB(a)},Qa:function(a){this.kk[a.id]&&(this.isEnabled()&&this.Mi.yb(),this.bB(a))},bB:function(a){delete this.kk[a.id];
this.Es--},sz:function(a){this.ki.x=a.x;this.ki.y=a.y;return V.a.g.Ia(this.ki,this.kk[a.id])>this.ob},isEnabled:ca("enabled")}).extend({init:function(a,b){this._super();this.target=a;this.lI=b},xa:function(a){this.YB(a)&&this._super(a)},YB:function(a){this.ki.x=a.x;this.ki.y=a.y;return V.a.g.Ia(this.ki,this.target.transform.position)<this.lI},sz:function(a){var b=!this.YB(a);this.Yx&&(b|=this._super(a));return b}}),nj=Ui.extend({init:function(a,b){this.Mi=new V.a.Yb;this.ub=[];for(var c,d=0;d<a.length;d++)c=
new jj(a[d],b),c.ob=30,c.Yx=g,c.enabled=k,this.ub.push(c)},xa:function(a){for(var b=0,c,d=0;d<this.ub.length;d++)c=this.ub[d],c.xa(a),0<c.Es&&b++;b>=this.ub.length&&this.Mi.yb()},ib:function(a){for(var b=0;b<this.ub.length;b++)this.ub[b].ib(a)},Qa:function(a){for(var b=0;b<this.ub.length;b++)this.ub[b].Qa(a)}});V.F.rH=Vi;V.b.Rk=X;V.ql.vP=4;var Fj=window,Gj=document,Hj=Modernizr,Ij=Tweenable,Y=q;
function Jj(a){this.Jb=f;this.q=a;this.S={C:this.q.DJ};this.fadeOut=Gj.getElementById("levelCompleteFade");this.qa=Gj.getElementById("levelCompleteContainer");this.back=Gj.getElementById("levelComplete");this.Fh=Gj.getElementById("levelTitle");this.ff=Gj.getElementById("lightsBonus");this.re=Gj.getElementById("timeBonus");this.rg=Gj.getElementById("lineBreak");this.Gh=Gj.getElementById("levelTotal");this.pJ=Gj.getElementById("energiesContainer");this.Db=this.pJ.children;this.vh=f;this.Ja=g;this.Rq=
k;this.Mz=new Y.F.zE(a);Hj.csstransitions||(this.Ja=k,this.Jb=new Ij);this.init()}m=Jj.prototype;
m.init=function(){this.nI=Gj.getElementById("levelCompleteMessage");this.Ur=Gj.getElementById("completeRestartButton");this.kr=Gj.getElementById("completeMenuButton");this.ns=Gj.getElementById("completeSkipButton");this.og=new Y.F.Zb(this.Ur,g,k,g);this.ng=new Y.F.Zb(this.kr,g,k,g);this.ef=new Y.F.Zb(this.ns,g,k,g);this.ef.fq=1.2;Y.a.ca(this.Ur,0.5,0.5);Y.a.ca(this.kr,0.5,0.5);Y.a.ca(this.ns,0.5,0.5);Y.a.v.Bh()||(this.ff.className=this.ff.className.replace("mediumText","smallText"),this.re.className=
this.re.className.replace("mediumText","smallText"));this.cB();this.og.fa(k);this.ng.fa(k);this.ef.fa(k);Y.a.addClass(this.re,"hidden");for(var a=0;a<this.Db.length;a++){var b=this.Db[a];Y.a.ca(b,0.5,0.5);b.style.opacity=0}};m.RM=function(){this.vh=j;this.vh=new Y.b.VD(this.q.d)};m.dO=function(a,b){var c=this,d=Y.a.va().worlds[this.q.Pa].levels[this.q.Sb-1],e=0<d.score&&(d.score<b||d.stars<a);Y.a.w(Y.a.j.o,function(){c.vh.An(a,e)},0.5)};
m.gN=function(a){this.nI.innerHTML=Y.a.v.P("COMPLETE_TEXT_"+a)};
m.show=function(a,b,c,d,e){var h=this;Y.a.Cb.jd(this);this.Rq=g;this.og.rc();this.ng.rc();this.ef.rc();this.dO(e,c+d);this.gN(e);this.Mz.show();if(this.Ja){this.qa.style.visibility="visible";Y.a.lc(this.qa,500);Y.a.ld(this.qa,50);this.qa.style.backgroundColor="rgba(255,255,255,0.3)";this.JN(this.back);this.og.fadeIn(600);this.ng.fadeIn(700);this.ef.fadeIn(800);this.Fh.innerHTML=Y.a.v.Ub("LEVEL",[a,b]);this.uh(this.Db[0],600);this.uh(this.Db[1],700);this.uh(this.Db[2],800);if(0!=e)for(a=0;a<e;a++)b=
this.Db[a],Y.a.removeClass(b,"energyInactive"),Y.a.addClass(b,"pulse"),b.style.animationDelay=500*a+1E3+"ms",b.style.WebkitAnimationDelay=500*a+1E3+"ms",b.style.msAnimationDelay=500*a+1E3+"ms",b.style.MozAnimationDelay=500*a+1E3+"ms";this.QB(c,d)}else this.qa.style.opacity=0,this.qa.style.backgroundColor="rgba(255,255,255,0.3)",this.qa.style.visibility="visible",this.Fh.innerHTML=Y.a.v.Ub("LEVEL",[a,b]),this.Jb.tween({from:{opacity:0},to:{opacity:1},duration:550,step:function(){h.qa.style.opacity=
this.opacity},easing:"easeOutSine",callback:function(){h.qa.style.opacity=1;h.og.fadeIn(600);h.ng.fadeIn(700);h.ef.fadeIn(800);for(var a=0;a<e;a++){var b=h.Db[a];Y.a.removeClass(b,"energyInactive");h.yM(b,500*a+1E3)}h.uh(h.Db[0],600);h.uh(h.Db[1],700);h.uh(h.Db[2],800);h.QB(c,d);(new Ij).tween({from:{opacity:0,scale:0.8},to:{opacity:1,scale:1},duration:250,step:function(){h.back.style.opacity=this.opacity;Y.a.ca(h.back,this.scale,this.scale)},easing:"easeOutSine"})}})};
m.QB=function(a,b){var c=this;if(this.Ja)this.Il(this.Fh,500),this.Il(this.ff,800),this.Il(this.re,1500),this.Il(this.Gh,2E3),Y.a.ld(this.rg,1700),Y.a.lc(this.rg,300),this.rg.style.width="157px",this.$g(this.ff,"ENERGY_BONUS",a,800),this.$g(this.re,"TIME_BONUS",b,1500),this.$g(this.Gh,"TOTAL",a+b,2E3);else{this.Jl(this.Fh,500);this.Jl(this.ff,800);this.Jl(this.re,1500);this.Jl(this.Gh,2E3);this.$g(this.ff,"ENERGY_BONUS",a,800);this.$g(this.re,"TIME_BONUS",b,1500);this.$g(this.Gh,"TOTAL",a+b,2E3);
var d=setTimeout(function(){clearTimeout(d);(new Ij).tween({from:{width:0},to:{width:157},duration:300,step:function(){c.rg.style.width=this.width+"px"},easing:"easeOutSine"})},1700)}};
m.hide=function(){var a=this;this.fadeOut.style.visibility="visible";Y.a.Cb.oh(this);this.Rq=k;this.og.Vb();this.ng.Vb();this.ef.Vb();this.Ja?this.fadeOut.style.opacity=1:(new Ij).tween({from:{opacity:0},to:{opacity:1},duration:500,step:function(){a.fadeOut.style.opacity=this.opacity},easing:"easeOutSine"});var b=setTimeout(function(){clearTimeout(b);a.reset()},500)};m.update=function(a){var b=this.S.C;b.clearRect(0,0,b.canvas.width,b.canvas.height);this.vh&&(this.vh.update(a),this.vh.h(this.S))};
m.reset=function(){this.fadeOut.style.visibility="hidden";this.fadeOut.style.opacity=0;this.OM(this.back);this.PM();this.Mz.reset();this.og.fadeOut(0);this.ng.fadeOut(0);this.ef.fadeOut(0);Y.a.lc(this.rg,0);Y.a.ld(this.rg,0);this.rg.style.width="0px";for(var a=0;a<this.Db.length;a++)this.QM(this.Db[a]);Y.a.ca(this.Ur,0.5,0.5);Y.a.ca(this.kr,0.5,0.5);Y.a.ca(this.ns,0.5,0.5);this.cB();this.Kl(this.Fh);this.Kl(this.ff);this.Kl(this.re);this.Kl(this.Gh)};
m.cB=function(){this.Fh.innerHTML=Y.a.v.Ub("LEVEL",[0,0]);this.ff.innerHTML=Y.a.v.Ub("ENERGY_BONUS",[0]);this.re.innerHTML=Y.a.v.Ub("TIME_BONUS",[0]);this.Gh.innerHTML=Y.a.v.Ub("TOTAL",[0])};
m.uh=function(a,b){if(this.Ja)a.style.transitionProperty="transform, opacity",a.style.transitionTimingFunction="cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",a.style.transitionDuration="300ms, 300ms",a.style.transitionDelay=b+"ms,"+b+"ms",a.style.msTransitionProperty="-ms-transform, opacity",a.style.msTransitionTimingFunction="cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",a.style.msTransitionDuration="300ms, 300ms",a.style.msTransitionDelay=b+"ms,"+b+"ms",a.style.MozTransitionProperty="-moz-transform, opacity",
a.style.MozTransitionTimingFunction="cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",a.style.MozTransitionDuration="300ms, 300ms",a.style.MozTransitionDelay=b+"ms,"+b+"ms",a.style.WebkitTransitionProperty="-webkit-transform, opacity",a.style.WebkitTransitionTimingFunction="cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",a.style.WebkitTransitionDuration="300ms, 300ms",a.style.WebkitTransitionDelay=b+"ms,"+b+"ms",a.style.oTransitionProperty="-o-transform, opacity",a.style.oTransitionTimingFunction=
"cubic-bezier(0.175, 0.885, 0.320, 1), ease-out",a.style.oTransitionDuration="300ms, 300ms",a.style.oTransitionDelay=b+"ms,"+b+"ms",Y.a.ca(a,1,1),a.style.opacity=1;else{a.style.opacity=0;Y.a.ca(a,0.5,0.5);var c=setTimeout(function(){clearTimeout(c);(new Ij).tween({from:{opacity:0,scale:0.5},to:{opacity:1,scale:1},duration:300,step:function(){a.style.opacity=this.opacity;Y.a.ca(a,this.scale,this.scale)},easing:"easeOutSine"})},b)}};
m.yM=function(a,b){var c=setTimeout(function(){clearTimeout(c);(new Ij).tween({from:{scale:1},to:{scale:1.2},duration:250,step:function(){Y.a.ca(a,this.scale,this.scale)},easing:"easeInSine",callback:function(){(new Ij).tween({from:{scale:1.2},to:{scale:1},duration:250,step:function(){Y.a.ca(a,this.scale,this.scale)},easing:"easeOutSine"})}})},b)};
m.Jl=function(a,b){var c=setTimeout(function(){clearTimeout(c);a.style.opacity=0;(new Ij).tween({from:{opacity:0},to:{opacity:1},duration:250,step:function(){a.style.opacity=this.opacity},easing:"easeInSine"})},b)};
m.QM=function(a){a.style.transitionDuration="0ms, 0ms";a.style.transitionDelay="0ms,0ms";a.style.msTransitionDuration="0ms, 0ms";a.style.msTransitionDelay="0ms,0ms";a.style.MozTransitionDuration="0ms, 0ms";a.style.MozTransitionDelay="0ms,0ms";a.style.WebkitTransitionDuration="0ms, 0ms";a.style.WebkitTransitionDelay="0ms,0ms";a.style.oTransitionDuration="0ms, 0ms";a.style.oTransitionDelay="0ms,0ms";Y.a.ca(a,0.5,0.5);a.style.opacity=0;Y.a.removeClass(a,"pulse");Y.a.addClass(a,"energyInactive")};
m.Il=function(a,b){a.style.opacity=0;Y.a.EB(a);Y.a.hs(a,"ease-out");Y.a.lc(a,300);Y.a.ld(a,b);a.style.opacity=1};m.Kl=function(a){Y.a.EB(a);Y.a.lc(a,0);Y.a.ld(a,0);a.style.opacity=0};
m.JN=function(a){a.style.transitionDuration="300ms, 300ms";a.style.transitionDelay="350ms,350ms";a.style.msTransitionDuration="300ms, 300ms";a.style.msTransitionDelay="350ms,350ms";a.style.MozTransitionDuration="300ms, 300ms";a.style.MozTransitionDelay="350ms,350ms";a.style.WebkitTransitionDuration="300ms, 300ms";a.style.WebkitTransitionDelay="350ms,350ms";a.style.oTransitionDuration="300ms, 300ms";a.style.oTransitionDelay="350ms,350ms";Y.a.ca(a,1,1);a.style.opacity=1};
m.PM=function(){Y.a.lc(this.qa,0);Y.a.ld(this.qa,0);this.qa.style.backgroundColor="rgba(255,255,255,0.0)";this.qa.style.visibility="hidden"};
m.OM=function(a){a.style.transitionDuration="0ms, 0ms";a.style.transitionDelay="0ms,0ms";a.style.msTransitionDuration="0ms, 0ms";a.style.msTransitionDelay="0ms,0ms";a.style.MozTransitionDuration="0ms, 0ms";a.style.MozTransitionDelay="0ms,0ms";a.style.WebkitTransitionDuration="0ms, 0ms";a.style.WebkitTransitionDelay="0ms,0ms";a.style.oTransitionDuration="0ms, 0ms";a.style.oTransitionDelay="0ms,0ms";Y.a.ca(a,0.8,0.8);a.style.opacity=0};
m.$g=function(a,b,c,d){var e=0.75*c,h=0,n=Fj.setInterval(function(){h++;Math.round(e)==c?Fj.clearInterval(n):h>=d/30&&(e+=0.45*(c-e),a.innerHTML=Y.a.v.Ub(b,[Math.round(e)]))},30)};Y.F.BE=Jj;var Kj=window,Lj=document,Mj=SmoothieChart,Z=q;
function Nj(){function a(){Lj[d]&&c.ax()}function b(){c.ax()}var c=this;this.canvas=Lj.getElementById("surface");this.jp=Lj.getElementById("bgSurface");this.wO=Lj.getElementById("transitionCanvas");this.CJ=Lj.getElementById("fakeHeroCanvas");this.Dr=Lj.getElementById("particleCanvas");this.S=this.canvas.getContext("2d");this.VH=this.jp.getContext("2d");this.IC=this.wO.getContext("2d");this.DJ=this.CJ.getContext("2d");this.lM=this.Dr.getContext("2d");this.zR=Lj.getElementById("updateTime");this.yR=
Lj.getElementById("drawTime");this.Js=Lj.getElementById("freezeGraphsButton");this.hC=Date.now();this.Ql=this.sQ=this.us=this.Fn=this.Ns=this.fo=this.Sp=this.Fl=0;this.Bi=k;this.pj=20;this.qj="rgb(7, 76, 77)";this.rj="rgb(17, 17, 17)";this.Pa=0;this.DL=10;this.theme=Z.a.ac.Be;this.WB=f;this.wx=k;this.Yj(g);this.wd=k;this.Vs=this.vc=g;$("#menuPanelBG").hide();$("#menuPanelBGBlue").show();$("#menuPanelBG").show();$("#menuPanelBGBlue").hide();this.dA=$("#meetPetitDiv");this.mj=$("#gameWarning");this.lz=
$("#gameWarningAppStore");this.lz.click(function(){Kj.open("http://itunes.apple.com/us/app/contre-jour-hd/id444085845?mt=8")});this.kA=g;this.Em=Z.a.ad("minfps",30);"string"===typeof this.Em&&(this.Em=parseInt(this.Em));this.JL=1E4;this.Gj=0;this.KB=Z.a.ad("fps",f);this.JJ=$("#fpsDiv");this.lj=0;this.KB&&$("#vote-sxsw").hide();Kj.setInterval(function(){if(0!==c.lj){c.KB&&(c.JJ[0].innerHTML=c.lj+" FPS");if(c.Vs){if(c.kA)if(c.lj<c.Em)if(0===c.Gj)c.Gj=Date.now();else{if(Date.now()-c.Gj>c.JL){c.kA=k;
if("Explorer"===BrowserDetect.browser&&10===BrowserDetect.version)return;"iPad"===BrowserDetect.OS?(c.dA.hide(),c.mj[0].innerHTML=Z.a.v.P("PERFORMANCE_WARNING_IPAD"),c.lz.fadeIn("slow"),$("#gameFooter").addClass("app-store-warning")):(c.mj[0].innerHTML=Z.a.v.P("PERFORMANCE_WARNING"),c.dA.hide(),c.mj.click(function(){c.mj.fadeOut("slow")}));c.mj.fadeIn("slow")}}else c.Gj=0}else c.Gj=0;c.lj=0}},1E3);this.Js.onclick=function(){c.Bi=!c.Bi;c.Bi===g?(c.Js.innerHTML="Start",c.Dl.stop(),c.Yn.stop(),c.co.stop(),
c.En.stop(),c.Pl.stop()):(c.Js.innerHTML="Freeze",c.Dl.start(),c.Yn.start(),c.co.start(),c.En.start(),c.Pl.start())};var d,e;"undefined"!==typeof Lj.hidden?(d="hidden",e="visibilitychange"):"undefined"!==typeof Lj.mozHidden?(d="mozHidden",e="mozvisibilitychange"):"undefined"!==typeof Lj.msHidden?(d="msHidden",e="msvisibilitychange"):"undefined"!==typeof Lj.webkitHidden&&(d="webkitHidden",e="webkitvisibilitychange");this.Ge=e?{element:Lj,event:e,Ib:a}:{element:Kj,event:"blur",Ib:b};this.Bi=k;this.QQ=
this.Wq=this.Yq=this.PQ=this.El=0;this.gm=Z.a.ad("stats","false");this.gm="false"===this.gm?k:g;if(this.gm===g){Lj.getElementById("devStats").style.visibility="visible";e={};e.fps=this.pj;e.interpolation="line";e.maxValue=60;e.minValue=0;e.grid={};e.grid.strokeStyle="rgb(0, 0, 0)";e.grid.lineWidth=0;e.grid.millisPerLine=1E3;e.grid.verticalSections=0;e.labels={};e.labels.fillStyle="rgb(153, 153, 153)";var h={};h.strokeStyle=this.qj;h.lineWidth=2;h.fillStyle=this.rj;this.Pl=new Mj(e);this.Pl.streamTo(Lj.getElementById("fpsStatsCanvas"));
this.xy=new TimeSeries;this.Pl.addTimeSeries(this.xy,h);this.KJ=Lj.getElementById("fpsStatsValue");e={};e.fps=this.pj;e.interpolation="line";e.maxValue=7;e.minValue=0;e.grid={};e.grid.strokeStyle="rgb(0, 0, 0)";e.grid.lineWidth=0;e.grid.millisPerLine=1E3;e.grid.verticalSections=0;e.labels={};e.labels.fillStyle="rgb(153, 153, 153)";h={};h.strokeStyle=this.qj;h.lineWidth=2;h.fillStyle=this.rj;this.Yn=new Mj(e);this.Yn.streamTo(Lj.getElementById("touchStatsCanvas"));this.DC=new TimeSeries;this.Yn.addTimeSeries(this.DC,
h);this.uO=Lj.getElementById("touchStatsValue");e={};e.fps=this.pj;e.interpolation="line";e.maxValue=50;e.minValue=0;e.grid={};e.grid.strokeStyle="rgb(0, 0, 0)";e.grid.lineWidth=0;e.grid.millisPerLine=1E3;e.grid.verticalSections=0;e.labels={};e.labels.fillStyle="rgb(153, 153, 153)";h={};h.strokeStyle=this.qj;h.lineWidth=2;h.fillStyle=this.rj;this.co=new Mj(e);this.co.streamTo(Lj.getElementById("updateStatsCanvas"));this.MC=new TimeSeries;this.co.addTimeSeries(this.MC,h);this.SO=Lj.getElementById("updateStatsValue");
e={};e.fps=this.pj;e.interpolation="line";e.maxValue=50;e.minValue=0;e.grid={};e.grid.strokeStyle="rgb(0, 0, 0)";e.grid.lineWidth=0;e.grid.millisPerLine=1E3;e.grid.verticalSections=0;e.labels={};e.labels.fillStyle="rgb(153, 153, 153)";h={};h.strokeStyle=this.qj;h.lineWidth=2;h.fillStyle=this.rj;this.Dl=new Mj(e);this.Dl.streamTo(Lj.getElementById("drawStatsCanvas"));this.cy=new TimeSeries;this.Dl.addTimeSeries(this.cy,h);this.dJ=Lj.getElementById("drawStatsValue");e={};e.fps=this.pj;e.interpolation=
"line";e.maxValue=50;e.minValue=0;e.grid={};e.grid.strokeStyle="rgb(0, 0, 0)";e.grid.lineWidth=0;e.grid.millisPerLine=1E3;e.grid.verticalSections=0;e.labels={};e.labels.fillStyle="rgb(153, 153, 153)";h={};h.strokeStyle=this.qj;h.lineWidth=2;h.fillStyle=this.rj;this.En=new Mj(e);this.En.streamTo(Lj.getElementById("spriteStatsCanvas"));this.$B=new TimeSeries;this.En.addTimeSeries(this.$B,h);this.WN=Lj.getElementById("spritesStatsValue")}this.eb={background:this.VH,xR:this.IC,C:this.S,$:this.lM};this.yk=
f;this.options={debug:g};this.d=f;this.Hb=new Z.a.DE(this.IC);this.score=new Z.a.XG;this.hL=new Oj(this.S.canvas.width/30,0);Z.a.ad("editor",k)}var Oj=Box2D.Common.Math.b2Vec2;m=Nj.prototype;
m.aH=function(){var a=this;Z.a.Cb.start();this.yk=new Z.a.iH(this.canvas,this);this.xd=new Z.F.BE(this);this.jr=new Z.F.CE(this,Lj.getElementById("levelPicker"));this.lf=new Z.F.qG(this,Lj.getElementById("menu"));this.Mj=new Z.F.Zb(Lj.getElementById("gamePauseBtn"),g,k,k);this.Mj.pb(function(){a.d.Gx||(a.pause(),a.lf.show())});this.Wb=new Z.F.Zb(Lj.getElementById("gameSkipBtn"),g,k,k,"introSkipBtn","introSkipIcon");this.Wb.pb(function(){a.Ag()});Z.a.addClass(this.Wb.la(),"noShow");this.xd.og.pb(function(){a.xd.hide();
a.Ag()});this.xd.ng.pb(function(){a.xd.hide();a.Hb.fadeOut(function(){a.zj(k);a.Hb.fadeIn()})});this.xd.ef.pb(function(){a.xd.hide();a.sA()});this.mf=new Z.F.At(Lj.getElementById("soundButtonDiv"),"gameSoundIconNonThemed","gameSoundIconBlueNonThemed","gameSoundIconPurpleNonThemed");this.mf.rc();var b=Z.a.A.gg();b&&this.mf.Te(!b);this.mf.pb(function(){var b=!Z.a.A.gg();Z.a.A.tg(b);a.lf.Tf.Te(!b)});this.nf=new Z.F.At(Lj.getElementById("soundEffectButtonDiv"),"gameSoundEffectIconNonThemed","gameSoundEffectIconBlueNonThemed",
"gameSoundEffectIconPurpleNonThemed");this.nf.rc();(b=Z.a.A.Ch())&&this.nf.Te(!b);this.nf.pb(function(){var b=!Z.a.A.Ch();Z.a.A.Ij(b);a.lf.Uf.Te(!b)});this.GL=new Z.F.pG(Lj.getElementById("meetPetitDiv"));Z.a.A.isIPAD===g&&(this.mf.element.style.display="none",this.nf.element.style.display="none");this.zC=Z.a.A.gg();this.yC=Z.a.A.Ch();Z.a.WH(function(){Z.a.TK()?(a.Vs=k,a.zC=Z.a.A.gg(),a.yC=Z.a.A.Ch(),Z.a.A.tg(g),Z.a.A.Ij(g)):(a.Vs=g,Z.a.A.tg(a.zC),Z.a.A.Ij(a.yC))});Z.a.ad("world",0);Z.a.ad("level",
0);this.qm?a.fr():a.zj(g)};m.zj=function(a){this.Yj(k);Z.a.addClass(this.Mj.la(),"noShow");Z.a.addClass(this.Wb.la(),"noShow");this.Wb.Vb();this.Mj.Vb();Z.a.ai.clear(Z.a.j.o);Z.a.Cb.oh(this);this.wd=k;this.vc=g;this.d?this.d.kl():(this.Hb.gs(),this.Hb.fadeIn());this.d=new Z.F.rH(this);this.jr.Bs(g);a||this.d.Xl?this.d.OB():this.d.LB(g);Z.a.Cb.jd(this)};
m.fr=function(){var a=this;this.Hb.gs();this.qm&&(this.vc=k,Z.a.Cb.oh(this),this.wd=k,Z.a.ai.clear(Z.a.j.o),this.d&&this.d.kl(),a.d=new Z.b.Ew(a.eb,a.options,a),a.d.mL(a.qm,function(){a.Rz()}),Z.a.Cb.jd(a))};m.gI=function(a){this.Pa=a;this.WB=Z.a.J.Tw[this.Pa]};
m.Hh=function(a){this.wd=k;this.Hb.gs();this.jr.Bs(k);if(a!==f&&0<=a&&10>=a){Z.a.ai.clear(Z.a.j.o);Z.a.Cb.oh(this);this.d&&this.d.kl();this.wd=k;var b=Z.a.va(),c=0==a?b.nJ():b.worlds[this.Pa].levels[a-1];this.Sb=c.levelDisplayNumber;this.theme=0===a?Z.a.ac.Be:b.worlds[this.Pa].theme;this.nL(c)}};m.Tz=function(){this.Hh(0);var a=Z.a.va();a.lastLevelOpen||(a.lastLevelOpen=g,Z.a.Ee(a))};
m.nL=function(a){var b=this;Z.a.addClass(this.Wb.la(),"noShow");this.Wb.Vb();Z.a.A.Mr(169===a.levelNumber?Z.a.J.Tw[0]:b.WB);this.d=new Z.b.Ew(this.eb,this.options,this);this.d.vc=this.vc;this.d.Hh(a.levelNumber,function(){b.xd.RM();b.Rz()});Z.a.Cb.jd(this)};
m.Rz=function(){var a=this;this.score.time=0;this.score.stars=0;var b=Z.a.va(),c=b.worlds[this.Pa].levels[this.Sb-1];c&&c.state!=Z.a.Tg.qc&&(c.state=Z.a.Tg.qc,Z.a.Ee(b));Z.a.removeClass(a.Mj.la(),"noShow");a.Mj.rc();this.lf.BK();this.Hb.fadeIn(function(){a.d.X&&(0<a.Pa||!a.vc?a.d.X.gn():1!=a.Sb&&a.d.X.gn())});this.Yj(g)};
m.LL=function(a){0===a||2===a||3===a||4===a?($("#menuPanelBG").show(),$("#menuPanelBGBlue").hide(),Z.a.na(".level0","background","url(../img/McLevels0-hd.png?v="+Z.version+")"),Z.a.na(".level1","background","url(../img/McLevels1-hd.png?v="+Z.version+")"),Z.a.na(".level2","background","url(../img/McLevels2-hd.png?v="+Z.version+")"),Z.a.na(".level3","background","url(../img/McLevels3-hd.png?v="+Z.version+")"),Z.a.na(".level4","background","url(../img/McLevels4-hd.png?v="+Z.version+")"),Z.a.na(".level5",
"background","url(../img/McLevels5-hd.png?v="+Z.version+")"),Z.a.na(".level6","background","url(../img/McLevels6-hd.png?v="+Z.version+")"),Z.a.na(".level7","background","url(../img/McLevels7-hd.png?v="+Z.version+")"),Z.a.na(".level8","background","url(../img/McLevels8-hd.png?v="+Z.version+")"),Z.a.na(".level9","background","url(../img/McLevels9-hd.png?v="+Z.version+")"),Z.a.na(".levelItemInactive","background","url(../img/McLevelItemInactive-hd.png?v="+Z.version+")"),Z.a.na(".levelItem","background-image",
"url(../img/McLevelItemBackground-hd.png?v="+Z.version+")")):1===a&&($("#menuPanelBG").hide(),$("#menuPanelBGBlue").show(),Z.a.na(".level0","background","url(../img/McLevels0-hd_blue.png?v="+Z.version+")"),Z.a.na(".level1","background","url(../img/McLevels1-hd_blue.png?v="+Z.version+")"),Z.a.na(".level2","background","url(../img/McLevels2-hd_blue.png?v="+Z.version+")"),Z.a.na(".level3","background","url(../img/McLevels3-hd_blue.png?v="+Z.version+")"),Z.a.na(".level4","background","url(../img/McLevels4-hd_blue.png?v="+
Z.version+")"),Z.a.na(".level5","background","url(../img/McLevels5-hd_blue.png?v="+Z.version+")"),Z.a.na(".level6","background","url(../img/McLevels6-hd_blue.png?v="+Z.version+")"),Z.a.na(".level7","background","url(../img/McLevels7-hd_blue.png?v="+Z.version+")"),Z.a.na(".level8","background","url(../img/McLevels8-hd_blue.png?v="+Z.version+")"),Z.a.na(".level9","background","url(../img/McLevels9-hd_blue.png?v="+Z.version+")"),Z.a.na(".levelItemInactive","background","url(../img/McLevelItemInactive-hd_blue.png?v="+
Z.version+")"),Z.a.na(".levelItem","background-image","url(../img/McLevelItemBackground-hd_blue.png?v="+Z.version+")"))};m.iO=function(){var a=Z.a.va(),b=a.worlds[this.Pa].levels[this.Sb-1],c=a.worlds[this.Pa].levels[this.Sb];c&&(c.state=Z.a.Tg.qc);b.time>this.score.time&&(b.time=this.score.time);b.stars<this.score.stars&&(b.stars=this.score.stars);c=this.score.Ny()+this.score.Py();b.score<c&&(b.score=c);b.state=Z.a.Tg.qc;Z.a.Ee(a)};m.qz=function(){return 4===this.Pa&&10===this.Sb};
m.ZK=function(){return 0===this.Sb};m.kh=function(){this.xd.show(this.Pa+1,this.Sb,this.score.Ny(),this.score.Py(),this.score.stars);this.iO();this.Yj(k)};m.Ag=function(){var a=this;this.vc=k;this.Hb.fadeOut(function(){a.qm?a.fr():a.Hh(a.Sb)})};m.sA=function(){var a=this;this.vc=g;this.Hb.fadeOut(function(){a.qm?a.fr():a.qz()?a.Tz():a.Sb<a.DL?a.Hh(a.Sb+=1):(a.zj(g),a.Hb.fadeIn(),Z.a.w(Z.a.j.ea,function(){a.d.Zr(a.Pa+1)},0.5))})};m.pause=function(){this.wd=g;this.d.me(k)};
m.Yj=function(a){this.wx!=a&&(a?this.jJ():this.YI());this.wx=a};m.jJ=function(){this.Ge&&this.Ge.element.addEventListener(this.Ge.event,this.Ge.Ib)};m.YI=function(){this.Ge&&this.Ge.element.removeEventListener(this.Ge.event,this.Ge.Ib)};m.ax=function(){!this.wd&&(this.xd&&!this.xd.Rq)&&(this.pause(),this.lf.show())};m.jn=function(){this.wd=k;this.d.me(g)};
m.update=function(a){var b=this.yk.gK(),c=Date.now();Z.a.ai.update(a,this.wd?Z.a.j.ea&~Z.a.j.o:Z.a.j.ea);this.gm===g&&!this.Bi&&(this.Fl+=this.Wq,this.Sp++,this.fo+=this.Yq,this.Ns++,this.Fn+=this.El,this.us++,this.Ql++,this.cy.append(Date.now(),this.Wq),this.MC.append(Date.now(),this.Yq),this.DC.append(Date.now(),b.length),this.$B.append(Date.now(),this.El),1E3<Date.now()-this.hC&&(this.xy.append(Date.now(),this.Ql),this.hC=Date.now(),this.dJ.innerHTML=Math.floor(this.Fl/this.Sp),this.SO.innerHTML=
Math.floor(this.fo/this.Ns),this.uO.innerHTML=b.length,this.WN.innerHTML=Math.floor(this.Fn/this.us),this.KJ.innerHTML=this.Ql,this.Ql=this.us=this.Fn=this.Ns=this.fo=this.Sp=this.Fl=0));this.lj++;this.El=0;this.yk.update();this.wd||(this.d.update(a),this.score.time+=a.B);this.h(a);this.Yq=Date.now()-c};m.h=function(a){var b=Date.now();this.wd||this.d.h(a);this.Wq=Date.now()-b};m.xa=function(a){this.d&&this.d.xa(a)};m.ib=function(a){this.d&&this.d.ib(a)};m.Qa=function(a){this.d&&this.d.Qa(a)};
Z.b.mE=Nj;var Pj=q;
function Qj(a,b){this.Ps=(0.5-Math.random())/1E3;this.Qs=Math.random()/1E3;this.Os=0;this.fd=b||1.05;this.opacity=0.5+0.5*Math.random();this.he=Math.random();this.scale=0.7+1*Math.random();this.img=a;this.$d=g;this.update=function(){this.he-=this.Ps;this.fd-=this.Qs;this.opacity-=this.Os;this.$d=0.025<this.scale&&0.025<this.opacity&&-0.05<this.fd&&-0.05<this.he&&1.025>this.he};this.h=function(b){if(this.$d){var d=b.canvas.width*this.he,e=b.canvas.height*this.fd;b.save();b.globalAlpha=this.opacity;
b.translate(d,e);b.scale(this.scale,this.scale);b.drawImage(a,0,0);b.restore()}}}
function Rj(a){var b=this;this.Xb=$("#card");this.mo=$("#card-content");this.oi=$("#card-editor");this.oo=$("#card-editor-dismiss");this.Rg=$("#card-message-ie");this.Qg=$("#card-message");this.aD=$("#card-to-text");this.ZC=$("#card-from-text");this.$C=$("#card-message-text");this.ze=$("#card-to-input");this.xe=$("#card-from-input");this.ye=$("#card-message-input");this.sL();this.r=[];this.Er=200;this.Ws=$("#card-canvas");this.canvas=document.getElementById("card-canvas");this.S=this.canvas.getContext("2d");
this.Rm=new Image;this.KA=k;this.$p=g;this.Pq=k;$("#card-close").click(function(){b.hide()});$("#card-play").click(function(){b.hide()});$("#card-share").click(function(){b.Pg(Sj.Uo)});$("#card-write").click(function(){b.Pg(Sj.Ek)});$("#card-customize-cancel").click(function(){b.Pg(Sj.Uo)});$("#card-clipboard").click(function(){b.oI()});$("#card-done-change").click(function(){b.Pg(Sj.Ek)});$("#card-customize-preview").click(function(){b.HL()});$("#card-editor-minimized").click(function(){b.TM()});
$("#card-customize-done").click(function(){Pj.a.Bj("ValentineCard","Customize");b.Pg(Sj.To)});$("#card-share-stumbleupon").bind("click",function(){b.Gg("Stumbleupon")});$("#card-share-facebook").bind("click",function(){b.Gg("Facebook","Celebrate friendship with exclusive brand new levels in Contre Jour!")});$("#card-share-twitter").bind("click",function(){b.Gg("Twitter","Celebrate Friendship with Contre Jour and @IE10! #html5 #valentine")});this.oo.click(function(){b.MB();b.Pg(Sj.ui)});this.KC();
$(window).resize(function(){b.KC()});this.ze.bind("propertychange keyup input paste",function(){b.eo()});this.xe.bind("propertychange keyup input paste",function(){b.eo()});this.ye.bind("propertychange keyup input paste",function(){b.eo()});this.TC=a}function Tj(){var a=this;this.Dk=$("#shareCardPanel");this.no=$("#shareCardPanel-content");this.Dk.click(function(){Uj||(Uj=new Rj(""));Uj.show(Sj.Ek,k)});var b=setInterval(function(){a.Dk.hasClass("show")&&(clearInterval(b),a.NN())},1E3)}Pj.Vo=k;
var Vj=location.protocol+"//"+location.host+location.pathname,Sj={ui:"hidden",Uo:"social",Ek:"customize",To:"send",Ry:function(a){return"card-editor-"+a}};m=Rj.prototype;m.Gg=function(a,b){Pj.a.Xz(a);b?window.open(meteor.sharing.href(a,{title:b}),"_blank","width=580,height=400,menubar=0"):window.open(meteor.sharing.href(a),"_blank","width=580,height=400,menubar=0")};
m.show=function(a,b){var c=this;a=a||Sj.ui;b?$("#card-close").addClass("play"):$("#card-close").removeClass("play");Pj.F.Fa.cO();this.KA?(Pj.a.Cb.start(),Pj.a.Cb.jd(c)):(this.Rm.onload=function(){Pj.a.Cb.start();Pj.a.Cb.jd(c);c.KA=g},this.Rm.src="img/card-particle.png");this.mo.fadeOut(0);this.Xb.fadeIn(500);this.mo.delay(500).fadeIn(500);c.Pg(a)};m.hide=function(){""!==location.hash&&(location.hash="");var a=this;Pj.F.Fa.hO();setTimeout(function(){a.Xb.fadeOut();Pj.a.Cb.oh(a)},500)};
m.HL=function(){this.Pq=g;$("#card-editor").removeClass("restored");$("#card-editor").addClass("minimized")};m.TM=function(){this.Pq=k;$("#card-editor").removeClass("minimized");$("#card-editor").addClass("restored");setTimeout(function(){$("#card-editor").removeClass("restored")},400)};
m.KC=function(){var a=this.Xb.width()/this.Xb.height();this.Xb.removeClass("portrait");this.Xb.removeClass("landscape");this.Xb.removeClass("square");var b=1366,c=1366;0.8>a?(this.Xb.addClass("portrait"),b=768):1.2<a?(this.Xb.addClass("landscape"),c=768):this.Xb.addClass("square");a=Math.min(this.Xb.width()/b,this.Xb.height()/c);b=(this.Xb.width()-b)/2;c=(this.Xb.height()-c)/2;this.mo.css({transform:"translate("+b+"px, "+c+"px) scale("+a+","+a+")"})};
m.update=function(){this.$p=!this.$p;if(!this.$p){if(0==this.r.length)for(;this.r.length<this.Er;)this.r.push(new Qj(this.Rm,0.9*Math.random()));else if(this.r.length>2*this.Er)for(var a=this.r.length-1;0<=a;a--)this.r[a].$d||this.r.remove(a);this.S.canvas.width=this.Ws.width();this.S.canvas.height=this.Ws.height();this.S.clearRect(0,0,this.S.canvas.width,this.S.canvas.height);for(var b=0,a=0;a<this.r.length;a++)this.r[a].update(),this.r[a].h(this.S),this.r[a].$d&&b++;for(a=b;a<this.Er;a++)this.r.push(new Qj(this.Rm,
1))}};
m.Pg=function(a){var b=this;if(!this.Pq){var c=this.SI;if(c!==a)if(this.SI=a,a==Sj.ui)this.Rg.fadeOut(0),this.Qg.fadeOut(0),this.MB(500),this.oi.animate({left:-1*this.oi.width()},500,"easeInOutQuart",function(){b.oi.hide();b.oo.hide()});else{var d=400;if(c===f||c==Sj.ui)$(".card-editor-view").fadeOut(0),this.oo.show(),this.oi.show(),this.oi.animate({left:40},500,"easeInOutQuart"),d=0;$("#"+Sj.Ry(c)).fadeOut(d);$("#"+Sj.Ry(a)).fadeIn(d);a==Sj.Uo?(this.Rg.fadeIn(500),this.Qg.fadeOut(500)):a==Sj.Ek?
(c!=Sj.To&&(this.ze.val(""),this.xe.val(""),this.ye.val(""),this.eo()),this.Rg.fadeOut(500),this.Qg.fadeIn(500)):a==Sj.To&&(a=this.vI(),$("#card-url").val(a),$("#card-url").select(),-1!==BrowserDetect.OS.indexOf("Mac")&&$("#card-editor-send").addClass("mac"),-1!==BrowserDetect.browser.indexOf("Explorer")&&$("#card-editor-send").addClass("ie"),this.Rg.fadeOut(500),this.Qg.fadeIn(500))}}};
m.eo=function(){var a=this.ze.val()||this.ye.val()||this.xe.val();this.NC(this.ze.val()?this.ze.val():this.ze.attr("placeholder"),this.ye.val()?this.ye.val():this.ye.attr("placeholder"),this.xe.val()?this.xe.val():this.xe.attr("placeholder"),a);this.ze.val()&&this.ye.val()&&this.xe.val()?$("#card-customize-done").removeClass("disabled"):$("#card-customize-done").addClass("disabled")};
m.NC=function(a,b,c,d){d&&(location.hash=this.Kx(a,b,c));this.aD.text(a+",");this.$C.text(b);this.ZC.text(c);a=180-1.25*b.length;$("#card-message").css({"font-size":a})};m.oI=function(){window.clipboardData&&window.clipboardData.setData("Text",$("#card-url").val())};m.vI=function(){var a=this.Kx(this.ze.val(),this.ye.val(),this.xe.val());return Vj+"#"+a};m.Kx=function(a,b,c){var d={};d.t=a;d.m=b;d.f=c;a=JSON.stringify(d);a=Base64.encode(a);return encodeURIComponent(a)};
m.MB=function(a){var b=j;a=a||0;var c=j;if(this.TC)try{(c=Base64.decode(decodeURIComponent(this.TC)))&&(b=JSON.parse(c))}catch(d){b=j}b?(this.KQ=g,this.NC(b.t,b.m,b.f),this.Rg.fadeOut(a),this.Qg.fadeIn(a)):(this.Rg.fadeIn(a),this.Qg.fadeOut(a))};
m.sL=function(){Pj.a.v.Bh()||Pj.a.v.load(function(){var a=Pj.a.v.qq(),a=a!=j?a.toUpperCase():"EN";$(".card-sprite").css("background-image","url(img/card-sprite-"+a+".png)");$("#card-message-ie").css("background-image","url(img/card-msg-"+a+".svg)");$("#card-editor-social h4").html(Pj.a.v.P("CARD_CELEBRATE_FRIENDSHIP"));$("#card-editor-social p").html(Pj.a.v.P("CARD_SEND_MESSAGE"));$("#card-write").html(Pj.a.v.P("CARD_WRITE_A_NOTE"));$("#card-editor-social h5").html(Pj.a.v.P("CARD_OR_SHARE_THIS"));
$("#card-to-label").text(Pj.a.v.P("CARD_TO"));$("#card-to-input").attr({placeholder:Pj.a.v.P("CARD_TO_PROMPT")});$("#card-message-label").text(Pj.a.v.P("CARD_MESSAGE"));$("#card-message-input").attr({placeholder:Pj.a.v.P("CARD_MESSAGE_PROMPT")});$("#card-from-label").text(Pj.a.v.P("CARD_SIGNED"));$("#card-from-input").attr({placeholder:Pj.a.v.P("CARD_LOVE_ME")});$("#card-editor-send h4").html(Pj.a.v.P("CARD_WAY_TO_GO"));$("#card-copy-prompt").html(Pj.a.v.P("CARD_COPY_LINK"));$("#card-clipboard-alt").html(Pj.a.v.P("CARD_USE_CTRL"));
$("#card-not-right").html(Pj.a.v.P("CARD_NOT_QUITE_RIGHT"));$("#card-done-change").html(Pj.a.v.P("CARD_CHANGE_SOMETHING"))},k)};Tj.prototype.NN=function(){var a=parseInt(this.no.css("right"),10);this.no.css({right:a-this.Dk.width()+"px",display:"block",opacity:0});this.Dk.show();this.no.delay(1E3).animate({right:a+"px",opacity:1},600,"easeOutExpo")};var Wj=Pj.a.ad("card","NOTFOUND"),Xj=Pj.a.ad("valentine","NOTFOUND"),Yj=location.hash,Uj=j,Zj=j,$j=k;Yj&&0<=Yj.indexOf("#")&&(Yj=Yj.split("#")[1]);
Yj&&($j=g,"valentine"==Yj?Zj=j:"fbid="==Yj.substr(0,5)?($j=k,Zj=j):Zj=Yj);if(!$j&&("NOTFOUND"!=Wj||"NOTFOUND"!=Xj))$j=g,Zj="NOTFOUND"!=Wj?Wj:Xj;$j&&(Pj.a.Bj("ValentineCard","View"),Uj=new Rj(Zj),Uj.show(Sj.ui,g));Pj.Vo&&new Tj;var ak=window,bk=q;function ck(){this.dj=k;bk.Vo&&$("#sharePanel").hide()}
ck.prototype.init=function(){if(!bk.zd&&!bk.Vo){var a=this;this.cQ=g;this.hover=k;this.Vq=Date.now();this.CN=$("#sharePanel");this.JB=$("#sharePanelHitArea");this.gk=$("#shareContentText");this.mR=$("#shareLinks");this.oR=$("#shareRight");this.lR=$("#shareLeft");this.nR=$("#shareMiddle");var b=this.Gb=this.touch=k;ak.navigator.msMaxTouchPoints&&0<ak.navigator.msMaxTouchPoints&&(b=g);if(Modernizr.touch||b)this.touch=g,this.JB=this.CN;$("#sharePanelOverlay").bind("click",function(){a.Vn()});$("#sharePanel").bind("click",
function(){a.Vn()});this.JB.bind("click",function(){a.Vq=Date.now();a.dj||a.Vn()});this.GN=$("#shareStumbleupon");this.DN=$("#shareFacebook");this.HN=$("#shareTwitter");this.GN.bind("click",function(){a.Gg("Stumbleupon");a.yq()});this.DN.bind("click",function(){a.Gg("Facebook");a.yq()});this.HN.bind("click",function(){a.Gg("Twitter","TWITTER_SHARE_MESSAGE");a.yq()})}};
ck.prototype.Gg=function(a,b){bk.a.Xz(a);b?ak.open(meteor.sharing.href(a,{title:bk.a.v.P(b)}),"_blank","width=580,height=400,menubar=0"):ak.open(meteor.sharing.href(a),"_blank","width=580,height=400,menubar=0")};ck.prototype.yq=function(){this.dj&&500<Date.now()-this.Vq&&this.Vn()};
ck.prototype.Vn=function(){var a=this;this.Gb||(a.Vq=Date.now(),this.Gb=g,a.dj?(a.dj=k,$("#sharePanel").removeClass("expanded"),$("#sharePanelOverlay").removeClass("expanded"),$("#shareLinks").animate({right:"-115px"},{duration:500,easing:"easeInOutExpo",complete:function(){a.Gb=k}})):(a.dj=g,$("#sharePanel").addClass("expanded"),$("#sharePanelOverlay").addClass("expanded"),$("#shareLinks").animate({right:"-30px"},{duration:500,easing:"easeInOutExpo",complete:function(){a.Gb=k}})))};bk.F.EN=new ck;
var dk=q;dk.F.GK={init:function(){setTimeout(function(){var a={};a.triggerIndex=dk.variation||0;ieFlyout.init(a)},500);var a=g;ieFlyout.on("videoOpened",function(){(a=dk.a.A.gg())||dk.a.A.tg(g)});ieFlyout.on("videoClosed",function(){a||setTimeout(function(){dk.a.A.tg(k)},500)})}};var ek=window,fk=Modernizr,gk=q;
function hk(){var a=fk.audio.mp3?"mp3":fk.audio.ogg?"ogg":"",b=fk.audio.mp3?"mp3":fk.audio.wav?"wav":"";gk.a.v.load(j,k);gk.a.tc.QK();gk.a.Up.CL();a&&gk.a.tc.jz(g,a);b&&gk.a.tc.jz(k,b);gk.a.tc.xH();gk.a.tc.wH();gk.a.tc.lL()}function fc(a){gk.F.Fa&&(gk.F.Fa.gr=Math.round(100*(a.completedCount/a.totalCount)))}
function ec(){gk.F.q=new gk.b.mE;if(gk.F.Fa){$("#ieLogo").on("click",function(){gk.a.xc("http://view.atdmt.com/action/SMG_MRTINX_SITE_CJ_GamingReimagined");gk.a.sg("hp_6_gamingie")});var a=$("#cjLogo").on("click",function(){ek.open("http://mokusgames.com/cj/","_blank")}),b="cjLogoText";switch(gk.a.v.Zf){case "russian":b="cjLogoTextSmall";break;case "portuguese":b="cjLogoTextMedium"}$("<div/>").addClass(b).html(gk.a.v.P("GET_MORE")).appendTo(a);gk.F.EN.init();gk.F.GK.init();gk.F.Fa.dM()}}
if("true"===gk.a.ad("debug","false")||-1<ek.location.href.indexOf("msstore.contrejour.webs.pm"))gk.Uc=k;var ik=gk.a.va(),jk=ik.settings,kk=jk?jk.debug:k;if(kk&&gk.Uc||!kk&&!gk.Uc)gk.a.vD(),ik=gk.a.va();"Explorer"===BrowserDetect.browser&&(gk.a.na(".letterBox","width","961px"),gk.a.na(".letterBox","height","76px"),gk.a.na(".gameContainer","width","961px"),gk.a.na(".gameContainer","height","641px"));gk.a.Ee(ik);gk.F.Fa.ready?hk():gk.F.Fa.xg.addCompletionListener(hk);gk.a.XO();})();
